var Jt=Object.defineProperty;var zt=m=>{throw TypeError(m)};var Kt=(m,t,s)=>t in m?Jt(m,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):m[t]=s;var gt=(m,t,s)=>Kt(m,typeof t!="symbol"?t+"":t,s),Rt=(m,t,s)=>t.has(m)||zt("Cannot "+s);var A=(m,t,s)=>(Rt(m,t,"read from private field"),s?s.call(m):t.get(m)),R=(m,t,s)=>t.has(m)?zt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(m):t.set(m,s),P=(m,t,s,i)=>(Rt(m,t,"write to private field"),i?i.call(m,s):t.set(m,s),s);import{r as Yt}from"./phaser-BA8NYTic.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}})();var H=Yt(),I={},yt={};/*! For license information please see index.js.LICENSE.txt */var Zt={218:m=>{var t=1e3,s=60*t,i=60*s,e=24*i;function n(a,h,u){if(!(a<h))return a<1.5*h?Math.floor(a/h)+" "+u:Math.ceil(a/h)+" "+u+"s"}m.exports=function(a,h){h=h||{};var u,f=typeof a;if(f==="string"&&a.length>0)return function(p){if(!((p=String(p)).length>100)){var l=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(l){var o=parseFloat(l[1]);switch((l[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*e;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*s;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(a);if(f==="number"&&isNaN(a)===!1)return h.long?n(u=a,e,"day")||n(u,i,"hour")||n(u,s,"minute")||n(u,t,"second")||u+" ms":function(p){return p>=e?Math.round(p/e)+"d":p>=i?Math.round(p/i)+"h":p>=s?Math.round(p/s)+"m":p>=t?Math.round(p/t)+"s":p+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},736:(m,t,s)=>{m.exports=function(i){function e(h){let u,f,p,l=null;function o(...r){if(!o.enabled)return;const c=o,_=Number(new Date),g=_-(u||_);c.diff=g,c.prev=u,c.curr=_,u=_,r[0]=e.coerce(r[0]),typeof r[0]!="string"&&r.unshift("%O");let y=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(v,C)=>{if(v==="%%")return"%";y++;const b=e.formatters[C];if(typeof b=="function"){const w=r[y];v=b.call(c,w),r.splice(y,1),y--}return v}),e.formatArgs.call(c,r),(c.log||e.log).apply(c,r)}return o.namespace=h,o.useColors=e.useColors(),o.color=e.selectColor(h),o.extend=n,o.destroy=e.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(f!==e.namespaces&&(f=e.namespaces,p=e.enabled(h)),p),set:r=>{l=r}}),typeof e.init=="function"&&e.init(o),o}function n(h,u){const f=e(this.namespace+(u===void 0?":":u)+h);return f.log=this.log,f}function a(h,u){let f=0,p=0,l=-1,o=0;for(;f<h.length;)if(p<u.length&&(u[p]===h[f]||u[p]==="*"))u[p]==="*"?(l=p,o=f,p++):(f++,p++);else{if(l===-1)return!1;p=l+1,o++,f=o}for(;p<u.length&&u[p]==="*";)p++;return p===u.length}return e.debug=e,e.default=e,e.coerce=function(h){return h instanceof Error?h.stack||h.message:h},e.disable=function(){const h=[...e.names,...e.skips.map(u=>"-"+u)].join(",");return e.enable(""),h},e.enable=function(h){e.save(h),e.namespaces=h,e.names=[],e.skips=[];const u=(typeof h=="string"?h:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const f of u)f[0]==="-"?e.skips.push(f.slice(1)):e.names.push(f)},e.enabled=function(h){for(const u of e.skips)if(a(h,u))return!1;for(const u of e.names)if(a(h,u))return!0;return!1},e.humanize=s(6585),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(i).forEach(h=>{e[h]=i[h]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(h){let u=0;for(let f=0;f<h.length;f++)u=(u<<5)-u+h.charCodeAt(f),u|=0;return e.colors[Math.abs(u)%e.colors.length]},e.enable(e.load()),e}},852:(m,t,s)=>{function i(){var e;try{e=t.storage.debug}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=yt.DEBUG),e}(t=m.exports=s(1175)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var a="color: "+this.color;e.splice(1,0,a,"color: inherit");var h=0,u=0;e[0].replace(/%[a-zA-Z%]/g,function(f){f!=="%%"&&(h++,f==="%c"&&(u=h))}),e.splice(u,0,a)}},t.save=function(e){try{e==null?t.storage.removeItem("debug"):t.storage.debug=e}catch{}},t.load=i,t.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}},t.enable(i())},969:m=>{function t(){}m.exports=function(s,i,e){var n=!1;return e=e||t,a.count=s,s===0?i():a;function a(h,u){if(a.count<=0)throw new Error("after called too many times");--a.count,h?(n=!0,i(h),i=e):a.count!==0||n||i(null,u)}}},1175:(m,t,s)=>{function i(n){var a;function h(){if(h.enabled){var u=h,f=+new Date,p=f-(a||f);u.diff=p,u.prev=a,u.curr=f,a=f;for(var l=new Array(arguments.length),o=0;o<l.length;o++)l[o]=arguments[o];l[0]=t.coerce(l[0]),typeof l[0]!="string"&&l.unshift("%O");var r=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,function(c,_){if(c==="%%")return c;r++;var g=t.formatters[_];if(typeof g=="function"){var y=l[r];c=g.call(u,y),l.splice(r,1),r--}return c}),t.formatArgs.call(u,l),(h.log||t.log||console.log.bind(console)).apply(u,l)}}return h.namespace=n,h.enabled=t.enabled(n),h.useColors=t.useColors(),h.color=function(u){var f,p=0;for(f in u)p=(p<<5)-p+u.charCodeAt(f),p|=0;return t.colors[Math.abs(p)%t.colors.length]}(n),h.destroy=e,typeof t.init=="function"&&t.init(h),t.instances.push(h),h}function e(){var n=t.instances.indexOf(this);return n!==-1&&(t.instances.splice(n,1),!0)}(t=m.exports=i.debug=i.default=i).coerce=function(n){return n instanceof Error?n.stack||n.message:n},t.disable=function(){t.enable("")},t.enable=function(n){var a;t.save(n),t.names=[],t.skips=[];var h=(typeof n=="string"?n:"").split(/[\s,]+/),u=h.length;for(a=0;a<u;a++)h[a]&&((n=h[a].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+n.substr(1)+"$")):t.names.push(new RegExp("^"+n+"$")));for(a=0;a<t.instances.length;a++){var f=t.instances[a];f.enabled=t.enabled(f.namespace)}},t.enabled=function(n){if(n[n.length-1]==="*")return!0;var a,h;for(a=0,h=t.skips.length;a<h;a++)if(t.skips[a].test(n))return!1;for(a=0,h=t.names.length;a<h;a++)if(t.names[a].test(n))return!0;return!1},t.humanize=s(218),t.instances=[],t.names=[],t.skips=[],t.formatters={}},2121:m=>{var t,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={},e=0,n=0;function a(u){var f="";do f=s[u%64]+f,u=Math.floor(u/64);while(u>0);return f}function h(){var u=a(+new Date);return u!==t?(e=0,t=u):u+"."+a(e++)}for(;n<64;n++)i[s[n]]=n;h.encode=a,h.decode=function(u){var f=0;for(n=0;n<u.length;n++)f=64*f+i[u.charAt(n)];return f},m.exports=h},2225:(m,t,s)=>{var i=s(4634),e=s(8247),n=Object.prototype.toString,a=typeof I.Blob=="function"||n.call(I.Blob)==="[object BlobConstructor]",h=typeof I.File=="function"||n.call(I.File)==="[object FileConstructor]";function u(p,l){if(!p)return p;if(e(p)){var o={_placeholder:!0,num:l.length};return l.push(p),o}if(i(p)){for(var r=new Array(p.length),c=0;c<p.length;c++)r[c]=u(p[c],l);return r}if(typeof p=="object"&&!(p instanceof Date)){for(var _ in r={},p)r[_]=u(p[_],l);return r}return p}function f(p,l){if(!p)return p;if(p&&p._placeholder)return l[p.num];if(i(p))for(var o=0;o<p.length;o++)p[o]=f(p[o],l);else if(typeof p=="object")for(var r in p)p[r]=f(p[r],l);return p}t.deconstructPacket=function(p){var l=[],o=p.data,r=p;return r.data=u(o,l),r.attachments=l.length,{packet:r,buffers:l}},t.reconstructPacket=function(p,l){return p.data=f(p.data,l),p.attachments=void 0,p},t.removeBlobs=function(p,l){var o=0,r=p;(function c(_,g,y){if(!_)return _;if(a&&_ instanceof Blob||h&&_ instanceof File){o++;var v=new FileReader;v.onload=function(){y?y[g]=this.result:r=this.result,--o||l(r)},v.readAsArrayBuffer(_)}else if(i(_))for(var C=0;C<_.length;C++)c(_[C],C,_);else if(typeof _=="object"&&!e(_))for(var b in _)c(_[b],b,_)})(r),o||l(r)}},2252:(m,t,s)=>{var i=s(5911),e=s(2370);m.exports=f;var n,a=/\n/g,h=/\\n/g;function u(){}function f(p){i.call(this,p),this.query=this.query||{},n||(I.___eio||(I.___eio=[]),n=I.___eio),this.index=n.length;var l=this;n.push(function(o){l.onData(o)}),this.query.j=this.index,I.document&&I.addEventListener&&I.addEventListener("beforeunload",function(){l.script&&(l.script.onerror=u)},!1)}e(f,i),f.prototype.supportsBinary=!1,f.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},f.prototype.doPoll=function(){var p=this,l=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),l.async=!0,l.src=this.uri(),l.onerror=function(r){p.onError("jsonp poll error",r)};var o=document.getElementsByTagName("script")[0];o?o.parentNode.insertBefore(l,o):(document.head||document.body).appendChild(l),this.script=l,typeof navigator<"u"&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var r=document.createElement("iframe");document.body.appendChild(r),document.body.removeChild(r)},100)},f.prototype.doWrite=function(p,l){var o=this;if(!this.form){var r,c=document.createElement("form"),_=document.createElement("textarea"),g=this.iframeId="eio_iframe_"+this.index;c.className="socketio",c.style.position="absolute",c.style.top="-1000px",c.style.left="-1000px",c.target=g,c.method="POST",c.setAttribute("accept-charset","utf-8"),_.name="d",c.appendChild(_),document.body.appendChild(c),this.form=c,this.area=_}function y(){v(),l()}function v(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(b){o.onError("jsonp polling iframe removal error",b)}try{var C='<iframe src="javascript:0" name="'+o.iframeId+'">';r=document.createElement(C)}catch{(r=document.createElement("iframe")).name=o.iframeId,r.src="javascript:0"}r.id=o.iframeId,o.form.appendChild(r),o.iframe=r}this.form.action=this.uri(),v(),p=p.replace(h,`\\
`),this.area.value=p.replace(a,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){o.iframe.readyState==="complete"&&y()}:this.iframe.onload=y}},2370:m=>{m.exports=function(t,s){var i=function(){};i.prototype=s.prototype,t.prototype=new i,t.prototype.constructor=t}},2505:m=>{m.exports=Object.keys||function(t){var s=[],i=Object.prototype.hasOwnProperty;for(var e in t)i.call(t,e)&&s.push(e);return s}},2672:(m,t,s)=>{var i=s(3401),e=s(5971);function n(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.forceNode=a.forceNode,this.extraHeaders=a.extraHeaders,this.localAddress=a.localAddress}m.exports=n,e(n.prototype),n.prototype.onError=function(a,h){var u=new Error(a);return u.type="TransportError",u.description=h,this.emit("error",u),this},n.prototype.open=function(){return this.readyState!=="closed"&&this.readyState!==""||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this},n.prototype.send=function(a){if(this.readyState!=="open")throw new Error("Transport not open");this.write(a)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(a){var h=i.decodePacket(a,this.socket.binaryType);this.onPacket(h)},n.prototype.onPacket=function(a){this.emit("packet",a)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},2902:m=>{var t=1e3,s=60*t,i=60*s,e=24*i;function n(a,h,u){if(!(a<h))return a<1.5*h?Math.floor(a/h)+" "+u:Math.ceil(a/h)+" "+u+"s"}m.exports=function(a,h){h=h||{};var u,f=typeof a;if(f==="string"&&a.length>0)return function(p){if(!((p=String(p)).length>100)){var l=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(l){var o=parseFloat(l[1]);switch((l[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*e;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*s;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(a);if(f==="number"&&isNaN(a)===!1)return h.long?n(u=a,e,"day")||n(u,i,"hour")||n(u,s,"minute")||n(u,t,"second")||u+" ms":function(p){return p>=e?Math.round(p/e)+"d":p>=i?Math.round(p/i)+"h":p>=s?Math.round(p/s)+"m":p>=t?Math.round(p/t)+"s":p+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},3051:(m,t,s)=>{var i=s(8383);m.exports=function(e){var n=e.xdomain,a=e.xscheme,h=e.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!n||i))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!a&&h)return new XDomainRequest}catch{}if(!n)try{return new I[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}},3059:m=>{function t(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}m.exports=t,t.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var i=Math.random(),e=Math.floor(i*this.jitter*s);s=1&Math.floor(10*i)?s+e:s-e}return 0|Math.min(s,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(s){this.ms=s},t.prototype.setMax=function(s){this.max=s},t.prototype.setJitter=function(s){this.jitter=s}},3097:m=>{var t=1e3,s=60*t,i=60*s,e=24*i;function n(a,h,u){if(!(a<h))return a<1.5*h?Math.floor(a/h)+" "+u:Math.ceil(a/h)+" "+u+"s"}m.exports=function(a,h){h=h||{};var u,f=typeof a;if(f==="string"&&a.length>0)return function(p){if(!((p=String(p)).length>100)){var l=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(l){var o=parseFloat(l[1]);switch((l[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*e;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*s;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(a);if(f==="number"&&isNaN(a)===!1)return h.long?n(u=a,e,"day")||n(u,i,"hour")||n(u,s,"minute")||n(u,t,"second")||u+" ms":function(p){return p>=e?Math.round(p/e)+"d":p>=i?Math.round(p/i)+"h":p>=s?Math.round(p/s)+"m":p>=t?Math.round(p/t)+"s":p+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},3118:m=>{var t=t!==void 0?t:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"&&MozBlobBuilder,s=function(){try{return new Blob(["hi"]).size===2}catch{return!1}}(),i=s&&function(){try{return new Blob([new Uint8Array([1,2])]).size===2}catch{return!1}}(),e=t&&t.prototype.append&&t.prototype.getBlob;function n(u){return u.map(function(f){if(f.buffer instanceof ArrayBuffer){var p=f.buffer;if(f.byteLength!==p.byteLength){var l=new Uint8Array(f.byteLength);l.set(new Uint8Array(p,f.byteOffset,f.byteLength)),p=l.buffer}return p}return f})}function a(u,f){f=f||{};var p=new t;return n(u).forEach(function(l){p.append(l)}),f.type?p.getBlob(f.type):p.getBlob()}function h(u,f){return new Blob(n(u),f||{})}typeof Blob<"u"&&(a.prototype=Blob.prototype,h.prototype=Blob.prototype),m.exports=s?i?Blob:h:e?a:void 0},3344:m=>{m.exports=function(t,s,i){var e=t.byteLength;if(s=s||0,i=i||e,t.slice)return t.slice(s,i);if(s<0&&(s+=e),i<0&&(i+=e),i>e&&(i=e),s>=e||s>=i||e===0)return new ArrayBuffer(0);for(var n=new Uint8Array(t),a=new Uint8Array(i-s),h=s,u=0;h<i;h++,u++)a[u]=n[h];return a.buffer}},3357:(m,t,s)=>{m.exports=s(7292),m.exports.parser=s(3401)},3371:(m,t)=>{(function(){for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256),e=0;e<64;e++)i[s.charCodeAt(e)]=e;t.encode=function(n){var a,h=new Uint8Array(n),u=h.length,f="";for(a=0;a<u;a+=3)f+=s[h[a]>>2],f+=s[(3&h[a])<<4|h[a+1]>>4],f+=s[(15&h[a+1])<<2|h[a+2]>>6],f+=s[63&h[a+2]];return u%3==2?f=f.substring(0,f.length-1)+"=":u%3==1&&(f=f.substring(0,f.length-2)+"=="),f},t.decode=function(n){var a,h,u,f,p,l=.75*n.length,o=n.length,r=0;n[n.length-1]==="="&&(l--,n[n.length-2]==="="&&l--);var c=new ArrayBuffer(l),_=new Uint8Array(c);for(a=0;a<o;a+=4)h=i[n.charCodeAt(a)],u=i[n.charCodeAt(a+1)],f=i[n.charCodeAt(a+2)],p=i[n.charCodeAt(a+3)],_[r++]=h<<2|u>>4,_[r++]=(15&u)<<4|f>>2,_[r++]=(3&f)<<6|63&p;return c}})()},3401:(m,t,s)=>{var i,e=s(2505),n=s(8839),a=s(3344),h=s(969),u=s(8758);typeof ArrayBuffer<"u"&&(i=s(3371));var f=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),p=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),l=f||p;t.protocol=3;var o=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},r=e(o),c={type:"error",data:"parser error"},_=s(3118);function g(y,v,C){for(var b=new Array(y.length),w=h(y.length,C),T=function(S,E,F){v(E,function(O,M){b[S]=M,F(O,b)})},k=0;k<y.length;k++)T(k,y[k],w)}t.encodePacket=function(y,v,C,b){typeof v=="function"&&(b=v,v=!1),typeof C=="function"&&(b=C,C=null);var w=y.data===void 0?void 0:y.data.buffer||y.data;if(typeof ArrayBuffer<"u"&&w instanceof ArrayBuffer)return function(k,S,E){if(!S)return t.encodeBase64Packet(k,E);var F=k.data,O=new Uint8Array(F),M=new Uint8Array(1+F.byteLength);M[0]=o[k.type];for(var D=0;D<O.length;D++)M[D+1]=O[D];return E(M.buffer)}(y,v,b);if(_!==void 0&&w instanceof _)return function(k,S,E){if(!S)return t.encodeBase64Packet(k,E);if(l)return function(O,M,D){if(!M)return t.encodeBase64Packet(O,D);var N=new FileReader;return N.onload=function(){t.encodePacket({type:O.type,data:N.result},M,!0,D)},N.readAsArrayBuffer(O.data)}(k,S,E);var F=new Uint8Array(1);return F[0]=o[k.type],E(new _([F.buffer,k.data]))}(y,v,b);if(w&&w.base64)return function(k,S){return S("b"+t.packets[k.type]+k.data.data)}(y,b);var T=o[y.type];return y.data!==void 0&&(T+=C?u.encode(String(y.data),{strict:!1}):String(y.data)),b(""+T)},t.encodeBase64Packet=function(y,v){var C,b="b"+t.packets[y.type];if(_!==void 0&&y.data instanceof _){var w=new FileReader;return w.onload=function(){var E=w.result.split(",")[1];v(b+E)},w.readAsDataURL(y.data)}try{C=String.fromCharCode.apply(null,new Uint8Array(y.data))}catch{for(var T=new Uint8Array(y.data),k=new Array(T.length),S=0;S<T.length;S++)k[S]=T[S];C=String.fromCharCode.apply(null,k)}return b+=btoa(C),v(b)},t.decodePacket=function(y,v,C){if(y===void 0)return c;if(typeof y=="string"){if(y.charAt(0)==="b")return t.decodeBase64Packet(y.substr(1),v);if(C&&(y=function(T){try{T=u.decode(T,{strict:!1})}catch{return!1}return T}(y))===!1)return c;var b=y.charAt(0);return Number(b)==b&&r[b]?y.length>1?{type:r[b],data:y.substring(1)}:{type:r[b]}:c}b=new Uint8Array(y)[0];var w=a(y,1);return _&&v==="blob"&&(w=new _([w])),{type:r[b],data:w}},t.decodeBase64Packet=function(y,v){var C=r[y.charAt(0)];if(!i)return{type:C,data:{base64:!0,data:y.substr(1)}};var b=i.decode(y.substr(1));return v==="blob"&&_&&(b=new _([b])),{type:C,data:b}},t.encodePayload=function(y,v,C){typeof v=="function"&&(C=v,v=null);var b=n(y);return v&&b?_&&!l?t.encodePayloadAsBlob(y,C):t.encodePayloadAsArrayBuffer(y,C):y.length?void g(y,function(w,T){t.encodePacket(w,!!b&&v,!1,function(k){T(null,function(S){return S.length+":"+S}(k))})},function(w,T){return C(T.join(""))}):C("0:")},t.decodePayload=function(y,v,C){if(typeof y!="string")return t.decodePayloadAsBinary(y,v,C);var b;if(typeof v=="function"&&(C=v,v=null),y==="")return C(c,0,1);for(var w,T,k="",S=0,E=y.length;S<E;S++){var F=y.charAt(S);if(F===":"){if(k===""||k!=(w=Number(k))||k!=(T=y.substr(S+1,w)).length)return C(c,0,1);if(T.length){if(b=t.decodePacket(T,v,!1),c.type===b.type&&c.data===b.data)return C(c,0,1);if(C(b,S+w,E)===!1)return}S+=w,k=""}else k+=F}return k!==""?C(c,0,1):void 0},t.encodePayloadAsArrayBuffer=function(y,v){if(!y.length)return v(new ArrayBuffer(0));g(y,function(C,b){t.encodePacket(C,!0,!0,function(w){return b(null,w)})},function(C,b){var w=b.reduce(function(S,E){var F;return S+(F=typeof E=="string"?E.length:E.byteLength).toString().length+F+2},0),T=new Uint8Array(w),k=0;return b.forEach(function(S){var E=typeof S=="string",F=S;if(E){for(var O=new Uint8Array(S.length),M=0;M<S.length;M++)O[M]=S.charCodeAt(M);F=O.buffer}T[k++]=E?0:1;var D=F.byteLength.toString();for(M=0;M<D.length;M++)T[k++]=parseInt(D[M]);for(T[k++]=255,O=new Uint8Array(F),M=0;M<O.length;M++)T[k++]=O[M]}),v(T.buffer)})},t.encodePayloadAsBlob=function(y,v){g(y,function(C,b){t.encodePacket(C,!0,!0,function(w){var T=new Uint8Array(1);if(T[0]=1,typeof w=="string"){for(var k=new Uint8Array(w.length),S=0;S<w.length;S++)k[S]=w.charCodeAt(S);w=k.buffer,T[0]=0}var E=(w instanceof ArrayBuffer?w.byteLength:w.size).toString(),F=new Uint8Array(E.length+1);for(S=0;S<E.length;S++)F[S]=parseInt(E[S]);if(F[E.length]=255,_){var O=new _([T.buffer,F.buffer,w]);b(null,O)}})},function(C,b){return v(new _(b))})},t.decodePayloadAsBinary=function(y,v,C){typeof v=="function"&&(C=v,v=null);for(var b=y,w=[];b.byteLength>0;){for(var T=new Uint8Array(b),k=T[0]===0,S="",E=1;T[E]!==255;E++){if(S.length>310)return C(c,0,1);S+=T[E]}b=a(b,2+S.length),S=parseInt(S);var F=a(b,0,S);if(k)try{F=String.fromCharCode.apply(null,new Uint8Array(F))}catch{var O=new Uint8Array(F);for(F="",E=0;E<O.length;E++)F+=String.fromCharCode(O[E])}w.push(F),b=a(b,S)}var M=w.length;w.forEach(function(D,N){C(t.decodePacket(D,v,!0),N,M)})}},4258:m=>{var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];m.exports=function(i){var e=i,n=i.indexOf("["),a=i.indexOf("]");n!=-1&&a!=-1&&(i=i.substring(0,n)+i.substring(n,a).replace(/:/g,";")+i.substring(a,i.length));for(var h=t.exec(i||""),u={},f=14;f--;)u[s[f]]=h[f]||"";return n!=-1&&a!=-1&&(u.source=e,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u}},4634:m=>{var t={}.toString;m.exports=Array.isArray||function(s){return t.call(s)=="[object Array]"}},4745:m=>{m.exports=function(t,s,i){return t.on(s,i),{destroy:function(){t.removeListener(s,i)}}}},5074:(m,t,s)=>{var i=s(852)("socket.io-parser"),e=s(5971),n=s(8839),a=s(2225),h=s(4634),u=s(8247);function f(){}function p(c){var _=""+c.type;return t.BINARY_EVENT!==c.type&&t.BINARY_ACK!==c.type||(_+=c.attachments+"-"),c.nsp&&c.nsp!=="/"&&(_+=c.nsp+","),c.id!=null&&(_+=c.id),c.data!=null&&(_+=JSON.stringify(c.data)),i("encoded %j as %s",c,_),_}function l(){this.reconstructor=null}function o(c){this.reconPack=c,this.buffers=[]}function r(c){return{type:t.ERROR,data:"parser error: "+c}}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=f,t.Decoder=l,f.prototype.encode=function(c,_){c.type!==t.EVENT&&c.type!==t.ACK||!n(c.data)||(c.type=c.type===t.EVENT?t.BINARY_EVENT:t.BINARY_ACK),i("encoding packet %j",c),t.BINARY_EVENT===c.type||t.BINARY_ACK===c.type?function(g,y){a.removeBlobs(g,function(v){var C=a.deconstructPacket(v),b=p(C.packet),w=C.buffers;w.unshift(b),y(w)})}(c,_):_([p(c)])},e(l.prototype),l.prototype.add=function(c){var _;if(typeof c=="string")_=function(g){var y=0,v={type:Number(g.charAt(0))};if(t.types[v.type]==null)return r("unknown packet type "+v.type);if(t.BINARY_EVENT===v.type||t.BINARY_ACK===v.type){for(var C="";g.charAt(++y)!=="-"&&(C+=g.charAt(y),y!=g.length););if(C!=Number(C)||g.charAt(y)!=="-")throw new Error("Illegal attachments");v.attachments=Number(C)}if(g.charAt(y+1)==="/")for(v.nsp="";++y&&(w=g.charAt(y))!==","&&(v.nsp+=w,y!==g.length););else v.nsp="/";var b=g.charAt(y+1);if(b!==""&&Number(b)==b){for(v.id="";++y;){var w;if((w=g.charAt(y))==null||Number(w)!=w){--y;break}if(v.id+=g.charAt(y),y===g.length)break}v.id=Number(v.id)}if(g.charAt(++y)){var T=function(k){try{return JSON.parse(k)}catch{return!1}}(g.substr(y));if(T===!1||v.type!==t.ERROR&&!h(T))return r("invalid payload");v.data=T}return i("decoded %s as %j",g,v),v}(c),t.BINARY_EVENT===_.type||t.BINARY_ACK===_.type?(this.reconstructor=new o(_),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",_)):this.emit("decoded",_);else{if(!u(c)&&!c.base64)throw new Error("Unknown type: "+c);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(_=this.reconstructor.takeBinaryData(c))&&(this.reconstructor=null,this.emit("decoded",_))}},l.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},o.prototype.takeBinaryData=function(c){if(this.buffers.push(c),this.buffers.length===this.reconPack.attachments){var _=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),_}return null},o.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},5660:()=>{},5911:(m,t,s)=>{var i=s(2672),e=s(9140),n=s(3401),a=s(2370),h=s(2121),u=s(6617)("engine.io-client:polling");m.exports=p;var f=new(s(3051))({xdomain:!1}).responseType!=null;function p(l){var o=l&&l.forceBase64;f&&!o||(this.supportsBinary=!1),i.call(this,l)}a(p,i),p.prototype.name="polling",p.prototype.doOpen=function(){this.poll()},p.prototype.pause=function(l){var o=this;function r(){u("paused"),o.readyState="paused",l()}if(this.readyState="pausing",this.polling||!this.writable){var c=0;this.polling&&(u("we are currently polling - waiting to pause"),c++,this.once("pollComplete",function(){u("pre-pause polling complete"),--c||r()})),this.writable||(u("we are currently writing - waiting to pause"),c++,this.once("drain",function(){u("pre-pause writing complete"),--c||r()}))}else r()},p.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},p.prototype.onData=function(l){var o=this;u("polling got data %s",l),n.decodePayload(l,this.socket.binaryType,function(r,c,_){if(o.readyState==="opening"&&o.onOpen(),r.type==="close")return o.onClose(),!1;o.onPacket(r)}),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},p.prototype.doClose=function(){var l=this;function o(){u("writing close packet"),l.write([{type:"close"}])}this.readyState==="open"?(u("transport open - closing"),o()):(u("transport not open - deferring close"),this.once("open",o))},p.prototype.write=function(l){var o=this;this.writable=!1;var r=function(){o.writable=!0,o.emit("drain")};n.encodePayload(l,this.supportsBinary,function(c){o.doWrite(c,r)})},p.prototype.uri=function(){var l=this.query||{},o=this.secure?"https":"http",r="";return this.timestampRequests!==!1&&(l[this.timestampParam]=h()),this.supportsBinary||l.sid||(l.b64=1),l=e.encode(l),this.port&&(o==="https"&&Number(this.port)!==443||o==="http"&&Number(this.port)!==80)&&(r=":"+this.port),l.length&&(l="?"+l),o+"://"+(this.hostname.indexOf(":")!==-1?"["+this.hostname+"]":this.hostname)+r+this.path+l}},5971:m=>{function t(s){if(s)return function(i){for(var e in t.prototype)i[e]=t.prototype[e];return i}(s)}m.exports=t,t.prototype.on=t.prototype.addEventListener=function(s,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(i),this},t.prototype.once=function(s,i){function e(){this.off(s,e),i.apply(this,arguments)}return e.fn=i,this.on(s,e),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(s,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e,n=this._callbacks["$"+s];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var a=0;a<n.length;a++)if((e=n[a])===i||e.fn===i){n.splice(a,1);break}return this},t.prototype.emit=function(s){this._callbacks=this._callbacks||{};var i=[].slice.call(arguments,1),e=this._callbacks["$"+s];if(e)for(var n=0,a=(e=e.slice(0)).length;n<a;++n)e[n].apply(this,i);return this},t.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]},t.prototype.hasListeners=function(s){return!!this.listeners(s).length}},6585:m=>{var t=1e3,s=60*t,i=60*s,e=24*i,n=7*e;function a(h,u,f,p){var l=u>=1.5*f;return Math.round(h/f)+" "+p+(l?"s":"")}m.exports=function(h,u){u=u||{};var f,p,l=typeof h;if(l==="string"&&h.length>0)return function(o){if(!((o=String(o)).length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(o);if(r){var c=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*c;case"weeks":case"week":case"w":return c*n;case"days":case"day":case"d":return c*e;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*s;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}(h);if(l==="number"&&isFinite(h))return u.long?(f=h,(p=Math.abs(f))>=e?a(f,p,e,"day"):p>=i?a(f,p,i,"hour"):p>=s?a(f,p,s,"minute"):p>=t?a(f,p,t,"second"):f+" ms"):function(o){var r=Math.abs(o);return r>=e?Math.round(o/e)+"d":r>=i?Math.round(o/i)+"h":r>=s?Math.round(o/s)+"m":r>=t?Math.round(o/t)+"s":o+"ms"}(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))}},6617:(m,t,s)=>{function i(){var e;try{e=t.storage.debug}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=yt.DEBUG),e}(t=m.exports=s(9110)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var a="color: "+this.color;e.splice(1,0,a,"color: inherit");var h=0,u=0;e[0].replace(/%[a-zA-Z%]/g,function(f){f!=="%%"&&(h++,f==="%c"&&(u=h))}),e.splice(u,0,a)}},t.save=function(e){try{e==null?t.storage.removeItem("debug"):t.storage.debug=e}catch{}},t.load=i,t.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}},t.enable(i())},6855:(m,t,s)=>{var i,e=s(2672),n=s(3401),a=s(9140),h=s(2370),u=s(2121),f=s(6617)("engine.io-client:websocket"),p=I.WebSocket||I.MozWebSocket;if(typeof window>"u")try{i=s(5660)}catch{}var l=p;function o(r){r&&r.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=r.perMessageDeflate,this.usingBrowserWebSocket=p&&!r.forceNode,this.protocols=r.protocols,this.usingBrowserWebSocket||(l=i),e.call(this,r)}l||typeof window<"u"||(l=i),m.exports=o,h(o,e),o.prototype.name="websocket",o.prototype.supportsBinary=!0,o.prototype.doOpen=function(){if(this.check()){var r=this.uri(),c=this.protocols,_={agent:this.agent,perMessageDeflate:this.perMessageDeflate};_.pfx=this.pfx,_.key=this.key,_.passphrase=this.passphrase,_.cert=this.cert,_.ca=this.ca,_.ciphers=this.ciphers,_.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(_.headers=this.extraHeaders),this.localAddress&&(_.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?c?new l(r,c):new l(r):new l(r,c,_)}catch(g){return this.emit("error",g)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},o.prototype.addEventListeners=function(){var r=this;this.ws.onopen=function(){r.onOpen()},this.ws.onclose=function(){r.onClose()},this.ws.onmessage=function(c){r.onData(c.data)},this.ws.onerror=function(c){r.onError("websocket error",c)}},o.prototype.write=function(r){var c=this;this.writable=!1;for(var _=r.length,g=0,y=_;g<y;g++)(function(v){n.encodePacket(v,c.supportsBinary,function(C){if(!c.usingBrowserWebSocket){var b={};v.options&&(b.compress=v.options.compress),c.perMessageDeflate&&(typeof C=="string"?I.Buffer.byteLength(C):C.length)<c.perMessageDeflate.threshold&&(b.compress=!1)}try{c.usingBrowserWebSocket?c.ws.send(C):c.ws.send(C,b)}catch{f("websocket closed before onclose event")}--_||(c.emit("flush"),setTimeout(function(){c.writable=!0,c.emit("drain")},0))})})(r[g])},o.prototype.onClose=function(){e.prototype.onClose.call(this)},o.prototype.doClose=function(){this.ws!==void 0&&this.ws.close()},o.prototype.uri=function(){var r=this.query||{},c=this.secure?"wss":"ws",_="";return this.port&&(c==="wss"&&Number(this.port)!==443||c==="ws"&&Number(this.port)!==80)&&(_=":"+this.port),this.timestampRequests&&(r[this.timestampParam]=u()),this.supportsBinary||(r.b64=1),(r=a.encode(r)).length&&(r="?"+r),c+"://"+(this.hostname.indexOf(":")!==-1?"["+this.hostname+"]":this.hostname)+_+this.path+r},o.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===o.prototype.name)}},6938:m=>{var t=[].indexOf;m.exports=function(s,i){if(t)return s.indexOf(i);for(var e=0;e<s.length;++e)if(s[e]===i)return e;return-1}},7007:m=>{var t,s=typeof Reflect=="object"?Reflect:null,i=s&&typeof s.apply=="function"?s.apply:function(g,y,v){return Function.prototype.apply.call(g,y,v)};t=s&&typeof s.ownKeys=="function"?s.ownKeys:Object.getOwnPropertySymbols?function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:function(g){return Object.getOwnPropertyNames(g)};var e=Number.isNaN||function(g){return g!=g};function n(){n.init.call(this)}m.exports=n,m.exports.once=function(g,y){return new Promise(function(v,C){function b(T){g.removeListener(y,w),C(T)}function w(){typeof g.removeListener=="function"&&g.removeListener("error",b),v([].slice.call(arguments))}_(g,y,w,{once:!0}),y!=="error"&&function(T,k){typeof T.on=="function"&&_(T,"error",k,{once:!0})}(g,b)})},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var a=10;function h(g){if(typeof g!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g)}function u(g){return g._maxListeners===void 0?n.defaultMaxListeners:g._maxListeners}function f(g,y,v,C){var b,w,T,k;if(h(v),(w=g._events)===void 0?(w=g._events=Object.create(null),g._eventsCount=0):(w.newListener!==void 0&&(g.emit("newListener",y,v.listener?v.listener:v),w=g._events),T=w[y]),T===void 0)T=w[y]=v,++g._eventsCount;else if(typeof T=="function"?T=w[y]=C?[v,T]:[T,v]:C?T.unshift(v):T.push(v),(b=u(g))>0&&T.length>b&&!T.warned){T.warned=!0;var S=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(y)+" listeners added. Use emitter.setMaxListeners() to increase limit");S.name="MaxListenersExceededWarning",S.emitter=g,S.type=y,S.count=T.length,k=S,console&&console.warn&&console.warn(k)}return g}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(g,y,v){var C={fired:!1,wrapFn:void 0,target:g,type:y,listener:v},b=p.bind(C);return b.listener=v,C.wrapFn=b,b}function o(g,y,v){var C=g._events;if(C===void 0)return[];var b=C[y];return b===void 0?[]:typeof b=="function"?v?[b.listener||b]:[b]:v?function(w){for(var T=new Array(w.length),k=0;k<T.length;++k)T[k]=w[k].listener||w[k];return T}(b):c(b,b.length)}function r(g){var y=this._events;if(y!==void 0){var v=y[g];if(typeof v=="function")return 1;if(v!==void 0)return v.length}return 0}function c(g,y){for(var v=new Array(y),C=0;C<y;++C)v[C]=g[C];return v}function _(g,y,v,C){if(typeof g.on=="function")C.once?g.once(y,v):g.on(y,v);else{if(typeof g.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof g);g.addEventListener(y,function b(w){C.once&&g.removeEventListener(y,b),v(w)})}}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(g){if(typeof g!="number"||g<0||e(g))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+g+".");a=g}}),n.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(g){if(typeof g!="number"||g<0||e(g))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+g+".");return this._maxListeners=g,this},n.prototype.getMaxListeners=function(){return u(this)},n.prototype.emit=function(g){for(var y=[],v=1;v<arguments.length;v++)y.push(arguments[v]);var C=g==="error",b=this._events;if(b!==void 0)C=C&&b.error===void 0;else if(!C)return!1;if(C){var w;if(y.length>0&&(w=y[0]),w instanceof Error)throw w;var T=new Error("Unhandled error."+(w?" ("+w.message+")":""));throw T.context=w,T}var k=b[g];if(k===void 0)return!1;if(typeof k=="function")i(k,this,y);else{var S=k.length,E=c(k,S);for(v=0;v<S;++v)i(E[v],this,y)}return!0},n.prototype.addListener=function(g,y){return f(this,g,y,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(g,y){return f(this,g,y,!0)},n.prototype.once=function(g,y){return h(y),this.on(g,l(this,g,y)),this},n.prototype.prependOnceListener=function(g,y){return h(y),this.prependListener(g,l(this,g,y)),this},n.prototype.removeListener=function(g,y){var v,C,b,w,T;if(h(y),(C=this._events)===void 0)return this;if((v=C[g])===void 0)return this;if(v===y||v.listener===y)--this._eventsCount===0?this._events=Object.create(null):(delete C[g],C.removeListener&&this.emit("removeListener",g,v.listener||y));else if(typeof v!="function"){for(b=-1,w=v.length-1;w>=0;w--)if(v[w]===y||v[w].listener===y){T=v[w].listener,b=w;break}if(b<0)return this;b===0?v.shift():function(k,S){for(;S+1<k.length;S++)k[S]=k[S+1];k.pop()}(v,b),v.length===1&&(C[g]=v[0]),C.removeListener!==void 0&&this.emit("removeListener",g,T||y)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(g){var y,v,C;if((v=this._events)===void 0)return this;if(v.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):v[g]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete v[g]),this;if(arguments.length===0){var b,w=Object.keys(v);for(C=0;C<w.length;++C)(b=w[C])!=="removeListener"&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(y=v[g])=="function")this.removeListener(g,y);else if(y!==void 0)for(C=y.length-1;C>=0;C--)this.removeListener(g,y[C]);return this},n.prototype.listeners=function(g){return o(this,g,!0)},n.prototype.rawListeners=function(g){return o(this,g,!1)},n.listenerCount=function(g,y){return typeof g.listenerCount=="function"?g.listenerCount(y):r.call(g,y)},n.prototype.listenerCount=r,n.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7292:(m,t,s)=>{var i=s(8520),e=s(5971),n=s(6617)("engine.io-client:socket"),a=s(6938),h=s(3401),u=s(4258),f=s(9140);function p(l,o){if(!(this instanceof p))return new p(l,o);o=o||{},l&&typeof l=="object"&&(o=l,l=null),l?(l=u(l),o.hostname=l.host,o.secure=l.protocol==="https"||l.protocol==="wss",o.port=l.port,l.query&&(o.query=l.query)):o.host&&(o.hostname=u(o.host).host),this.secure=o.secure!=null?o.secure:I.location&&location.protocol==="https:",o.hostname&&!o.port&&(o.port=this.secure?"443":"80"),this.agent=o.agent||!1,this.hostname=o.hostname||(I.location?location.hostname:"localhost"),this.port=o.port||(I.location&&location.port?location.port:this.secure?443:80),this.query=o.query||{},typeof this.query=="string"&&(this.query=f.decode(this.query)),this.upgrade=o.upgrade!==!1,this.path=(o.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!o.forceJSONP,this.jsonp=o.jsonp!==!1,this.forceBase64=!!o.forceBase64,this.enablesXDR=!!o.enablesXDR,this.timestampParam=o.timestampParam||"t",this.timestampRequests=o.timestampRequests,this.transports=o.transports||["polling","websocket"],this.transportOptions=o.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=o.policyPort||843,this.rememberUpgrade=o.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=o.onlyBinaryUpgrades,this.perMessageDeflate=o.perMessageDeflate!==!1&&(o.perMessageDeflate||{}),this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=o.pfx||null,this.key=o.key||null,this.passphrase=o.passphrase||null,this.cert=o.cert||null,this.ca=o.ca||null,this.ciphers=o.ciphers||null,this.rejectUnauthorized=o.rejectUnauthorized===void 0||o.rejectUnauthorized,this.forceNode=!!o.forceNode;var r=typeof I=="object"&&I;r.global===r&&(o.extraHeaders&&Object.keys(o.extraHeaders).length>0&&(this.extraHeaders=o.extraHeaders),o.localAddress&&(this.localAddress=o.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}m.exports=p,p.priorWebsocketSuccess=!1,e(p.prototype),p.protocol=h.protocol,p.Socket=p,p.Transport=s(2672),p.transports=s(8520),p.parser=s(3401),p.prototype.createTransport=function(l){n('creating transport "%s"',l);var o=function(c){var _={};for(var g in c)c.hasOwnProperty(g)&&(_[g]=c[g]);return _}(this.query);o.EIO=h.protocol,o.transport=l;var r=this.transportOptions[l]||{};return this.id&&(o.sid=this.id),new i[l]({query:o,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0})},p.prototype.open=function(){var l;if(this.rememberUpgrade&&p.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)l="websocket";else{if(this.transports.length===0){var o=this;return void setTimeout(function(){o.emit("error","No transports available")},0)}l=this.transports[0]}this.readyState="opening";try{l=this.createTransport(l)}catch{return this.transports.shift(),void this.open()}l.open(),this.setTransport(l)},p.prototype.setTransport=function(l){n("setting transport %s",l.name);var o=this;this.transport&&(n("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=l,l.on("drain",function(){o.onDrain()}).on("packet",function(r){o.onPacket(r)}).on("error",function(r){o.onError(r)}).on("close",function(){o.onClose("transport close")})},p.prototype.probe=function(l){n('probing transport "%s"',l);var o=this.createTransport(l,{probe:1}),r=!1,c=this;function _(){if(c.onlyBinaryUpgrades){var T=!this.supportsBinary&&c.transport.supportsBinary;r=r||T}r||(n('probe transport "%s" opened',l),o.send([{type:"ping",data:"probe"}]),o.once("packet",function(k){if(!r)if(k.type==="pong"&&k.data==="probe"){if(n('probe transport "%s" pong',l),c.upgrading=!0,c.emit("upgrading",o),!o)return;p.priorWebsocketSuccess=o.name==="websocket",n('pausing current transport "%s"',c.transport.name),c.transport.pause(function(){r||c.readyState!=="closed"&&(n("changing transport and sending upgrade packet"),w(),c.setTransport(o),o.send([{type:"upgrade"}]),c.emit("upgrade",o),o=null,c.upgrading=!1,c.flush())})}else{n('probe transport "%s" failed',l);var S=new Error("probe error");S.transport=o.name,c.emit("upgradeError",S)}}))}function g(){r||(r=!0,w(),o.close(),o=null)}function y(T){var k=new Error("probe error: "+T);k.transport=o.name,g(),n('probe transport "%s" failed because of error: %s',l,T),c.emit("upgradeError",k)}function v(){y("transport closed")}function C(){y("socket closed")}function b(T){o&&T.name!==o.name&&(n('"%s" works - aborting "%s"',T.name,o.name),g())}function w(){o.removeListener("open",_),o.removeListener("error",y),o.removeListener("close",v),c.removeListener("close",C),c.removeListener("upgrading",b)}p.priorWebsocketSuccess=!1,o.once("open",_),o.once("error",y),o.once("close",v),this.once("close",C),this.once("upgrading",b),o.open()},p.prototype.onOpen=function(){if(n("socket open"),this.readyState="open",p.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){n("starting upgrade probes");for(var l=0,o=this.upgrades.length;l<o;l++)this.probe(this.upgrades[l])}},p.prototype.onPacket=function(l){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(n('socket receive: type "%s", data "%s"',l.type,l.data),this.emit("packet",l),this.emit("heartbeat"),l.type){case"open":this.onHandshake(JSON.parse(l.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var o=new Error("server error");o.code=l.data,this.onError(o);break;case"message":this.emit("data",l.data),this.emit("message",l.data)}else n('packet received with socket readyState "%s"',this.readyState)},p.prototype.onHandshake=function(l){this.emit("handshake",l),this.id=l.sid,this.transport.query.sid=l.sid,this.upgrades=this.filterUpgrades(l.upgrades),this.pingInterval=l.pingInterval,this.pingTimeout=l.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},p.prototype.onHeartbeat=function(l){clearTimeout(this.pingTimeoutTimer);var o=this;o.pingTimeoutTimer=setTimeout(function(){o.readyState!=="closed"&&o.onClose("ping timeout")},l||o.pingInterval+o.pingTimeout)},p.prototype.setPing=function(){var l=this;clearTimeout(l.pingIntervalTimer),l.pingIntervalTimer=setTimeout(function(){n("writing ping packet - expecting pong within %sms",l.pingTimeout),l.ping(),l.onHeartbeat(l.pingTimeout)},l.pingInterval)},p.prototype.ping=function(){var l=this;this.sendPacket("ping",function(){l.emit("ping")})},p.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()},p.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(n("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},p.prototype.write=p.prototype.send=function(l,o,r){return this.sendPacket("message",l,o,r),this},p.prototype.sendPacket=function(l,o,r,c){if(typeof o=="function"&&(c=o,o=void 0),typeof r=="function"&&(c=r,r=null),this.readyState!=="closing"&&this.readyState!=="closed"){(r=r||{}).compress=r.compress!==!1;var _={type:l,data:o,options:r};this.emit("packetCreate",_),this.writeBuffer.push(_),c&&this.once("flush",c),this.flush()}},p.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var l=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?c():o()}):this.upgrading?c():o()}function o(){l.onClose("forced close"),n("socket closing - telling transport to close"),l.transport.close()}function r(){l.removeListener("upgrade",r),l.removeListener("upgradeError",r),o()}function c(){l.once("upgrade",r),l.once("upgradeError",r)}return this},p.prototype.onError=function(l){n("socket error %j",l),p.priorWebsocketSuccess=!1,this.emit("error",l),this.onClose("transport error",l)},p.prototype.onClose=function(l,o){this.readyState!=="opening"&&this.readyState!=="open"&&this.readyState!=="closing"||(n('socket close with reason: "%s"',l),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",l,o),this.writeBuffer=[],this.prevBufferLen=0)},p.prototype.filterUpgrades=function(l){for(var o=[],r=0,c=l.length;r<c;r++)~a(this.transports,l[r])&&o.push(l[r]);return o}},7698:(m,t,s)=>{var i=s(9331),e=s(5074),n=s(9725),a=s(9368)("socket.io-client");m.exports=t=u;var h=t.managers={};function u(f,p){typeof f=="object"&&(p=f,f=void 0),p=p||{};var l,o=i(f),r=o.source,c=o.id,_=o.path,g=h[c]&&_ in h[c].nsps;return p.forceNew||p["force new connection"]||p.multiplex===!1||g?(a("ignoring socket cache for %s",r),l=n(r,p)):(h[c]||(a("new io instance for %s",r),h[c]=n(r,p)),l=h[c]),o.query&&!p.query&&(p.query=o.query),l.socket(o.path,p)}t.protocol=e.protocol,t.connect=u,t.Manager=s(9725),t.Socket=s(7773)},7773:(m,t,s)=>{var i=s(5074),e=s(5971),n=s(8104),a=s(4745),h=s(8144),u=s(9368)("socket.io-client:socket"),f=s(9140);m.exports=o;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},l=e.prototype.emit;function o(r,c,_){this.io=r,this.nsp=c,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,_&&_.query&&(this.query=_.query),this.io.autoConnect&&this.open()}e(o.prototype),o.prototype.subEvents=function(){if(!this.subs){var r=this.io;this.subs=[a(r,"open",h(this,"onopen")),a(r,"packet",h(this,"onpacket")),a(r,"close",h(this,"onclose"))]}},o.prototype.open=o.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting")),this},o.prototype.send=function(){var r=n(arguments);return r.unshift("message"),this.emit.apply(this,r),this},o.prototype.emit=function(r){if(p.hasOwnProperty(r))return l.apply(this,arguments),this;var c=n(arguments),_={type:i.EVENT,data:c,options:{}};return _.options.compress=!this.flags||this.flags.compress!==!1,typeof c[c.length-1]=="function"&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=c.pop(),_.id=this.ids++),this.connected?this.packet(_):this.sendBuffer.push(_),delete this.flags,this},o.prototype.packet=function(r){r.nsp=this.nsp,this.io.packet(r)},o.prototype.onopen=function(){if(u("transport is open - connecting"),this.nsp!=="/")if(this.query){var r=typeof this.query=="object"?f.encode(this.query):this.query;u("sending connect packet with query %s",r),this.packet({type:i.CONNECT,query:r})}else this.packet({type:i.CONNECT})},o.prototype.onclose=function(r){u("close (%s)",r),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",r)},o.prototype.onpacket=function(r){if(r.nsp===this.nsp)switch(r.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(r);break;case i.ACK:case i.BINARY_ACK:this.onack(r);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",r.data)}},o.prototype.onevent=function(r){var c=r.data||[];u("emitting event %j",c),r.id!=null&&(u("attaching ack callback to event"),c.push(this.ack(r.id))),this.connected?l.apply(this,c):this.receiveBuffer.push(c)},o.prototype.ack=function(r){var c=this,_=!1;return function(){if(!_){_=!0;var g=n(arguments);u("sending ack %j",g),c.packet({type:i.ACK,id:r,data:g})}}},o.prototype.onack=function(r){var c=this.acks[r.id];typeof c=="function"?(u("calling ack %s with %j",r.id,r.data),c.apply(this,r.data),delete this.acks[r.id]):u("bad ack %s",r.id)},o.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},o.prototype.emitBuffered=function(){var r;for(r=0;r<this.receiveBuffer.length;r++)l.apply(this,this.receiveBuffer[r]);for(this.receiveBuffer=[],r=0;r<this.sendBuffer.length;r++)this.packet(this.sendBuffer[r]);this.sendBuffer=[]},o.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},o.prototype.destroy=function(){if(this.subs){for(var r=0;r<this.subs.length;r++)this.subs[r].destroy();this.subs=null}this.io.destroy(this)},o.prototype.close=o.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},o.prototype.compress=function(r){return this.flags=this.flags||{},this.flags.compress=r,this}},7833:(m,t,s)=>{t.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+m.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let a=0,h=0;e[0].replace(/%[a-zA-Z%]/g,u=>{u!=="%%"&&(a++,u==="%c"&&(h=a))}),e.splice(h,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch{}},t.load=function(){let e;try{e=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=yt.DEBUG),e},t.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch{}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),m.exports=s(736)(t);const{formatters:i}=m.exports;i.j=function(e){try{return JSON.stringify(e)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}},8104:m=>{m.exports=function(t,s){for(var i=[],e=(s=s||0)||0;e<t.length;e++)i[e-s]=t[e];return i}},8144:m=>{var t=[].slice;m.exports=function(s,i){if(typeof i=="string"&&(i=s[i]),typeof i!="function")throw new Error("bind() requires a function");var e=t.call(arguments,2);return function(){return i.apply(s,e.concat(t.call(arguments)))}}},8247:m=>{m.exports=function(t){return I.Buffer&&I.Buffer.isBuffer(t)||I.ArrayBuffer&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))}},8383:m=>{try{m.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{m.exports=!1}},8520:(m,t,s)=>{var i=s(3051),e=s(9332),n=s(2252),a=s(6855);t.polling=function(h){var u=!1,f=!1,p=h.jsonp!==!1;if(I.location){var l=location.protocol==="https:",o=location.port;o||(o=l?443:80),u=h.hostname!==location.hostname||o!==h.port,f=h.secure!==l}if(h.xdomain=u,h.xscheme=f,"open"in new i(h)&&!h.forceJSONP)return new e(h);if(!p)throw new Error("JSONP disabled");return new n(h)},t.websocket=a},8758:m=>{var t,s,i,e=String.fromCharCode;function n(l){for(var o,r,c=[],_=0,g=l.length;_<g;)(o=l.charCodeAt(_++))>=55296&&o<=56319&&_<g?(64512&(r=l.charCodeAt(_++)))==56320?c.push(((1023&o)<<10)+(1023&r)+65536):(c.push(o),_--):c.push(o);return c}function a(l,o){if(l>=55296&&l<=57343){if(o)throw Error("Lone surrogate U+"+l.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function h(l,o){return e(l>>o&63|128)}function u(l,o){if(!(4294967168&l))return e(l);var r="";return 4294965248&l?4294901760&l?4292870144&l||(r=e(l>>18&7|240),r+=h(l,12),r+=h(l,6)):(a(l,o)||(l=65533),r=e(l>>12&15|224),r+=h(l,6)):r=e(l>>6&31|192),r+e(63&l|128)}function f(){if(i>=s)throw Error("Invalid byte index");var l=255&t[i];if(i++,(192&l)==128)return 63&l;throw Error("Invalid continuation byte")}function p(l){var o,r;if(i>s)throw Error("Invalid byte index");if(i==s)return!1;if(o=255&t[i],i++,!(128&o))return o;if((224&o)==192){if((r=(31&o)<<6|f())>=128)return r;throw Error("Invalid continuation byte")}if((240&o)==224){if((r=(15&o)<<12|f()<<6|f())>=2048)return a(r,l)?r:65533;throw Error("Invalid continuation byte")}if((248&o)==240&&(r=(7&o)<<18|f()<<12|f()<<6|f())>=65536&&r<=1114111)return r;throw Error("Invalid UTF-8 detected")}m.exports={version:"2.1.2",encode:function(l,o){for(var r=(o=o||{}).strict!==!1,c=n(l),_=c.length,g=-1,y="";++g<_;)y+=u(c[g],r);return y},decode:function(l,o){var r=(o=o||{}).strict!==!1;t=n(l),s=t.length,i=0;for(var c,_=[];(c=p(r))!==!1;)_.push(c);return function(g){for(var y,v=g.length,C=-1,b="";++C<v;)(y=g[C])>65535&&(b+=e((y-=65536)>>>10&1023|55296),y=56320|1023&y),b+=e(y);return b}(_)}}},8839:(m,t,s)=>{var i=s(4634),e=Object.prototype.toString,n=typeof Blob=="function"||typeof Blob<"u"&&e.call(Blob)==="[object BlobConstructor]",a=typeof File=="function"||typeof File<"u"&&e.call(File)==="[object FileConstructor]";m.exports=function h(u){if(!u||typeof u!="object")return!1;if(i(u)){for(var f=0,p=u.length;f<p;f++)if(h(u[f]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(u)||typeof ArrayBuffer=="function"&&u instanceof ArrayBuffer||n&&u instanceof Blob||a&&u instanceof File)return!0;if(u.toJSON&&typeof u.toJSON=="function"&&arguments.length===1)return h(u.toJSON(),!0);for(var l in u)if(Object.prototype.hasOwnProperty.call(u,l)&&h(u[l]))return!0;return!1}},9110:(m,t,s)=>{function i(n){var a;function h(){if(h.enabled){var u=h,f=+new Date,p=f-(a||f);u.diff=p,u.prev=a,u.curr=f,a=f;for(var l=new Array(arguments.length),o=0;o<l.length;o++)l[o]=arguments[o];l[0]=t.coerce(l[0]),typeof l[0]!="string"&&l.unshift("%O");var r=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,function(c,_){if(c==="%%")return c;r++;var g=t.formatters[_];if(typeof g=="function"){var y=l[r];c=g.call(u,y),l.splice(r,1),r--}return c}),t.formatArgs.call(u,l),(h.log||t.log||console.log.bind(console)).apply(u,l)}}return h.namespace=n,h.enabled=t.enabled(n),h.useColors=t.useColors(),h.color=function(u){var f,p=0;for(f in u)p=(p<<5)-p+u.charCodeAt(f),p|=0;return t.colors[Math.abs(p)%t.colors.length]}(n),h.destroy=e,typeof t.init=="function"&&t.init(h),t.instances.push(h),h}function e(){var n=t.instances.indexOf(this);return n!==-1&&(t.instances.splice(n,1),!0)}(t=m.exports=i.debug=i.default=i).coerce=function(n){return n instanceof Error?n.stack||n.message:n},t.disable=function(){t.enable("")},t.enable=function(n){var a;t.save(n),t.names=[],t.skips=[];var h=(typeof n=="string"?n:"").split(/[\s,]+/),u=h.length;for(a=0;a<u;a++)h[a]&&((n=h[a].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+n.substr(1)+"$")):t.names.push(new RegExp("^"+n+"$")));for(a=0;a<t.instances.length;a++){var f=t.instances[a];f.enabled=t.enabled(f.namespace)}},t.enabled=function(n){if(n[n.length-1]==="*")return!0;var a,h;for(a=0,h=t.skips.length;a<h;a++)if(t.skips[a].test(n))return!1;for(a=0,h=t.names.length;a<h;a++)if(t.names[a].test(n))return!0;return!1},t.humanize=s(3097),t.instances=[],t.names=[],t.skips=[],t.formatters={}},9140:(m,t)=>{t.encode=function(s){var i="";for(var e in s)s.hasOwnProperty(e)&&(i.length&&(i+="&"),i+=encodeURIComponent(e)+"="+encodeURIComponent(s[e]));return i},t.decode=function(s){for(var i={},e=s.split("&"),n=0,a=e.length;n<a;n++){var h=e[n].split("=");i[decodeURIComponent(h[0])]=decodeURIComponent(h[1])}return i}},9331:(m,t,s)=>{var i=s(4258),e=s(9368)("socket.io-client:url");m.exports=function(n,a){var h=n;a=a||I.location,n==null&&(n=a.protocol+"//"+a.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n=n.charAt(1)==="/"?a.protocol+n:a.host+n),/^(https?|wss?):\/\//.test(n)||(e("protocol-less url %s",n),n=a!==void 0?a.protocol+"//"+n:"https://"+n),e("parse %s",n),h=i(n)),h.port||(/^(http|ws)$/.test(h.protocol)?h.port="80":/^(http|ws)s$/.test(h.protocol)&&(h.port="443")),h.path=h.path||"/";var u=h.host.indexOf(":")!==-1?"["+h.host+"]":h.host;return h.id=h.protocol+"://"+u+":"+h.port,h.href=h.protocol+"://"+u+(a&&a.port===h.port?"":":"+h.port),h}},9332:(m,t,s)=>{var i=s(3051),e=s(5911),n=s(5971),a=s(2370),h=s(6617)("engine.io-client:polling-xhr");function u(){}function f(o){if(e.call(this,o),this.requestTimeout=o.requestTimeout,this.extraHeaders=o.extraHeaders,I.location){var r=location.protocol==="https:",c=location.port;c||(c=r?443:80),this.xd=o.hostname!==I.location.hostname||c!==o.port,this.xs=o.secure!==r}}function p(o){this.method=o.method||"GET",this.uri=o.uri,this.xd=!!o.xd,this.xs=!!o.xs,this.async=o.async!==!1,this.data=o.data!==void 0?o.data:null,this.agent=o.agent,this.isBinary=o.isBinary,this.supportsBinary=o.supportsBinary,this.enablesXDR=o.enablesXDR,this.requestTimeout=o.requestTimeout,this.pfx=o.pfx,this.key=o.key,this.passphrase=o.passphrase,this.cert=o.cert,this.ca=o.ca,this.ciphers=o.ciphers,this.rejectUnauthorized=o.rejectUnauthorized,this.extraHeaders=o.extraHeaders,this.create()}function l(){for(var o in p.requests)p.requests.hasOwnProperty(o)&&p.requests[o].abort()}m.exports=f,m.exports.Request=p,a(f,e),f.prototype.supportsBinary=!0,f.prototype.request=function(o){return(o=o||{}).uri=this.uri(),o.xd=this.xd,o.xs=this.xs,o.agent=this.agent||!1,o.supportsBinary=this.supportsBinary,o.enablesXDR=this.enablesXDR,o.pfx=this.pfx,o.key=this.key,o.passphrase=this.passphrase,o.cert=this.cert,o.ca=this.ca,o.ciphers=this.ciphers,o.rejectUnauthorized=this.rejectUnauthorized,o.requestTimeout=this.requestTimeout,o.extraHeaders=this.extraHeaders,new p(o)},f.prototype.doWrite=function(o,r){var c=typeof o!="string"&&o!==void 0,_=this.request({method:"POST",data:o,isBinary:c}),g=this;_.on("success",r),_.on("error",function(y){g.onError("xhr post error",y)}),this.sendXhr=_},f.prototype.doPoll=function(){h("xhr poll");var o=this.request(),r=this;o.on("data",function(c){r.onData(c)}),o.on("error",function(c){r.onError("xhr poll error",c)}),this.pollXhr=o},n(p.prototype),p.prototype.create=function(){var o={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};o.pfx=this.pfx,o.key=this.key,o.passphrase=this.passphrase,o.cert=this.cert,o.ca=this.ca,o.ciphers=this.ciphers,o.rejectUnauthorized=this.rejectUnauthorized;var r=this.xhr=new i(o),c=this;try{h("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var _ in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(_)&&r.setRequestHeader(_,this.extraHeaders[_])}catch{}if(this.method==="POST")try{this.isBinary?r.setRequestHeader("Content-type","application/octet-stream"):r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in r&&(r.withCredentials=!0),this.requestTimeout&&(r.timeout=this.requestTimeout),this.hasXDR()?(r.onload=function(){c.onLoad()},r.onerror=function(){c.onError(r.responseText)}):r.onreadystatechange=function(){if(r.readyState===2)try{var g=r.getResponseHeader("Content-Type");c.supportsBinary&&g==="application/octet-stream"&&(r.responseType="arraybuffer")}catch{}r.readyState===4&&(r.status===200||r.status===1223?c.onLoad():setTimeout(function(){c.onError(r.status)},0))},h("xhr data %s",this.data),r.send(this.data)}catch(g){return void setTimeout(function(){c.onError(g)},0)}I.document&&(this.index=p.requestsCount++,p.requests[this.index]=this)},p.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},p.prototype.onData=function(o){this.emit("data",o),this.onSuccess()},p.prototype.onError=function(o){this.emit("error",o),this.cleanup(!0)},p.prototype.cleanup=function(o){if(this.xhr!==void 0&&this.xhr!==null){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,o)try{this.xhr.abort()}catch{}I.document&&delete p.requests[this.index],this.xhr=null}},p.prototype.onLoad=function(){var o;try{var r;try{r=this.xhr.getResponseHeader("Content-Type")}catch{}o=r==="application/octet-stream"&&this.xhr.response||this.xhr.responseText}catch(c){this.onError(c)}o!=null&&this.onData(o)},p.prototype.hasXDR=function(){return I.XDomainRequest!==void 0&&!this.xs&&this.enablesXDR},p.prototype.abort=function(){this.cleanup()},p.requestsCount=0,p.requests={},I.document&&(I.attachEvent?I.attachEvent("onunload",l):I.addEventListener&&I.addEventListener("beforeunload",l,!1))},9368:(m,t,s)=>{function i(){var e;try{e=t.storage.debug}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=yt.DEBUG),e}(t=m.exports=s(9939)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var a="color: "+this.color;e.splice(1,0,a,"color: inherit");var h=0,u=0;e[0].replace(/%[a-zA-Z%]/g,function(f){f!=="%%"&&(h++,f==="%c"&&(u=h))}),e.splice(u,0,a)}},t.save=function(e){try{e==null?t.storage.removeItem("debug"):t.storage.debug=e}catch{}},t.load=i,t.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}},t.enable(i())},9725:(m,t,s)=>{var i=s(3357),e=s(7773),n=s(5971),a=s(5074),h=s(4745),u=s(8144),f=s(9368)("socket.io-client:manager"),p=s(6938),l=s(3059),o=Object.prototype.hasOwnProperty;function r(c,_){if(!(this instanceof r))return new r(c,_);c&&typeof c=="object"&&(_=c,c=void 0),(_=_||{}).path=_.path||"/socket.io",this.nsps={},this.subs=[],this.opts=_,this.reconnection(_.reconnection!==!1),this.reconnectionAttempts(_.reconnectionAttempts||1/0),this.reconnectionDelay(_.reconnectionDelay||1e3),this.reconnectionDelayMax(_.reconnectionDelayMax||5e3),this.randomizationFactor(_.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(_.timeout==null?2e4:_.timeout),this.readyState="closed",this.uri=c,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var g=_.parser||a;this.encoder=new g.Encoder,this.decoder=new g.Decoder,this.autoConnect=_.autoConnect!==!1,this.autoConnect&&this.open()}m.exports=r,r.prototype.emitAll=function(){for(var c in this.emit.apply(this,arguments),this.nsps)o.call(this.nsps,c)&&this.nsps[c].emit.apply(this.nsps[c],arguments)},r.prototype.updateSocketIds=function(){for(var c in this.nsps)o.call(this.nsps,c)&&(this.nsps[c].id=this.generateId(c))},r.prototype.generateId=function(c){return(c==="/"?"":c+"#")+this.engine.id},n(r.prototype),r.prototype.reconnection=function(c){return arguments.length?(this._reconnection=!!c,this):this._reconnection},r.prototype.reconnectionAttempts=function(c){return arguments.length?(this._reconnectionAttempts=c,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(c){return arguments.length?(this._reconnectionDelay=c,this.backoff&&this.backoff.setMin(c),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(c){return arguments.length?(this._randomizationFactor=c,this.backoff&&this.backoff.setJitter(c),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(c){return arguments.length?(this._reconnectionDelayMax=c,this.backoff&&this.backoff.setMax(c),this):this._reconnectionDelayMax},r.prototype.timeout=function(c){return arguments.length?(this._timeout=c,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()},r.prototype.open=r.prototype.connect=function(c,_){if(f("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=i(this.uri,this.opts);var g=this.engine,y=this;this.readyState="opening",this.skipReconnect=!1;var v=h(g,"open",function(){y.onopen(),c&&c()}),C=h(g,"error",function(T){if(f("connect_error"),y.cleanup(),y.readyState="closed",y.emitAll("connect_error",T),c){var k=new Error("Connection error");k.data=T,c(k)}else y.maybeReconnectOnOpen()});if(this._timeout!==!1){var b=this._timeout;f("connect attempt will timeout after %d",b);var w=setTimeout(function(){f("connect attempt timed out after %d",b),v.destroy(),g.close(),g.emit("error","timeout"),y.emitAll("connect_timeout",b)},b);this.subs.push({destroy:function(){clearTimeout(w)}})}return this.subs.push(v),this.subs.push(C),this},r.prototype.onopen=function(){f("open"),this.cleanup(),this.readyState="open",this.emit("open");var c=this.engine;this.subs.push(h(c,"data",u(this,"ondata"))),this.subs.push(h(c,"ping",u(this,"onping"))),this.subs.push(h(c,"pong",u(this,"onpong"))),this.subs.push(h(c,"error",u(this,"onerror"))),this.subs.push(h(c,"close",u(this,"onclose"))),this.subs.push(h(this.decoder,"decoded",u(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(c){this.decoder.add(c)},r.prototype.ondecoded=function(c){this.emit("packet",c)},r.prototype.onerror=function(c){f("error",c),this.emitAll("error",c)},r.prototype.socket=function(c,_){var g=this.nsps[c];if(!g){g=new e(this,c,_),this.nsps[c]=g;var y=this;g.on("connecting",v),g.on("connect",function(){g.id=y.generateId(c)}),this.autoConnect&&v()}function v(){~p(y.connecting,g)||y.connecting.push(g)}return g},r.prototype.destroy=function(c){var _=p(this.connecting,c);~_&&this.connecting.splice(_,1),this.connecting.length||this.close()},r.prototype.packet=function(c){f("writing packet %j",c);var _=this;c.query&&c.type===0&&(c.nsp+="?"+c.query),_.encoding?_.packetBuffer.push(c):(_.encoding=!0,this.encoder.encode(c,function(g){for(var y=0;y<g.length;y++)_.engine.write(g[y],c.options);_.encoding=!1,_.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var c=this.packetBuffer.shift();this.packet(c)}},r.prototype.cleanup=function(){f("cleanup");for(var c=this.subs.length,_=0;_<c;_++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){f("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(c){f("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",c),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var c=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var _=this.backoff.duration();f("will wait %dms before reconnect attempt",_),this.reconnecting=!0;var g=setTimeout(function(){c.skipReconnect||(f("attempting reconnect"),c.emitAll("reconnect_attempt",c.backoff.attempts),c.emitAll("reconnecting",c.backoff.attempts),c.skipReconnect||c.open(function(y){y?(f("reconnect attempt error"),c.reconnecting=!1,c.reconnect(),c.emitAll("reconnect_error",y.data)):(f("reconnect success"),c.onreconnect())}))},_);this.subs.push({destroy:function(){clearTimeout(g)}})}},r.prototype.onreconnect=function(){var c=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",c)}},9939:(m,t,s)=>{var i;function e(n){function a(){if(a.enabled){var h=a,u=+new Date,f=u-(i||u);h.diff=f,h.prev=i,h.curr=u,i=u;for(var p=new Array(arguments.length),l=0;l<p.length;l++)p[l]=arguments[l];p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var o=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(r,c){if(r==="%%")return r;o++;var _=t.formatters[c];if(typeof _=="function"){var g=p[o];r=_.call(h,g),p.splice(o,1),o--}return r}),t.formatArgs.call(h,p),(a.log||t.log||console.log.bind(console)).apply(h,p)}}return a.namespace=n,a.enabled=t.enabled(n),a.useColors=t.useColors(),a.color=function(h){var u,f=0;for(u in h)f=(f<<5)-f+h.charCodeAt(u),f|=0;return t.colors[Math.abs(f)%t.colors.length]}(n),typeof t.init=="function"&&t.init(a),a}(t=m.exports=e.debug=e.default=e).coerce=function(n){return n instanceof Error?n.stack||n.message:n},t.disable=function(){t.enable("")},t.enable=function(n){t.save(n),t.names=[],t.skips=[];for(var a=(typeof n=="string"?n:"").split(/[\s,]+/),h=a.length,u=0;u<h;u++)a[u]&&((n=a[u].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+n.substr(1)+"$")):t.names.push(new RegExp("^"+n+"$")))},t.enabled=function(n){var a,h;for(a=0,h=t.skips.length;a<h;a++)if(t.skips[a].test(n))return!1;for(a=0,h=t.names.length;a<h;a++)if(t.names[a].test(n))return!0;return!1},t.humanize=s(2902),t.names=[],t.skips=[],t.formatters={}}},Ut={};function j(m){var t=Ut[m];if(t!==void 0)return t.exports;var s=Ut[m]={exports:{}};return Zt[m](s,s.exports,j),s.exports}j.n=m=>{var t=m&&m.__esModule?()=>m.default:()=>m;return j.d(t,{a:t}),t},j.d=(m,t)=>{for(var s in t)j.o(t,s)&&!j.o(m,s)&&Object.defineProperty(m,s,{enumerable:!0,get:t[s]})},j.o=(m,t)=>Object.prototype.hasOwnProperty.call(m,t);var Ft={};j.d(Ft,{Bx:()=>K,F4:()=>Xt,Pr:()=>ne});var Qt=j(7007),te=j.n(Qt),ee=j(7698),se=j.n(ee),oe=j(7833),V=j.n(oe);const Xt=Object.freeze({createAccessToken:"/auth/v1/token",updateAccessToken:"/auth/v1/token",deleteToken:"/auth/v1/token/revoke",createSessionUrl:"/open/v1/sessions/auth",createChatEventSubscription:"/open/v1/sessions/events/subscribe/chat",createDonationEventSubscription:"/open/v1/sessions/events/subscribe/donation",getUser:"/open/v1/users/me",postChat:"/open/v1/chats/send"}),K=Object.freeze({SYSTEM:"SYSTEM",CHAT:"CHAT",DONATION:"DONATION"});var $,W,nt,rt,U,Q,X,et,st,G,tt,ot,pt,ft,z,kt;class ne extends te(){constructor({api_url:s,code:i,state:e,access_token:n,refresh_token:a,token_type:h,expires_in:u,scope:f,paths:p={}}){super();R(this,$);R(this,W);R(this,nt);R(this,rt);R(this,U);R(this,Q);R(this,X);R(this,et);R(this,st);R(this,G);R(this,tt);R(this,ot);R(this,pt);R(this,ft);R(this,z);R(this,kt);gt(this,"on",super.on);gt(this,"off",super.off);gt(this,"emit",super.emit);P(this,$,s),P(this,W,{...Xt,...p}),P(this,nt,i),P(this,rt,e),P(this,U,n),P(this,Q,a),P(this,X,h),P(this,et,parseInt(u)),P(this,st,f),P(this,z,V()("chzzk-proxy")),P(this,kt,V()("chzzk-proxy:error")),A(this,z).call(this,`constructor(${s}, ${i}, ${e}, ${p}, ${n}, ${a}, ${h}, ${u}, ${f})`)}get connected(){return!!A(this,G)&&A(this,G).connected}get api_url(){return A(this,$)}get paths(){return A(this,W)}get code(){return A(this,nt)}get state(){return A(this,rt)}get access_token(){return A(this,U)}get refresh_token(){return A(this,Q)}get token_type(){return A(this,X)}get expires_in(){return A(this,et)}get scope(){return A(this,st)}get session_key(){return A(this,tt)}get channel_id(){return A(this,ot)}get channel_name(){return A(this,pt)}get nickname(){return A(this,ft)}set message(s){if(this.connected)return this.postChat(s)}async connect(){if(this.connected)return this.connected;let s;A(this,U)||(s=await this.createAccessToken()),A(this,z).call(this,"access_token",A(this,U)),A(this,z).call(this,"refresh_token",A(this,Q)),A(this,z).call(this,"token_type",A(this,X)),A(this,z).call(this,"expires_in",A(this,et)),A(this,z).call(this,"scope",A(this,st)),await this.getUser(),s=await this.createSessionUrl();const i=s.url,e={reconnection:!1,"force new connection":!0,"connect timeout":3e3};return typeof window>"u"&&(e.transports=["websocket"]),A(this,z).call(this,"socket_option",e),P(this,G,se()(i,e)),A(this,G).on("connect",async()=>{A(this,z).call(this,"[SUCCESS] socket.io connection established")}),A(this,G).on(K.SYSTEM,async n=>{const{type:a,data:h}=JSON.parse(n),{sessionKey:u,eventType:f,channelId:p}=h;switch(a){case"connected":A(this,z).call(this,`[SUCCESS] connected sessionKey: ${u}`),P(this,tt,u),await this.createChatEventSubscription(),await this.createDonationEventSubscription();break;case"subscribed":A(this,z).call(this,`[SUCCESS] subscribed eventType: ${f}, channelId: ${p}`),P(this,ot,p);break;case"unsubscribed":A(this,z).call(this,`[SUCCESS] unsubscribed eventType: ${f}, channelId: ${p}`);break;case"revoked":A(this,z).call(this,`[SUCCESS] revoked eventType: ${f}, channelId: ${p}`)}this.emit(K.SYSTEM,{sessionKey:u,eventType:f,channelId:p})}),A(this,G).on(K.CHAT,n=>{const a=JSON.parse(n);A(this,z).call(this,K.CHAT,a),this.emit(K.CHAT,a)}),A(this,G).on(K.DONATION,n=>{const a=JSON.parse(n);A(this,z).call(this,K.CHAT,a),this.emit(K.DONATION,a)}),this.connected}async destroy(){this.connected&&(A(this,G).close(),P(this,G,null),P(this,tt,null),P(this,ot,null),await this.deleteToken())}async updateToken(){this.connected&&await this.updateAccessToken()}async fetchRequest(s,i){const e=V()("chzzk-proxy:fetchRequest");e("api_url",s),e("options",i);const n=i.method||"GET",a=new URL(s);for(const l in i.param)i.param[l]&&a.searchParams.append(l,`${i.param[l]}`);e("url",a);const h=new Headers;for(const l in i.headers)i.headers[l]&&h.append(l,`${i.headers[l]}`);e("headers",h);const u=new Request(a,{method:n,headers:h,body:JSON.stringify(i.body)});e("request",u);const f=await fetch(u);e("response",f);const p=await f.json();return e("result",p),p.content}async createAccessToken(){const s=V()("chzzk-proxy:createAccessToken"),i=await this.fetchRequest(A(this,$),{method:"POST",headers:{"Content-Type":"application/json",path:A(this,W).createAccessToken},body:{grantType:"authorization_code",code:A(this,nt),state:A(this,rt)}});return s("result",i),P(this,U,i.accessToken),P(this,Q,i.refreshToken),P(this,X,i.tokenType),P(this,et,i.expiresIn),P(this,st,i.scope),i}async updateAccessToken(){const s=V()("chzzk-proxy:updateAccessToken"),i=await this.fetchRequest(A(this,$),{method:"POST",headers:{"Content-Type":"application/json",path:A(this,W).updateAccessToken},body:{grantType:"refresh_token",refreshToken:A(this,Q)}});return s("result",i),i}async deleteToken(){const s=V()("chzzk-proxy:deleteToken"),i=await this.fetchRequest(A(this,$),{method:"POST",headers:{Authorization:`${A(this,X)} ${A(this,U)}`,"Content-Type":"application/json",path:A(this,W).deleteToken},body:{token:A(this,U)}});return s("result",i),i}async createSessionUrl(){const s=V()("chzzk-proxy:createSessionUrl"),i=await this.fetchRequest(A(this,$),{method:"GET",headers:{Authorization:`${A(this,X)} ${A(this,U)}`,"Content-Type":"application/json",path:A(this,W).createSessionUrl}});return s("result",i),i}async createChatEventSubscription(){const s=V()("chzzk-proxy:createChatEventSubscription"),i=await this.fetchRequest(A(this,$),{method:"POST",param:{sessionKey:A(this,tt)},headers:{Authorization:`${A(this,X)} ${A(this,U)}`,"Content-Type":"application/json",path:A(this,W).createChatEventSubscription}});return s("result",i),i}async createDonationEventSubscription(){const s=V()("chzzk-proxy:createDonationEventSubscription"),i=await this.fetchRequest(A(this,$),{method:"POST",param:{sessionKey:A(this,tt)},headers:{Authorization:`${A(this,X)} ${A(this,U)}`,"Content-Type":"application/json",path:A(this,W).createDonationEventSubscription}});return s("result",i),i}async getUser(){const s=V()("chzzk-proxy:getUser"),i=await this.fetchRequest(A(this,$),{method:"GET",headers:{Authorization:`${A(this,X)} ${A(this,U)}`,"Content-Type":"application/json",path:A(this,W).getUser}});return s("result",i),P(this,ot,i.channelId),P(this,pt,i.channelName),P(this,ft,i.nickname),i}async postChat(s){const i=V()("chzzk-proxy:postChat"),e=await this.fetchRequest(A(this,$),{method:"POST",headers:{Authorization:`${A(this,X)} ${A(this,U)}`,"Content-Type":"application/json",path:A(this,W).postChat},body:{message:s}});return i("result",e),e}}$=new WeakMap,W=new WeakMap,nt=new WeakMap,rt=new WeakMap,U=new WeakMap,Q=new WeakMap,X=new WeakMap,et=new WeakMap,st=new WeakMap,G=new WeakMap,tt=new WeakMap,ot=new WeakMap,pt=new WeakMap,ft=new WeakMap,z=new WeakMap,kt=new WeakMap;const re=Ft.Pr,Ht=Ft.Bx;Ft.F4;class Gt extends H.Events.EventEmitter{}var Z=(m=>(m.CHAT="CHAT",m.DONATION="DONATION",m))(Z||{});class ie extends Gt{constructor(){super(),this.SCALE=4,this.WIDTH=480*this.SCALE,this.HEIGHT=270*this.SCALE,this.DEBUG=!1,this.bgm_map={},this._volume_master=parseFloat(localStorage.getItem("CommonStore:volume:master")||"0.4"),this._volume_bgm=parseFloat(localStorage.getItem("CommonStore:volume:bgm")||"0.15"),this._volume_effect=parseFloat(localStorage.getItem("CommonStore:volume:effect")||"0.4"),this.style={color:{grey_0:parseInt(localStorage.getItem("CommonStore:style:color:grey_0")||"0x000000"),grey_1:parseInt(localStorage.getItem("CommonStore:style:color:grey_1")||"0x111111"),grey_2:parseInt(localStorage.getItem("CommonStore:style:color:grey_2")||"0x222222"),grey_3:parseInt(localStorage.getItem("CommonStore:style:color:grey_3")||"0x333333"),grey_4:parseInt(localStorage.getItem("CommonStore:style:color:grey_4")||"0x444444"),grey_5:parseInt(localStorage.getItem("CommonStore:style:color:grey_5")||"0x555555"),grey_6:parseInt(localStorage.getItem("CommonStore:style:color:grey_6")||"0x666666"),grey_7:parseInt(localStorage.getItem("CommonStore:style:color:grey_7")||"0x777777"),grey_8:parseInt(localStorage.getItem("CommonStore:style:color:grey_8")||"0x888888"),grey_9:parseInt(localStorage.getItem("CommonStore:style:color:grey_9")||"0x999999"),grey_a:parseInt(localStorage.getItem("CommonStore:style:color:grey_a")||"0xaaaaaa"),grey_b:parseInt(localStorage.getItem("CommonStore:style:color:grey_b")||"0xbbbbbb"),grey_c:parseInt(localStorage.getItem("CommonStore:style:color:grey_c")||"0xcccccc"),grey_d:parseInt(localStorage.getItem("CommonStore:style:color:grey_d")||"0xdddddd"),grey_e:parseInt(localStorage.getItem("CommonStore:style:color:grey_e")||"0xeeeeee"),grey_f:parseInt(localStorage.getItem("CommonStore:style:color:grey_f")||"0xffffff"),green_a:parseInt(localStorage.getItem("CommonStore:style:color:green_a")||"0x00aa6c"),green_f:parseInt(localStorage.getItem("CommonStore:style:color:green_f")||"0x00ffa3"),purple_a:parseInt(localStorage.getItem("CommonStore:style:color:purple_a")||"0x6c00aa"),purple_f:parseInt(localStorage.getItem("CommonStore:style:color:purple_f")||"0xa300ff"),pink_a:parseInt(localStorage.getItem("CommonStore:style:color:pink_a")||"0xaa006c"),pink_f:parseInt(localStorage.getItem("CommonStore:style:color:pink_f")||"0xff00a3")},color_code:{grey_0:localStorage.getItem("CommonStore:style:color_code:grey_0")||"#000000",grey_1:localStorage.getItem("CommonStore:style:color_code:grey_1")||"#111111",grey_2:localStorage.getItem("CommonStore:style:color_code:grey_2")||"#222222",grey_3:localStorage.getItem("CommonStore:style:color_code:grey_3")||"#333333",grey_4:localStorage.getItem("CommonStore:style:color_code:grey_4")||"#444444",grey_5:localStorage.getItem("CommonStore:style:color_code:grey_5")||"#555555",grey_6:localStorage.getItem("CommonStore:style:color_code:grey_6")||"#666666",grey_7:localStorage.getItem("CommonStore:style:color_code:grey_7")||"#777777",grey_8:localStorage.getItem("CommonStore:style:color_code:grey_8")||"#888888",grey_9:localStorage.getItem("CommonStore:style:color_code:grey_9")||"#999999",grey_a:localStorage.getItem("CommonStore:style:color_code:grey_a")||"#aaaaaa",grey_b:localStorage.getItem("CommonStore:style:color_code:grey_b")||"#bbbbbb",grey_c:localStorage.getItem("CommonStore:style:color_code:grey_c")||"#cccccc",grey_d:localStorage.getItem("CommonStore:style:color_code:grey_d")||"#dddddd",grey_e:localStorage.getItem("CommonStore:style:color_code:grey_e")||"#eeeeee",grey_f:localStorage.getItem("CommonStore:style:color_code:grey_f")||"#ffffff",green_a:localStorage.getItem("CommonStore:style:color_code:grey_a")||"#00aa6c",green_f:localStorage.getItem("CommonStore:style:color_code:grey_f")||"#00ffa3",purple_a:localStorage.getItem("CommonStore:style:color_code:purple_a")||"#6c00aa",purple_f:localStorage.getItem("CommonStore:style:color_code:purple_f")||"#a300ff",pink_a:localStorage.getItem("CommonStore:style:color:pink_a")||"#aa006c",pink_f:localStorage.getItem("CommonStore:style:color:pink_f")||"#ff00a3"},font_style:{},font_padding:0};const t=16;this.style.font_style={fontFamily:"DungGeunMo",fontSize:t*this.SCALE,color:this.style.color_code.grey_f,align:"center"},this.style.font_padding=t*this.SCALE/10,this.url=this.DEBUG?"http://localhost:5173":"https://showskillsspark.github.io/svsv",this.proxy=new re({api_url:this.DEBUG?"https://pyrsgagtq5.execute-api.ap-northeast-2.amazonaws.com/default/chzzkProxyTest":"https://uohwcn08lb.execute-api.ap-northeast-2.amazonaws.com/default/chzzkProxy",code:sessionStorage.getItem("CommonStore:proxy:code")||new URL(window.location.href).searchParams.get("code")||void 0,state:sessionStorage.getItem("CommonStore:proxy:state")||new URL(window.location.href).searchParams.get("state")||void 0,access_token:sessionStorage.getItem("CommonStore:proxy:access_token")||void 0,refresh_token:sessionStorage.getItem("CommonStore:proxy:refresh_token")||void 0,token_type:sessionStorage.getItem("CommonStore:proxy:token_type")||void 0,expires_in:sessionStorage.getItem("CommonStore:proxy:expires_in")||void 0,scope:sessionStorage.getItem("CommonStore:proxy:scope")||void 0}),this.proxy.on(Ht.CHAT,s=>{const{channelId:i,senderChannelId:e,profile:n,content:a,emojis:h,messageTime:u}=s,{nickname:f,badges:p,verifiedMark:l}=n,{key:o,value:r}=h;this.emit("CHAT",{channel_id:e,nickname:f,message:a})}),this.proxy.on(Ht.DONATION,s=>{const{donationType:i,channelId:e,donatorChannelId:n,donatorNickname:a,payAmount:h,donationText:u,emojis:f}=s,{key:p,value:l}=f;this.emit("DONATION",{channel_id:n,nickname:a,message:u,pay:parseInt(h)})})}set bgm(t){var s;this._bgm_key&&(t!=null&&t.key.startsWith(this._bgm_key))||(this._bgm&&this._bgm.stop(),this._bgm=t,this._bgm_key=t==null?void 0:t.key,(s=this._bgm)==null||s.play())}get volume_master(){return this._volume_master}set volume_master(t){var s;this._volume_master=t,localStorage.setItem("CommonStore:volume:master",t.toString()),(s=this.onVolumeMasterChange)==null||s.call(this)}get volume_bgm(){return this._volume_bgm}set volume_bgm(t){var s;this._volume_bgm=t,localStorage.setItem("CommonStore:volume:bgm",t.toString()),(s=this._bgm)==null||s.setVolume(t)}get volume_effect(){return this._volume_effect}set volume_effect(t){this._volume_effect=t,localStorage.setItem("CommonStore:volume:effect",t.toString())}}const d=new ie,at=class at extends H.GameObjects.Container{constructor(t,s,i,e,n){super(t,s,i),this._centered=!1,this._pointerover=!1,t.add.existing(this),this.setSize(e,n)}init(t,s,i){const e=this.height*.8,n=Math.min(this.width,e);this.game_logo=s,this.game_logo.setScale(n/this.game_logo.width).setY((n-this.height)/2),this.game_logo_animation_key=i,this.game_logo.play(this.game_logo_animation_key);const a=this.height*.2;this.game_name=this.scene.add.text(0,e/2,t,{...d.style.font_style,fontSize:a}).setOrigin(.5).setPadding(d.style.font_padding),this.cover=this.scene.add.rectangle(0,0,this.width*1.1,this.height*1.1,d.style.color.grey_0,.5),this.add([this.game_logo,this.game_name,this.cover]),this.onButtonState()}get centered(){return this._centered}get pointerover(){return this._pointerover}set centered(t){this._centered=t,this.onButtonState()}set pointerover(t){var s;if(this._pointerover=t,this.onButtonState(),t){this.game_logo.anims.repeatDelay=0;let i=(s=this.game_logo.anims.currentFrame)!=null&&s.index?this.game_logo.anims.currentFrame.index%this.game_logo.anims.getTotalFrames():void 0;this.game_logo.play({key:this.game_logo_animation_key,startFrame:i,repeatDelay:at.animation_duration/10,delay:0})}else this.game_logo.anims.repeatDelay=at.animation_duration,this.game_logo.anims.resume();this.game_logo.anims.reverse()}onButtonState(){this._centered&&this._pointerover?(this.setScale(1.2),this.cover.setAlpha(0)):this._centered&&!this._pointerover?(this.setScale(1),this.cover.setAlpha(0)):!this._centered&&this._pointerover?(this.setScale(1),this.cover.setAlpha(1)):!this._centered&&!this._pointerover&&(this.setScale(.8),this.cover.setAlpha(1))}onpointerup(){console.error(this.game_name.text,"onpointerup is not implemented.")}onpointerdown(){this.game_logo.anims.pause()}};at.animation_duration=1e3;let Mt=at;var B=(m=>(m.TEAM1="TEAM1",m.TEAM2="TEAM2",m))(B||{}),q=(m=>(m.WHITE="하양",m.BLACK="검정",m.NONE="투명",m))(q||{}),it=(m=>(m.CLICK="클릭",m.MOST="최다 득표",m.PROPORTIONAL="득표 비례 확률",m))(it||{}),L=(m=>(m.TEAM1="1 팀",m.TEAM2="2 팀",m.NONE="불참",m.DEFAULT="기본값",m))(L||{}),_t=(m=>(m.TEAM1="1 팀",m.TEAM2="2 팀",m.RANDOM="무작위",m))(_t||{});class jt{constructor({name:t,timeout_index:s,disk_index:i,put_index:e}){this.timeout_list=[-1,10,20,30,40,50,60,300],this.disk_color_list=["하양","검정"],this.put_list=["클릭","최다 득표","득표 비례 확률"],this.name=t,this.timeout_index=s,this.disk_color_index=i,this.put_index=e}get timeout(){return this.timeout_list[this.timeout_index]}get disk_color(){return this.disk_color_list[this.disk_color_index]}get put(){return this.put_list[this.put_index]}nextTimeout(t){return this.timeout_index=(this.timeout_index+this.timeout_list.length+t)%this.timeout_list.length,this.timeout}nextDisk(t){return this.disk_color_index=(this.disk_color_index+this.disk_color_list.length+t)%this.disk_color_list.length,this.disk_color}nextPut(t){return this.put_index=(this.put_index+this.put_list.length+t)%this.put_list.length,this.put}}var Dt=(m=>(m[m.WALL=0]="WALL",m[m.EMPTY=1]="EMPTY",m[m.BLOCK=2]="BLOCK",m))(Dt||{}),Y=(m=>(m.SET="SET",m.PUT="PUT",m.PUT_FAIL="PUT_FAIL",m.PASS="PASS",m.END="END",m))(Y||{});class ae{constructor(t,s,i){this.team_tag=null,this.x=t,this.y=s,this.disk_color=i}}class ce{constructor(t){this.width_list=[8,10],this.height_list=[8,10],this.tiles=[],this.disks=[],this.parent=t,this.width_index=parseInt(localStorage.getItem("OthelloStore:game_board:width_index")||"0"),this.height_index=parseInt(localStorage.getItem("OthelloStore:game_board:height_index")||"0"),this.counter={TEAM1:0,TEAM2:0}}get width(){return this.width_list[this.width_index]}get height(){return this.height_list[this.height_index]}init(t,s){this.counter={TEAM1:0,TEAM2:0};for(let i=0;i<12;i++){this.tiles[i]=[],this.disks[i]=[];for(let e=0;e<12;e++)i>0&&i<=this.width&&e>0&&e<=this.height?this.tiles[i][e]=1:this.tiles[i][e]=0,this.disks[i][e]=new ae(i,e,"투명")}this.setDisk(this.width/2,this.height/2,"TEAM1",t),this.setDisk(this.width/2+1,this.height/2,"TEAM2",s),this.setDisk(this.width/2,this.height/2+1,"TEAM2",s),this.setDisk(this.width/2+1,this.height/2+1,"TEAM1",t)}setDisk(t,s,i,e,n=!0){const a=this.disks[t][s],h=a.team_tag,u=a.disk_color;this.disks[t][s].disk_color=e,this.disks[t][s].team_tag=i,this.counter[i]+=1,h&&(this.counter[h]-=1),n&&this.parent.emit("SET",t,s,u,e)}putDisk(t,s,i,e){const n=this.canPutDisk(t,s,i,e);return n.length===0?(this.parent.emit("PUT_FAIL"),!1):(this.setDisk(t,s,i,e),n.forEach(a=>{this.setDisk(a.x,a.y,i,e)}),this.parent.emit("PUT",t,s),!0)}canPutDisk(t,s,i,e){if(t<1||t>this.width||s<1||s>this.height)return[];if(this.disks[t][s].disk_color!=="투명")return[];const n=this.getFlippingDisk(t,s,0,-1,i,e,!0),a=this.getFlippingDisk(t,s,1,-1,i,e,!0),h=this.getFlippingDisk(t,s,1,0,i,e,!0),u=this.getFlippingDisk(t,s,1,1,i,e,!0),f=this.getFlippingDisk(t,s,0,1,i,e,!0),p=this.getFlippingDisk(t,s,-1,1,i,e,!0),l=this.getFlippingDisk(t,s,-1,0,i,e,!0),o=this.getFlippingDisk(t,s,-1,-1,i,e,!0);return[...n,...a,...h,...u,...f,...p,...l,...o]}getFlippingDisk(t,s,i,e,n,a,h=!1){if(this.tiles[s+e][t+i]!==1)return[];const f=h?[]:[this.disks[t][s]],p=this.disks[t+i][s+e];if(p.disk_color==="투명")return[];if(p.team_tag===n)return[...f];{const l=this.getFlippingDisk(t+i,s+e,i,e,n,a);return l.length>0?[...l,...f]:[]}}canPutDiskSet(t,s){const i=new Set;for(let e=1;e<=this.width;e++)for(let n=1;n<=this.height;n++)this.canPutDisk(e,n,t,s).length>0&&i.add(this.disks[e][n]);return i}}class he extends Gt{constructor(){super(),this.default_membership_list=["1 팀","2 팀","불참"],this.start_team_list=["1 팀","2 팀","무작위"],this.teams={},this.teams.TEAM1=new jt({name:localStorage.getItem("OthelloStore:teams:TEAM1:name")||"1 팀",timeout_index:parseInt(localStorage.getItem("OthelloStore:teams:TEAM1:timeout_index")||"0"),disk_index:parseInt(localStorage.getItem("OthelloStore:teams:TEAM1:disk_index")||"0"),put_index:parseInt(localStorage.getItem("OthelloStore:teams:TEAM1:put_index")||"0")}),this.teams.TEAM2=new jt({name:localStorage.getItem("OthelloStore:teams:TEAM2:name")||"2 팀",timeout_index:parseInt(localStorage.getItem("OthelloStore:teams:TEAM2:timeout_index")||"2"),disk_index:parseInt(localStorage.getItem("OthelloStore:teams:TEAM2:disk_index")||"1"),put_index:parseInt(localStorage.getItem("OthelloStore:teams:TEAM2:put_index")||"1")}),this._members={},this.default_membership_index=parseInt(localStorage.getItem("OthelloStore:default_membership_index")||"1"),this.start_team_index=parseInt(localStorage.getItem("OthelloStore:start_team_index")||"2"),this.game_board=new ce(this)}get members(){return this._members}get default_membership(){return this.default_membership_list[this.default_membership_index]}get start_team(){return this.start_team_list[this.start_team_index]}nextTeamTimeout(t,s){this.teams[t].nextTimeout(s),localStorage.setItem(`OthelloStore:teams:${t}:timeout_index`,this.teams[t].timeout_index.toString()),this.emit("teams:timeout",t,this.teams[t].timeout)}nextTeamDisk(t,s){this.teams[t].nextDisk(s),localStorage.setItem(`OthelloStore:teams:${t}:disk_index`,this.teams[t].disk_color_index.toString()),this.emit("teams:disk",t,this.teams[t].disk_color)}nextTeamPut(t,s){this.teams[t].nextPut(s),localStorage.setItem(`OthelloStore:teams:${t}:put_index`,this.teams[t].put_index.toString()),this.emit("teams:put",t,this.teams[t].put)}nextDefaultMembership(t){this.default_membership_index=(this.default_membership_index+this.default_membership_list.length+t)%this.default_membership_list.length,localStorage.setItem("OthelloStore:default_membership_index",this.default_membership_index.toString()),this.emit("default_membership",this.default_membership)}nextStartTeam(t){this.start_team_index=(this.start_team_index+this.start_team_list.length+t)%this.start_team_list.length,localStorage.setItem("OthelloStore:start_team_index",this.start_team_index.toString()),this.emit("start_team",this.start_team)}setMemberShip(t,s){this._members[t]=s??this._members[t]??"기본값",this.emit("members",t,this._members[t])}clearMemberShip(){this._members={}}}const x=new he,Pt=(m,t)=>[`${String.fromCharCode(m+65-1)}`,`${t}`],Ot=m=>{let t=-1,s=-1;return/^[a-z]\d+.*/.test(m)?(t=m[0].charCodeAt(0)-97+1,s=parseInt(m.slice(1))):/^[A-Z]\d+.*/.test(m)&&(t=m[0].charCodeAt(0)-65+1,s=parseInt(m.slice(1))),[t,s]},qt=m=>{switch(m){case L.TEAM1:return B.TEAM1;case L.TEAM2:return B.TEAM2;case L.DEFAULT:case L.NONE:return}};class $t extends H.GameObjects.Container{constructor(t,s,i,e,n,a){super(t,s,i),this.disk_set=new Set,this.chat_nickname_list=[],this.chat_position_list=[],this.chat_flag=new Set,this.vote={},t.add.existing(this),this.team_tag=a;const h=e/50,u=d.style.font_style.fontSize,f=t.add.graphics().lineStyle(h,d.style.color.grey_f).strokeRect(0,0,e,n);this.add(f);const p=u,l=t.add.text(e/2,p,x.teams[a].name,{...d.style.font_style}).setOrigin(.5);this.add(l);const o=p+u*2,c=x.teams[a].disk_color===q.WHITE?0:6,_=t.add.sprite(e*1/4,o,"Othello:assets",c).setScale(d.SCALE).setOrigin(.5),g=x.game_board.counter[a],y=t.add.text(e*2/3,o,g.toString(),{...d.style.font_style,fontSize:u*(.8+1.2*g/64)}).setOrigin(.5);this.add([_,y]);const v=o+u*2,C=t.add.text(e*2/5,v,"남은 시간",{...d.style.font_style,fontSize:u*2/3}).setOrigin(.5),b=x.teams[a].timeout<0?"무제한":`${x.teams[a].timeout} 초`;this.timer_text=t.add.text(e*2/5,v+u,b,{...d.style.font_style,color:d.style.color_code.green_f}).setOrigin(.5),this.pass_text=t.add.text(e*3/4,v,`턴
종
료`,{...d.style.font_style,fontSize:u*2/3,color:d.style.color_code.pink_a}).setOrigin(0,.2).setInteractive().on("pointerup",()=>{this.timer_event.repeatCount=0,this.scene.sound.play("Common:sound:select",{volume:d.volume_effect})}).on("pointerover",()=>{this.pass_text.setColor(d.style.color_code.pink_f)}).on("pointerout",()=>{this.pass_text.setColor(d.style.color_code.pink_a)}),this.add([C,this.timer_text,this.pass_text]),this.timer_event=t.time.addEvent({}),t.events.on("shutdown",()=>{t.time.removeEvent(this.timer_event)});const w=u/4,T=v+u*2,k=e-2*w,S=n-T-w,E=h/2,F=t.add.graphics().lineStyle(E,d.style.color.grey_f).strokeRect(w,T,k,S);this.add([F]);const O=w+u/8,M=11;this.chat_font_size=u/2,this.chat_nickname_width=k-this.chat_font_size*2.5;for(let N=0;N<M;N++){const dt=t.add.text(O,T+this.chat_font_size*N*1.1,"nickname",{...d.style.font_style,fontSize:this.chat_font_size}).setCrop(0,0,this.chat_nickname_width,this.chat_font_size),mt=t.add.text(O+this.chat_nickname_width+this.chat_font_size*2/3,T+this.chat_font_size*N*1.1,"A1",{...d.style.font_style,fontSize:this.chat_font_size});this.chat_nickname_list.push(dt),this.chat_position_list.push(mt)}this.add([...this.chat_nickname_list,...this.chat_position_list]),this.cover=t.add.rectangle(-E,-E,e+2*E,n+2*E,d.style.color.grey_0,.5).setOrigin(0),this.add(this.cover);const D=()=>{const N=x.game_board.counter[a];y.setText(N.toString()).setFontSize(u*(.8+1.2*N/64))};x.on(Y.SET,D),t.events.on("shutdown",()=>{x.off(Y.SET,D)}),this.clearChat()}onstartturn(t,s){this.cover.visible=!1,this.disk_set=t,this.scene.time.removeEvent(this.timer_event),this.vote={},this.timer_event=this.scene.time.addEvent({delay:(d.DEBUG,1e3),repeat:x.teams[this.team_tag].timeout,callback:()=>{if(this.timer_text.setText(x.teams[this.team_tag].timeout<0?"무제한":`${this.timer_event.repeatCount-1} 초`),this.timer_event.repeatCount>6?this.timer_text.setColor(d.style.color_code.green_f).setScale(1):this.timer_text.setColor(d.style.color_code.pink_f).setScale(1.3),this.timer_event.repeatCount===0){const i=x.teams[this.team_tag].timeout<0?"무제한":`${x.teams[this.team_tag].timeout} 초`;this.timer_text.setText(i).setColor(d.style.color_code.green_f).setScale(1),s(this.team_tag,this.disk_set,this.vote)}}}),this.clearChat()}onendturn(){this.timer_event.paused=!0,this.cover.visible=!0}clearChat(){this.chat_nickname_list.forEach(t=>t.setText("").setVisible(!1)),this.chat_position_list.forEach(t=>t.setText("").setVisible(!1)),this.chat_flag=new Set}addChat(t,s,i,e,n){if(this.chat_flag.has(t))return;this.chat_flag.add(t);const[a,h]=Pt(i,e),u=a+h;this.vote[u]?this.vote[u]+=1:this.vote[u]=1,n.setText(`${this.vote[u]}`).setVisible(!0),this.chat_nickname_list.forEach((f,p)=>{p===this.chat_nickname_list.length-1?f.setText(s).setCrop(0,0,this.chat_nickname_width,this.chat_font_size).setVisible(!0):f.setText(this.chat_nickname_list[p+1].text).setCrop(0,0,this.chat_nickname_width,this.chat_font_size).setVisible(!0)}),this.chat_position_list.forEach((f,p)=>{p===this.chat_position_list.length-1?f.setText(u).setVisible(!0):f.setText(this.chat_position_list[p+1].text).setVisible(!0)})}endGame(){this.timer_event.paused=!0}}const xt=class xt extends H.Scene{constructor(){super(xt.key),this.tiles=[],this.disks=[],this.votes=[],this.team_panels={},this.curr_turn=B.TEAM1,this.prev_pass=!1}static preload(t){t.anims.create({key:`${q.WHITE}-${q.BLACK}`,frames:t.anims.generateFrameNumbers("Othello:assets",{start:0,end:6})}),t.anims.create({key:`${q.BLACK}-${q.WHITE}`,frames:t.anims.generateFrameNumbers("Othello:assets",{start:6,end:12})})}create(){const t=d.WIDTH/(x.game_board.width+2),s=d.HEIGHT/(x.game_board.height+2),i=Math.min(t,s)/32,e=d.HEIGHT/20;this.add.text(d.WIDTH/2,e,"스트리머 vs 시청자",{...d.style.font_style,color:d.style.color_code.green_f}).setOrigin(.5,0);const n=d.HEIGHT/10,a=d.HEIGHT/10;this.back_text=this.add.text(n,a,"뒤로",{...d.style.font_style,color:d.style.color_code.pink_a}).setOrigin(0,.5).setInteractive().on("pointerup",()=>{this.sound.play("Common:sound:exit",{volume:d.volume_effect}),this.scene.start(lt.key)}).on("pointerover",()=>{this.back_text.setColor(d.style.color_code.pink_f)}).on("pointerout",()=>{this.back_text.setColor(d.style.color_code.pink_a)});const h=32*i,u=32*i,f=(d.WIDTH-h*(x.game_board.width+2))/2,p=u/2+d.style.font_style.fontSize-32*i/2,l=d.style.color.green_a,o=d.style.color.green_f;for(let k=0;k<x.game_board.width+2;k++){this.tiles[k]=[],this.disks[k]=[],this.votes[k]=[];for(let S=0;S<x.game_board.height+2;S++){const E=f+k*h,F=p+S*u;switch(x.game_board.tiles[k][S]){case Dt.EMPTY:this.tiles[k][S]=this.add.sprite(E,F,"Othello:assets",16).setOrigin(0).setScale(i).setTint(l).setToBack();const It=this.add.graphics().lineStyle(2*i,o).strokeRoundedRect(E,F,h,u,2*i);It.visible=!1,this.tiles[k][S].setInteractive().on("pointerup",()=>{x.teams[this.curr_turn].put===it.CLICK&&x.game_board.putDisk(k,S,this.curr_turn,x.teams[this.curr_turn].disk_color)}).on("pointerover",()=>{It.visible=!0}).on("pointerout",()=>{It.visible=!1});break;case Dt.WALL:let J;if(k==0)S==0?J=21:S==x.game_board.height+1?J=23:J=17;else if(k==x.game_board.width+1)S==0?J=22:S==x.game_board.height+1?J=24:J=18;else if(S==0)J=19;else if(S==x.game_board.height+1)J=20;else break;this.tiles[k][S]=this.add.sprite(E,F,"Othello:assets",J).setOrigin(0).setScale(i).setTint(l).setToBack();break}const M=x.game_board.disks[k][S];let D=13;switch(M.disk_color){case q.WHITE:D=0;break;case q.BLACK:D=6;break;case q.NONE:D=13;break}this.disks[k][S]=this.add.sprite(E,F,"Othello:assets",D).setOrigin(0).setScale(i),this.votes[k][S]=this.add.text(E+h/2,F+u/2,"0",{...d.style.font_style,fontSize:d.style.font_style.fontSize*2/3,backgroundColor:d.style.color_code.green_a}).setOrigin(.5).setVisible(!1);const N={...d.style.font_style,fontSize:d.style.font_style.fontSize*2/3,color:d.style.color_code.green_a},[dt,mt]=Pt(k,S);k===0&&S>0&&S<x.game_board.height+1&&this.add.text(E+h*3/4,F+u/2,mt,N).setOrigin(.5),S===0&&k>0&&k<x.game_board.width+1&&this.add.text(E+h/2,F+u*3/4,dt,N).setOrigin(.5),k===x.game_board.width+1&&S>0&&S<x.game_board.height+1&&this.add.text(E+h*1/4,F+u/2,mt,N).setOrigin(.5),S===x.game_board.height+1&&k>0&&k<x.game_board.width+1&&this.add.text(E+h/2,F+u*1/4,dt,N).setOrigin(.5)}}const r=h/2,c=p+u,_=(d.WIDTH-h*(x.game_board.width+3))/2,g=d.HEIGHT-(c+u/2);this.team_panels[B.TEAM1]=new $t(this,r,c,_,g,B.TEAM1),this.team_panels[B.TEAM2]=new $t(this,d.WIDTH-_-r,c,_,g,B.TEAM2);const y=(k,S,E,F)=>{if(E===q.NONE||E===F){const O=F===q.WHITE?0:6;this.disks[k][S].setFrame(O).setTint(d.style.color.grey_f)}else this.disks[k][S].anims.play(`${E}-${F}`)},v=(k,S)=>{if(this.curr_turn===B.TEAM1&&x.members[d.proxy.channel_id]===L.TEAM1||this.curr_turn===B.TEAM2&&x.members[d.proxy.channel_id]===L.TEAM2){const[E,F]=Pt(k,S);d.proxy.message=E+F}this.sound.play("Common:sound:open_menu",{volume:d.volume_effect}),this.nextTurn()},C=()=>{this.sound.play("Common:sound:close_menu",{volume:d.volume_effect})};x.on(Y.SET,y),x.on(Y.PUT,v),x.on(Y.PUT_FAIL,C),this.events.on("shutdown",()=>{x.off(Y.SET,y),x.off(Y.PUT,v),x.off(Y.PUT_FAIL,C)});const b=({channel_id:k,nickname:S,message:E})=>{const[F,O]=Ot(E);x.setMemberShip(k);const M=x.members[k]===L.DEFAULT?x.default_membership:x.members[k],D=qt(M);if(D!==void 0&&this.curr_turn===D)for(const N of this.team_panels[D].disk_set)N.x===F&&N.y===O&&this.team_panels[D].addChat(k,S,F,O,this.votes[F][O])};d.on(Z.CHAT,b),d.on(Z.DONATION,b),this.events.on("shutdown",()=>{d.off(Z.CHAT,b),d.off(Z.DONATION,b)});const w=["battle1","battle2","battle3"],T=w[Math.floor(Math.random()*w.length)];switch(d.bgm=d.bgm_map["bgm:"+T+":intro"],x.start_team){case _t.TEAM1:this.setTurn(B.TEAM1);break;case _t.TEAM2:this.setTurn(B.TEAM2);break;case _t.RANDOM:const k=[B.TEAM1,B.TEAM2];this.setTurn(k[Math.round(Math.random())]);break}}putDisk(t,s,i){let e=!1;if(x.teams[t].put===it.MOST&&Object.keys(i).length>0){let n=0,a="";for(const f in i){const p=i[f];n<p?(n=p,a=f):p===n&&Math.random()<.5&&(a=f)}const[h,u]=Ot(a);e=x.game_board.putDisk(h,u,t,x.teams[t].disk_color)}else if(x.teams[t].put===it.PROPORTIONAL&&Object.keys(i).length>0){const n=[];for(const f in i)for(let p=0;p<i[f];p++)n.push(f);const a=n[Math.floor(Math.random()*n.length)],[h,u]=Ot(a);e=x.game_board.putDisk(h,u,t,x.teams[t].disk_color)}if(x.teams[t].put===it.CLICK||Object.keys(i).length===0||!e){const n=[...s][Math.floor(Math.random()*s.size)];x.game_board.putDisk(n.x,n.y,t,x.teams[t].disk_color)}}setTurn(t){const s=x.teams[t].disk_color,i=x.game_board.canPutDiskSet(t,s);if(i.size>0){this.team_panels[this.curr_turn].onendturn(),this.team_panels[t].onstartturn(i,(e,n,a)=>{this.putDisk(e,n,a)}),this.curr_turn=t,this.prev_pass=!1;for(let e=1;e<=x.game_board.width;e++)for(let n=1;n<=x.game_board.height;n++)i.has(x.game_board.disks[e][n])?this.disks[e][n].setFrame(14).setTint(d.style.color.green_a):x.game_board.disks[e][n].disk_color===q.NONE&&this.disks[e][n].setFrame(13),this.votes[e][n].setVisible(!1)}else this.prev_pass?this.endGame():(this.prev_pass=!0,this.setTurn(this.curr_turn))}nextTurn(){const t=this.curr_turn===B.TEAM1?B.TEAM2:B.TEAM1;this.setTurn(t)}endGame(){for(let i=1;i<=x.game_board.width;i++)for(let e=1;e<=x.game_board.height;e++)x.game_board.disks[i][e].disk_color===q.NONE&&this.disks[i][e].setFrame(13);const t=qt(x.members[d.proxy.channel_id]),s=t===B.TEAM1?B.TEAM2:B.TEAM1;if(!t)d.bgm=d.bgm_map["bgm:victory:intro"];else{const i=x.game_board.counter[t],e=x.game_board.counter[s];i/2>e?d.bgm=d.bgm_map["bgm:victory2:intro"]:i>e?d.bgm=d.bgm_map["bgm:victory:intro"]:i===e?d.bgm=d.bgm_map["bgm:draw:intro"]:i*2>e?d.bgm=d.bgm_map["bgm:defeat:intro"]:d.bgm=d.bgm_map["bgm:defeat2:intro"]}this.team_panels[B.TEAM1].endGame(),this.team_panels[B.TEAM2].endGame(),this.back_text.setColor(d.style.color_code.pink_f)}};xt.key="OthelloGameScene";let ht=xt;class Nt extends H.GameObjects.Container{constructor(t,s,i){super(t,s,i),t.add.existing(this)}}class le extends Nt{constructor(t,s,i,e,{label:n="label",value:a="value"}){super(t,s,i);const h=e*1/10,u=this.scene.add.text(h,0,n,{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5,0).setPadding(d.style.font_padding);this.add(u);const f=e*6/10;this.value_text=this.scene.add.text(f,0,a,{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5,0).setPadding(d.style.font_padding),this.add(this.value_text),this.scene.add.graphics()}}class ue extends Nt{constructor(t,s,i,e,{label:n="label",value:a="value",on_left_button_click:h,on_right_button_click:u}){super(t,s,i);const f=e*1/10,p=this.scene.add.text(f,0,n,{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5,0).setPadding(d.style.font_padding);this.add(p);const l=e*6/10;this.value_text=this.scene.add.text(l,0,a,{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5,0).setPadding(d.style.font_padding),this.add(this.value_text);const o=e*3/10,r=this.scene.add.sprite(o,0,"Common:button_header").setOrigin(.5,.25).setScale(d.SCALE).setFlipX(!0).setTint(d.style.color.grey_a).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),h==null||h()}).on("pointerover",()=>{r.setTint(d.style.color.grey_4)}).on("pointerout",()=>{r.setTint(d.style.color.grey_a)}),c=e*9/10,_=this.scene.add.sprite(c,0,"Common:button_header").setOrigin(.5,.25).setScale(d.SCALE).setTint(d.style.color.grey_a).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),u==null||u()}).on("pointerover",()=>{_.setTint(d.style.color.grey_4)}).on("pointerout",()=>{_.setTint(d.style.color.grey_a)});this.add([r,_])}setValueText(t){this.value_text.setText(t)}}class pe extends Nt{constructor(t,s,i,e,n,{height:a}){super(t,s,i),this.page_index=0,this.page_count=1,this.users=[],this.nicknames=[],this.users_flag=new Set,this.per_page=16,this.nickname_text=[],this.team_text=[];const h=e/200,u=t.add.graphics().lineStyle(h*2,8947848).strokeRect(-h,-h,e+2*h,n+2*h);this.add(u);const f=l=>{switch(l){case L.DEFAULT:return L.TEAM1;case L.TEAM1:return L.TEAM2;case L.TEAM2:return L.NONE;case L.NONE:return L.DEFAULT}};this.font_size=d.style.font_style.fontSize,this.nickname_text_width=e*8/20;for(let l=0;l<this.per_page/2;l++)for(let o=0;o<2;o++){(l+o)%2&&this.add(t.add.graphics().fillStyle(d.style.color.grey_f).fillRect(e*o/2,this.font_size*l,e/2,this.font_size));const r=t.add.text((e*o+e*1/20)/2,this.font_size*(l+.5),"nickname",{...d.style.font_style,color:d.style.color_code.grey_0}).setScale(.8).setOrigin(0,.5).setCrop(0,0,this.nickname_text_width,this.font_size);this.nickname_text.push(r);const c=t.add.text((e*o+e*15/20)/2+this.font_size,this.font_size*(l+.5),L.TEAM1,{...d.style.font_style,color:d.style.color_code.green_f}).setScale(.8).setOrigin(.5,.5).setTint(d.style.color.grey_a);c.setInteractive().on("pointerup",()=>{const _=this.page_index*this.per_page+2*l+o,g=this.users[_];this.nicknames[_];const y=x.members[g],v=f(y);x.setMemberShip(g,v),this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),c.setText(v)}).on("pointerover",()=>{c.setTint(d.style.color.grey_4)}).on("pointerout",()=>{c.setTint(d.style.color.grey_a)}),this.team_text.push(c)}this.add(this.nickname_text),this.add(this.team_text);const p=n+d.style.font_style.fontSize/2;this.page_text=t.add.text(e/2,p,` ${this.page_index} / ${this.page_count} `,{...d.style.font_style,backgroundColor:d.style.color_code.grey_0}).setOrigin(.5,0),this.add(this.page_text),this.left_button=t.add.sprite(e*2/6,p,"Common:button_header").setTint(d.style.color.grey_a).setOrigin(.5,.25).setScale(d.SCALE).setFlipX(!0),this.left_button.setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),this.movePage(-1)}).on("pointerover",()=>{this.left_button.setTint(d.style.color.grey_4)}).on("pointerout",()=>{this.left_button.setTint(d.style.color.grey_a)}),this.right_button=t.add.sprite(e*4/6,p,"Common:button_header").setTint(d.style.color.grey_a).setOrigin(.5,.25).setScale(d.SCALE),this.right_button.setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),this.movePage(1)}).on("pointerover",()=>{this.right_button.setTint(d.style.color.grey_4)}).on("pointerout",()=>{this.right_button.setTint(d.style.color.grey_a)}),this.add([this.left_button,this.right_button]),this.addUser(d.proxy.channel_id,d.proxy.nickname??"방장")}addUser(t,s){this.users_flag.has(t)||(this.users.push(t),this.nicknames.push(s),this.users_flag.add(t),x.setMemberShip(t,d.proxy.channel_id===t?L.TEAM1:L.DEFAULT),this.page_count=Math.ceil(this.users.length/this.per_page),this.page_text.setText(` ${this.page_index+1} / ${this.page_count} `),this.updateTable())}movePage(t){this.page_index=Math.max(0,Math.min(this.page_count-1,this.page_index+t)),this.page_text.setText(` ${this.page_index+1} / ${this.page_count} `),this.updateTable()}updateTable(){for(let t=0;t<this.per_page;t++){const s=this.nickname_text[t],i=this.team_text[t],e=this.per_page*this.page_index+t,n=this.users[e],a=this.nicknames[e],h=x.members[n];a?(s.setText(a).setCrop(0,0,this.nickname_text_width,this.font_size).setVisible(!0),i.setText(h).setVisible(!0)):(s.setVisible(!1),i.setVisible(!1))}}}class Lt extends H.GameObjects.Container{constructor(t,s,i){super(t),this.option_count=0,this._selected=!1,this.onselect=()=>{},this.onunselect=()=>{},this.scene.add.existing(this);const e=d.WIDTH/20,n=d.HEIGHT/20;this.round=d.WIDTH/100,this.tag_width=d.WIDTH*9/10/5,this.tag_height=d.style.font_style.fontSize*2,this.tag_x_offset=e+i*this.tag_width,this.tag_y_offset=n,this.tag_background=t.add.graphics(),this.add(this.tag_background);const a=t.add.zone(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height).setOrigin(0).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),this.select=!0}).on("pointerover",()=>{this._selected||this.tag_background.fillStyle(d.style.color.grey_a).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round)}).on("pointerout",()=>{this._selected||this.tag_background.fillStyle(d.style.color.grey_6).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round)});this.add(a),this.tag_text_x_offset=e+this.tag_width/2+i*this.tag_width,this.tag_text_y_offset=this.tag_y_offset+this.tag_height/2,this.tag_text=t.add.text(this.tag_text_x_offset,this.tag_text_y_offset,s,d.style.font_style).setOrigin(.5).setPadding(d.style.font_padding),this.add(this.tag_text),this.panel_x_offset=e,this.panel_y_offset=this.tag_y_offset+this.tag_height,this.panel_width=d.WIDTH*9/10,this.panel_height=d.HEIGHT*9/10-this.panel_y_offset+n,this.panel_background=t.add.graphics().fillStyle(d.style.color.grey_e).fillRoundedRect(this.panel_x_offset,this.panel_y_offset,this.panel_width,this.panel_height,this.round),this.add(this.panel_background);const h=t.add.zone(this.panel_x_offset,this.panel_y_offset,this.panel_width,this.panel_height).setOrigin(0).setInteractive();this.add(h),this.select=!1}getOptionPosition(t=1){const s=this.panel_x_offset+this.panel_width/20,i=this.panel_y_offset+this.panel_height/20+this.option_count*d.style.font_style.fontSize*2,e=d.WIDTH-2*s,n=t*d.style.font_style.fontSize*2;return{option_x_offset:s,option_y_offset:i,option_width:e,option_height:n}}addTextOption({label:t,value:s}){const{option_x_offset:i,option_y_offset:e,option_width:n}=this.getOptionPosition();this.option_count+=1;const a=new le(this.scene,i,e,n,{label:t,value:s});return this.add(a),a}addListOption({label:t,value:s,on_left_button_click:i,on_right_button_click:e}){const{option_x_offset:n,option_y_offset:a,option_width:h}=this.getOptionPosition();this.option_count+=1;const u=new ue(this.scene,n,a,h,{label:t,value:s,on_left_button_click:i,on_right_button_click:e});return this.add(u),u}addPageOption({height:t=1}){const{option_x_offset:s,option_y_offset:i,option_width:e,option_height:n}=this.getOptionPosition(t);this.option_count+=t;const a=new pe(this.scene,s,i,e,n,{height:t});return this.add(a),a}set select(t){t?(this.tag_background.fillStyle(d.style.color.grey_e).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round),this.tag_text.setTint(d.style.color.grey_0),this.setToTop(),this.onselect()):(this.tag_background.fillStyle(d.style.color.grey_6).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round),this.tag_text.setTint(d.style.color.grey_f),this.onunselect()),this._selected=t}}class Wt extends Lt{constructor(t,s,i,e){super(t,e,i),this.addTextOption({label:"팀명",value:x.teams[s].name});const n=x.teams[s].timeout<0?"무제한":`${x.teams[s].timeout} 초`,a=this.addListOption({label:"제한시간",value:n,on_left_button_click:()=>{x.nextTeamTimeout(s,-1)},on_right_button_click:()=>{x.nextTeamTimeout(s,1)}}),h=this.addListOption({label:"색깔",value:x.teams[s].disk_color,on_left_button_click:()=>{x.nextTeamDisk(s,-1)},on_right_button_click:()=>{x.nextTeamDisk(s,1)}}),u=this.addListOption({label:"놓는방식",value:x.teams[s].put,on_left_button_click:()=>{x.nextTeamPut(s,-1)},on_right_button_click:()=>{x.nextTeamPut(s,1)}}),f=(o,r)=>{if(s===o){const c=r<0?"무제한":`${r} 초`;a.setValueText(c)}},p=(o,r)=>{s===o&&h.setValueText(r)},l=(o,r)=>{s===o&&u.setValueText(r)};x.on("teams:timeout",f),x.on("teams:disk",p),x.on("teams:put",l),this.scene.events.on("shutdown",()=>{x.off("teams:timeout",f),x.off("teams:disk",p),x.off("teams:put",l)})}}class fe extends Lt{constructor(t,s){super(t,"팀원",s);const i=this.addListOption({label:"기본값",value:x.default_membership,on_left_button_click:()=>x.nextDefaultMembership(-1),on_right_button_click:()=>x.nextDefaultMembership(1)}),e=this.addPageOption({height:4}),n=h=>{i.setValueText(h)};x.on("default_membership",n);const a=({channel_id:h,nickname:u,message:f})=>{e.addUser(h,u)};d.on(Z.CHAT,a),d.on(Z.DONATION,a),t.events.on("shutdown",()=>{x.off("default_membership",n),d.off(Z.CHAT,a),d.off(Z.DONATION,a)})}}class de extends Lt{constructor(t,s,i){super(t,"리버시",s),this.tag_text.setColor(d.style.color_code.green_f);const e=this.addListOption({label:"누구부터",value:x.start_team,on_left_button_click:()=>x.nextStartTeam(-1),on_right_button_click:()=>x.nextStartTeam(1)}),n=this.scene.add.text(this.panel_x_offset+this.panel_width/2,this.panel_y_offset+this.panel_height/2,"드가자!",{...d.style.font_style,fontSize:d.style.font_style.fontSize*2,color:d.style.color_code.green_a}).setOrigin(.5).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:shop",{volume:d.volume_effect}),i()}).on("pointerover",()=>{n.setColor(d.style.color_code.grey_4)}).on("pointerout",()=>{n.setColor(d.style.color_code.green_a)});this.add(n);const a=h=>{e.setValueText(h)};x.on("start_team",a),this.scene.events.on("shutdown",()=>{x.off("start_team",a)})}}const St=class St extends H.Scene{constructor(){super(St.key),this.startGameScene=()=>{x.game_board.init(x.teams[B.TEAM1].disk_color,x.teams[B.TEAM2].disk_color),this.scene.start(ht.key)}}create(){d.bgm=d.bgm_map["bgm:login:intro"],x.clearMemberShip();const t=new Wt(this,B.TEAM1,.5,L.TEAM1),s=new Wt(this,B.TEAM2,1.5,L.TEAM2),i=new fe(this,2.75),e=new de(this,4,this.startGameScene),n=d.HEIGHT/10,a=d.HEIGHT/10,h=this.add.text(n,a,"뒤로",{...d.style.font_style,color:d.style.color_code.pink_a}).setOrigin(0,.5).setInteractive().on("pointerup",()=>{this.sound.play("Common:sound:exit",{volume:d.volume_effect}),this.scene.start(ut.key)}).on("pointerover",()=>{h.setColor(d.style.color_code.pink_f)}).on("pointerout",()=>{h.setColor(d.style.color_code.pink_a)});t.onselect=()=>{s.select=!1,i.select=!1,e.select=!1},s.onselect=()=>{t.select=!1,i.select=!1,e.select=!1},i.onselect=()=>{t.select=!1,s.select=!1,e.select=!1},e.onselect=()=>{t.select=!1,s.select=!1,i.select=!1},t.select=!0}};St.key="OthelloSettingScene";let lt=St;const ct=class ct extends Mt{static preload(t){t.anims.create({key:ct.game_logo_animation_key,frames:t.anims.generateFrameNumbers("Othello:assets",{start:32,end:44}),duration:this.animation_duration,repeat:-1,repeatDelay:this.animation_duration*2,delay:this.animation_duration*Math.random()*2})}constructor(t,s,i,e,n){super(t,s,i,e,n),this.scene=t;const a=this.scene.add.sprite(0,0,"Othello:assets",32);super.init("오델로",a,ct.game_logo_animation_key)}onpointerup(){this.scene.sound.play("Common:sound:pause",{volume:d.volume_effect}),this.scene.scene.start(lt.key)}};ct.game_logo_animation_key="OthelloSelectGameButton:animation";let vt=ct;const Vt="2025.06.23.1234",wt=class wt extends H.Scene{constructor(){super(wt.key)}create(){const t=d.HEIGHT/20;this.add.text(d.WIDTH/2,t,"스트리머 vs 시청자",{...d.style.font_style,color:d.style.color_code.green_f}).setOrigin(.5,0);const s=d.WIDTH*.2,i=d.HEIGHT*.5,e=[vt].map((c,_)=>new c(this,d.WIDTH*(1/2+_*3/10),d.HEIGHT/2,s,i)),n=s,a=i,h=d.WIDTH*.3,u=this.add.zone(d.WIDTH/2-h,d.HEIGHT/2,n,a).setOrigin(.5),f=this.add.zone(d.WIDTH/2,d.HEIGHT/2,n,a).setOrigin(.5),p=this.add.zone(d.WIDTH/2+h,d.HEIGHT/2,n,a).setOrigin(.5);this.add.text(0,d.HEIGHT,Vt,{...d.style.font_style}).setOrigin(0,1);const l=(c,_,g)=>{c<0||c>=e.length||(e[c].centered=_,e[c].pointerover=g)},o=(c,_,g)=>{c<0||c>=e.length||(e[c].centered=_,e[c].pointerover=g)};let r=0;u.setInteractive().on("pointerup",()=>{r!==0&&e.forEach((c,_)=>{c.setPosition(c.x+h,c.y),c.centered=r-1==_,c.pointerover=r-2==_}),r=Math.max(r-1,0)}).on("pointerdown",()=>{}).on("pointerover",()=>{r>0&&this.sound.play("Common:sound:cancel",{volume:d.volume_effect}),l(r-1,!1,!0)}).on("pointerout",()=>{o(r-1,!1,!1)}),f.setInteractive().on("pointerup",()=>{e[r].onpointerup()}).on("pointerdown",()=>{e[r].onpointerdown()}).on("pointerover",()=>{this.sound.play("Common:sound:cancel",{volume:d.volume_effect}),l(r,!0,!0)}).on("pointerout",()=>{o(r,!0,!1)}),p.setInteractive().on("pointerup",()=>{r!==e.length-1&&e.forEach((c,_)=>{c.setPosition(c.x-h,c.y),c.centered=r+1==_,c.pointerover=r+2==_}),r=Math.min(r+1,e.length-1)}).on("pointerdown",()=>{}).on("pointerover",()=>{r<e.length-1&&this.sound.play("Common:sound:cancel",{volume:d.volume_effect}),l(r+1,!1,!0)}).on("pointerout",()=>{o(r+1,!1,!1)}),e[r].centered=!0}};wt.key="SelectGameScene";let ut=wt;const Tt=class Tt extends H.Scene{constructor(){super(Tt.key)}preload(){this.load.spritesheet("Othello:assets","assets/Games/Othello/Othello.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("Common:button_header","assets/Common/button_header.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("Common:button_close","assets/Common/button_close.png",{frameWidth:32,frameHeight:32}),this.load.setPath("assets/Common/"),this.load.audio("Common:sound:cancel","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Cancel.mp3"),this.load.audio("Common:sound:confirm","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Confirm.mp3"),this.load.audio("Common:sound:select","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_MenuSelections.mp3"),this.load.audio("Common:sound:open_menu","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_OpenMenu.mp3"),this.load.audio("Common:sound:close_menu","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_CloseMenu.mp3"),this.load.audio("Common:sound:exit","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Exit.mp3"),this.load.audio("Common:sound:pause","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Pause.mp3"),this.load.audio("Common:sound:resume","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Resume.mp3"),this.load.audio("Common:sound:shop","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Shop.mp3"),this.load.audio("Common:sound:equip","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Equip.mp3"),this.load.audio("bgm:battle1:intro","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/And The Journey Begins/xDeviruchi - And The Journey Begins (Intro).wav"),this.load.audio("bgm:battle1","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/And The Journey Begins/xDeviruchi - And The Journey Begins (Loop).wav"),this.load.audio("bgm:battle2:intro","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Exploring The Unknown/xDeviruchi - Exploring The Unknown (Intro).wav"),this.load.audio("bgm:battle2","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Exploring The Unknown/xDeviruchi - Exploring The Unknown (Loop).wav"),this.load.audio("bgm:battle3:intro","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Prepare for Battle!/xDeviruchi - Prepare for Battle! (Intro).wav"),this.load.audio("bgm:battle3","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Prepare for Battle!/xDeviruchi - Prepare for Battle! (Loop).wav"),this.load.audio("bgm:victory:intro","xDeviruchi - 16 bit Fantasy & Adventure (2025)/06 - Victory!.mp3"),this.load.audio("bgm:victory2:intro","xDeviruchi - 16 bit Fantasy & Adventure (2025)/11 - The Mighty Kingdom.mp3"),this.load.audio("bgm:draw:intro","xDeviruchi - 16 bit Fantasy & Adventure (2025)/16 - The Calm Before The Storm.mp3"),this.load.audio("bgm:defeat:intro","xDeviruchi - 16 bit Fantasy & Adventure (2025)/18 - Never Give Up.mp3"),this.load.audio("bgm:defeat2:intro","xDeviruchi - 16 bit Fantasy & Adventure (2025)/10 - Lost Shrine.mp3")}create(){vt.preload(this),ht.preload(this);for(const t of["battle1","battle2","battle3"]){const s=this.sound.add(`bgm:${t}:intro`,{volume:d.volume_bgm});s.on("complete",()=>{d.bgm=this.sound.add(`bgm:${t}`,{loop:!0,volume:d.volume_bgm})}),d.bgm_map[`bgm:${t}:intro`]=s}for(const t of["victory","victory2","draw","defeat","defeat2"]){const s=this.sound.add(`bgm:${t}:intro`,{volume:d.volume_bgm});d.bgm_map[`bgm:${t}:intro`]=s}this.scene.start(ut.key)}};Tt.key="PreloadScene";let bt=Tt;const At=class At extends H.Scene{constructor(){super(At.key)}preload(){this.load.audio("select","assets/Common/SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_MenuSelections.mp3"),this.load.audio("confirm","assets/Common/SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Confirm.mp3"),this.load.audio("bgm:login:intro","assets/Common/xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Take some rest and eat some food!/xDeviruchi - Take some rest and eat some food! (Intro).wav"),this.load.audio("bgm:login","assets/Common/xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Take some rest and eat some food!/xDeviruchi - Take some rest and eat some food! (Loop).wav")}async create(){const t=this.sound.add("bgm:login:intro",{volume:d.volume_bgm});t.on("complete",()=>{d.bgm=this.sound.add("bgm:login",{loop:!0,volume:d.volume_bgm})}),d.bgm_map["bgm:login:intro"]=t,d.bgm=d.bgm_map["bgm:login:intro"],this.add.text(0,d.HEIGHT,Vt,{...d.style.font_style}).setOrigin(0,1);const s=d.proxy,i=this.add.text(d.WIDTH/2,d.HEIGHT*1/2,"",d.style.font_style).setOrigin(.5).setPadding(d.style.font_padding),e=this.add.text(d.WIDTH/2,d.HEIGHT*2/3,"",d.style.font_style).setOrigin(.5).setPadding(d.style.font_padding).setTint(d.style.color.green_a);s.access_token?s.connect().then(()=>{this.scene.start(bt.key)}).catch(()=>{this.clearSession(),i.setText(`
[에러] 서비스 연결에 실패했습니다.

잠시 후 재시도합니다.
`);let n=60;e.setText(`${n}초`),this.time.addEvent({delay:1e3,callback:()=>{n-=1,n==0&&window.open(d.url,"_self"),e.setText(`${n}초`)},repeat:n})}):s.code?s.createAccessToken().then(()=>{sessionStorage.setItem("CommonStore:proxy:access_token",s.access_token),sessionStorage.setItem("CommonStore:proxy:refresh_token",s.refresh_token),sessionStorage.setItem("CommonStore:proxy:token_type",s.token_type),sessionStorage.setItem("CommonStore:proxy:expires_in",s.expires_in.toString()),sessionStorage.setItem("CommonStore:proxy:scope",s.scope),window.open(d.url,"_self")}).catch(()=>{this.clearSession(),i.setText(`
[에러] 토큰 발급에 실패했습니다.

잠시 후 재시도합니다.
`);let n=60;e.setText(`${n}초`),this.time.addEvent({delay:1e3,callback:()=>{n-=1,n==0&&window.open(d.url,"_self"),e.setText(`${n}초`)},repeat:n})}):(i.setText(`[안내] 치지직 API 사용 권한이 필요합니다.

아래 버튼을 눌러 동의해주세요.
`),e.setText("오케이!"),e.setInteractive({cursor:"pointer"}).on("pointerover",()=>{e.setTint(d.style.color.green_f),this.sound.play("select",{volume:d.volume_effect})}).on("pointerout",()=>{e.setTint(d.style.color.green_a)}).on("pointerup",()=>{const n=d.DEBUG?"e6865229-3d57-4a2a-9cbf-98b47198a3c9":"e04f347f-43a8-4efe-a75c-48fc210f174d",a=d.url,u=`https://chzzk.naver.com/account-interlock?clientId=${n}&redirectUri=${a}&state=skills`;sessionStorage.setItem("CommonStore:proxy:client_id",n),sessionStorage.setItem("CommonStore:proxy:redirect_uri",a),this.sound.play("confirm",{volume:d.volume_effect}),window.open(u,"_self")}))}clearSession(){sessionStorage.getItem("CommonStore:proxy:code"),sessionStorage.getItem("CommonStore:proxy:state"),sessionStorage.getItem("CommonStore:proxy:access_token"),sessionStorage.getItem("CommonStore:proxy:refresh_token"),sessionStorage.getItem("CommonStore:proxy:token_type"),sessionStorage.getItem("CommonStore:proxy:expires_in"),sessionStorage.getItem("CommonStore:proxy:scope")}};At.key="LoginScene";let Ct=At;const Et=class Et extends H.Scene{constructor(){super(Et.key)}preload(){this.load.font("DungGeunMo","https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/DungGeunMo.woff")}create(){this.sound.setVolume(d.volume_master),d.onVolumeMasterChange=()=>{this.sound.setVolume(d.volume_master)},this.scene.start(Ct.key)}};Et.key="BootScene";let Bt=Et;const me={type:H.AUTO,parent:"game-container",width:d.WIDTH,height:d.HEIGHT,transparent:!0,pixelArt:!0,roundPixels:!1,antialias:!1,scale:{mode:H.Scale.FIT,autoCenter:H.Scale.CENTER_BOTH},fullscreenTarget:"game-container",preserveDrawingBuffer:!0,scene:[Bt,Ct,bt,ut,lt,ht]};document.addEventListener("DOMContentLoaded",()=>{new H.Game(me)});
