var Jt=Object.defineProperty;var Lt=d=>{throw TypeError(d)};var Vt=(d,t,e)=>t in d?Jt(d,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[t]=e;var gt=(d,t,e)=>Vt(d,typeof t!="symbol"?t+"":t,e),Rt=(d,t,e)=>t.has(d)||Lt("Cannot "+e);var A=(d,t,e)=>(Rt(d,t,"read from private field"),e?e.call(d):t.get(d)),U=(d,t,e)=>t.has(d)?Lt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(d):t.set(d,e),M=(d,t,e,i)=>(Rt(d,t,"write to private field"),i?i.call(d,e):t.set(d,e),e);import{r as Kt}from"./phaser-BA8NYTic.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();var H=Kt(),O={},yt={};/*! For license information please see index.js.LICENSE.txt */var Yt={218:d=>{var t=1e3,e=60*t,i=60*e,s=24*i;function n(a,l,u){if(!(a<l))return a<1.5*l?Math.floor(a/l)+" "+u:Math.ceil(a/l)+" "+u+"s"}d.exports=function(a,l){l=l||{};var u,f=typeof a;if(f==="string"&&a.length>0)return function(p){if(!((p=String(p)).length>100)){var h=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(h){var o=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*s;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*e;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(a);if(f==="number"&&isNaN(a)===!1)return l.long?n(u=a,s,"day")||n(u,i,"hour")||n(u,e,"minute")||n(u,t,"second")||u+" ms":function(p){return p>=s?Math.round(p/s)+"d":p>=i?Math.round(p/i)+"h":p>=e?Math.round(p/e)+"m":p>=t?Math.round(p/t)+"s":p+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},736:(d,t,e)=>{d.exports=function(i){function s(l){let u,f,p,h=null;function o(...r){if(!o.enabled)return;const c=o,_=Number(new Date),m=_-(u||_);c.diff=m,c.prev=u,c.curr=_,u=_,r[0]=s.coerce(r[0]),typeof r[0]!="string"&&r.unshift("%O");let y=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(v,C)=>{if(v==="%%")return"%";y++;const b=s.formatters[C];if(typeof b=="function"){const x=r[y];v=b.call(c,x),r.splice(y,1),y--}return v}),s.formatArgs.call(c,r),(c.log||s.log).apply(c,r)}return o.namespace=l,o.useColors=s.useColors(),o.color=s.selectColor(l),o.extend=n,o.destroy=s.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(f!==s.namespaces&&(f=s.namespaces,p=s.enabled(l)),p),set:r=>{h=r}}),typeof s.init=="function"&&s.init(o),o}function n(l,u){const f=s(this.namespace+(u===void 0?":":u)+l);return f.log=this.log,f}function a(l,u){let f=0,p=0,h=-1,o=0;for(;f<l.length;)if(p<u.length&&(u[p]===l[f]||u[p]==="*"))u[p]==="*"?(h=p,o=f,p++):(f++,p++);else{if(h===-1)return!1;p=h+1,o++,f=o}for(;p<u.length&&u[p]==="*";)p++;return p===u.length}return s.debug=s,s.default=s,s.coerce=function(l){return l instanceof Error?l.stack||l.message:l},s.disable=function(){const l=[...s.names,...s.skips.map(u=>"-"+u)].join(",");return s.enable(""),l},s.enable=function(l){s.save(l),s.namespaces=l,s.names=[],s.skips=[];const u=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const f of u)f[0]==="-"?s.skips.push(f.slice(1)):s.names.push(f)},s.enabled=function(l){for(const u of s.skips)if(a(l,u))return!1;for(const u of s.names)if(a(l,u))return!0;return!1},s.humanize=e(6585),s.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(i).forEach(l=>{s[l]=i[l]}),s.names=[],s.skips=[],s.formatters={},s.selectColor=function(l){let u=0;for(let f=0;f<l.length;f++)u=(u<<5)-u+l.charCodeAt(f),u|=0;return s.colors[Math.abs(u)%s.colors.length]},s.enable(s.load()),s}},852:(d,t,e)=>{function i(){var s;try{s=t.storage.debug}catch{}return!s&&typeof process<"u"&&"env"in process&&(s=yt.DEBUG),s}(t=d.exports=e(1175)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(s){var n=this.useColors;if(s[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+s[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var a="color: "+this.color;s.splice(1,0,a,"color: inherit");var l=0,u=0;s[0].replace(/%[a-zA-Z%]/g,function(f){f!=="%%"&&(l++,f==="%c"&&(u=l))}),s.splice(u,0,a)}},t.save=function(s){try{s==null?t.storage.removeItem("debug"):t.storage.debug=s}catch{}},t.load=i,t.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(s){try{return JSON.stringify(s)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}},t.enable(i())},969:d=>{function t(){}d.exports=function(e,i,s){var n=!1;return s=s||t,a.count=e,e===0?i():a;function a(l,u){if(a.count<=0)throw new Error("after called too many times");--a.count,l?(n=!0,i(l),i=s):a.count!==0||n||i(null,u)}}},1175:(d,t,e)=>{function i(n){var a;function l(){if(l.enabled){var u=l,f=+new Date,p=f-(a||f);u.diff=p,u.prev=a,u.curr=f,a=f;for(var h=new Array(arguments.length),o=0;o<h.length;o++)h[o]=arguments[o];h[0]=t.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");var r=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,function(c,_){if(c==="%%")return c;r++;var m=t.formatters[_];if(typeof m=="function"){var y=h[r];c=m.call(u,y),h.splice(r,1),r--}return c}),t.formatArgs.call(u,h),(l.log||t.log||console.log.bind(console)).apply(u,h)}}return l.namespace=n,l.enabled=t.enabled(n),l.useColors=t.useColors(),l.color=function(u){var f,p=0;for(f in u)p=(p<<5)-p+u.charCodeAt(f),p|=0;return t.colors[Math.abs(p)%t.colors.length]}(n),l.destroy=s,typeof t.init=="function"&&t.init(l),t.instances.push(l),l}function s(){var n=t.instances.indexOf(this);return n!==-1&&(t.instances.splice(n,1),!0)}(t=d.exports=i.debug=i.default=i).coerce=function(n){return n instanceof Error?n.stack||n.message:n},t.disable=function(){t.enable("")},t.enable=function(n){var a;t.save(n),t.names=[],t.skips=[];var l=(typeof n=="string"?n:"").split(/[\s,]+/),u=l.length;for(a=0;a<u;a++)l[a]&&((n=l[a].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+n.substr(1)+"$")):t.names.push(new RegExp("^"+n+"$")));for(a=0;a<t.instances.length;a++){var f=t.instances[a];f.enabled=t.enabled(f.namespace)}},t.enabled=function(n){if(n[n.length-1]==="*")return!0;var a,l;for(a=0,l=t.skips.length;a<l;a++)if(t.skips[a].test(n))return!1;for(a=0,l=t.names.length;a<l;a++)if(t.names[a].test(n))return!0;return!1},t.humanize=e(218),t.instances=[],t.names=[],t.skips=[],t.formatters={}},2121:d=>{var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={},s=0,n=0;function a(u){var f="";do f=e[u%64]+f,u=Math.floor(u/64);while(u>0);return f}function l(){var u=a(+new Date);return u!==t?(s=0,t=u):u+"."+a(s++)}for(;n<64;n++)i[e[n]]=n;l.encode=a,l.decode=function(u){var f=0;for(n=0;n<u.length;n++)f=64*f+i[u.charAt(n)];return f},d.exports=l},2225:(d,t,e)=>{var i=e(4634),s=e(8247),n=Object.prototype.toString,a=typeof O.Blob=="function"||n.call(O.Blob)==="[object BlobConstructor]",l=typeof O.File=="function"||n.call(O.File)==="[object FileConstructor]";function u(p,h){if(!p)return p;if(s(p)){var o={_placeholder:!0,num:h.length};return h.push(p),o}if(i(p)){for(var r=new Array(p.length),c=0;c<p.length;c++)r[c]=u(p[c],h);return r}if(typeof p=="object"&&!(p instanceof Date)){for(var _ in r={},p)r[_]=u(p[_],h);return r}return p}function f(p,h){if(!p)return p;if(p&&p._placeholder)return h[p.num];if(i(p))for(var o=0;o<p.length;o++)p[o]=f(p[o],h);else if(typeof p=="object")for(var r in p)p[r]=f(p[r],h);return p}t.deconstructPacket=function(p){var h=[],o=p.data,r=p;return r.data=u(o,h),r.attachments=h.length,{packet:r,buffers:h}},t.reconstructPacket=function(p,h){return p.data=f(p.data,h),p.attachments=void 0,p},t.removeBlobs=function(p,h){var o=0,r=p;(function c(_,m,y){if(!_)return _;if(a&&_ instanceof Blob||l&&_ instanceof File){o++;var v=new FileReader;v.onload=function(){y?y[m]=this.result:r=this.result,--o||h(r)},v.readAsArrayBuffer(_)}else if(i(_))for(var C=0;C<_.length;C++)c(_[C],C,_);else if(typeof _=="object"&&!s(_))for(var b in _)c(_[b],b,_)})(r),o||h(r)}},2252:(d,t,e)=>{var i=e(5911),s=e(2370);d.exports=f;var n,a=/\n/g,l=/\\n/g;function u(){}function f(p){i.call(this,p),this.query=this.query||{},n||(O.___eio||(O.___eio=[]),n=O.___eio),this.index=n.length;var h=this;n.push(function(o){h.onData(o)}),this.query.j=this.index,O.document&&O.addEventListener&&O.addEventListener("beforeunload",function(){h.script&&(h.script.onerror=u)},!1)}s(f,i),f.prototype.supportsBinary=!1,f.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},f.prototype.doPoll=function(){var p=this,h=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),h.async=!0,h.src=this.uri(),h.onerror=function(r){p.onError("jsonp poll error",r)};var o=document.getElementsByTagName("script")[0];o?o.parentNode.insertBefore(h,o):(document.head||document.body).appendChild(h),this.script=h,typeof navigator<"u"&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var r=document.createElement("iframe");document.body.appendChild(r),document.body.removeChild(r)},100)},f.prototype.doWrite=function(p,h){var o=this;if(!this.form){var r,c=document.createElement("form"),_=document.createElement("textarea"),m=this.iframeId="eio_iframe_"+this.index;c.className="socketio",c.style.position="absolute",c.style.top="-1000px",c.style.left="-1000px",c.target=m,c.method="POST",c.setAttribute("accept-charset","utf-8"),_.name="d",c.appendChild(_),document.body.appendChild(c),this.form=c,this.area=_}function y(){v(),h()}function v(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(b){o.onError("jsonp polling iframe removal error",b)}try{var C='<iframe src="javascript:0" name="'+o.iframeId+'">';r=document.createElement(C)}catch{(r=document.createElement("iframe")).name=o.iframeId,r.src="javascript:0"}r.id=o.iframeId,o.form.appendChild(r),o.iframe=r}this.form.action=this.uri(),v(),p=p.replace(l,`\\
`),this.area.value=p.replace(a,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){o.iframe.readyState==="complete"&&y()}:this.iframe.onload=y}},2370:d=>{d.exports=function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},2505:d=>{d.exports=Object.keys||function(t){var e=[],i=Object.prototype.hasOwnProperty;for(var s in t)i.call(t,s)&&e.push(s);return e}},2672:(d,t,e)=>{var i=e(3401),s=e(5971);function n(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.forceNode=a.forceNode,this.extraHeaders=a.extraHeaders,this.localAddress=a.localAddress}d.exports=n,s(n.prototype),n.prototype.onError=function(a,l){var u=new Error(a);return u.type="TransportError",u.description=l,this.emit("error",u),this},n.prototype.open=function(){return this.readyState!=="closed"&&this.readyState!==""||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this},n.prototype.send=function(a){if(this.readyState!=="open")throw new Error("Transport not open");this.write(a)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(a){var l=i.decodePacket(a,this.socket.binaryType);this.onPacket(l)},n.prototype.onPacket=function(a){this.emit("packet",a)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},2902:d=>{var t=1e3,e=60*t,i=60*e,s=24*i;function n(a,l,u){if(!(a<l))return a<1.5*l?Math.floor(a/l)+" "+u:Math.ceil(a/l)+" "+u+"s"}d.exports=function(a,l){l=l||{};var u,f=typeof a;if(f==="string"&&a.length>0)return function(p){if(!((p=String(p)).length>100)){var h=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(h){var o=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*s;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*e;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(a);if(f==="number"&&isNaN(a)===!1)return l.long?n(u=a,s,"day")||n(u,i,"hour")||n(u,e,"minute")||n(u,t,"second")||u+" ms":function(p){return p>=s?Math.round(p/s)+"d":p>=i?Math.round(p/i)+"h":p>=e?Math.round(p/e)+"m":p>=t?Math.round(p/t)+"s":p+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},3051:(d,t,e)=>{var i=e(8383);d.exports=function(s){var n=s.xdomain,a=s.xscheme,l=s.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!n||i))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!a&&l)return new XDomainRequest}catch{}if(!n)try{return new O[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}},3059:d=>{function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}d.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var i=Math.random(),s=Math.floor(i*this.jitter*e);e=1&Math.floor(10*i)?e+s:e-s}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},3097:d=>{var t=1e3,e=60*t,i=60*e,s=24*i;function n(a,l,u){if(!(a<l))return a<1.5*l?Math.floor(a/l)+" "+u:Math.ceil(a/l)+" "+u+"s"}d.exports=function(a,l){l=l||{};var u,f=typeof a;if(f==="string"&&a.length>0)return function(p){if(!((p=String(p)).length>100)){var h=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(h){var o=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*s;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*e;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(a);if(f==="number"&&isNaN(a)===!1)return l.long?n(u=a,s,"day")||n(u,i,"hour")||n(u,e,"minute")||n(u,t,"second")||u+" ms":function(p){return p>=s?Math.round(p/s)+"d":p>=i?Math.round(p/i)+"h":p>=e?Math.round(p/e)+"m":p>=t?Math.round(p/t)+"s":p+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},3118:d=>{var t=t!==void 0?t:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"&&MozBlobBuilder,e=function(){try{return new Blob(["hi"]).size===2}catch{return!1}}(),i=e&&function(){try{return new Blob([new Uint8Array([1,2])]).size===2}catch{return!1}}(),s=t&&t.prototype.append&&t.prototype.getBlob;function n(u){return u.map(function(f){if(f.buffer instanceof ArrayBuffer){var p=f.buffer;if(f.byteLength!==p.byteLength){var h=new Uint8Array(f.byteLength);h.set(new Uint8Array(p,f.byteOffset,f.byteLength)),p=h.buffer}return p}return f})}function a(u,f){f=f||{};var p=new t;return n(u).forEach(function(h){p.append(h)}),f.type?p.getBlob(f.type):p.getBlob()}function l(u,f){return new Blob(n(u),f||{})}typeof Blob<"u"&&(a.prototype=Blob.prototype,l.prototype=Blob.prototype),d.exports=e?i?Blob:l:s?a:void 0},3344:d=>{d.exports=function(t,e,i){var s=t.byteLength;if(e=e||0,i=i||s,t.slice)return t.slice(e,i);if(e<0&&(e+=s),i<0&&(i+=s),i>s&&(i=s),e>=s||e>=i||s===0)return new ArrayBuffer(0);for(var n=new Uint8Array(t),a=new Uint8Array(i-e),l=e,u=0;l<i;l++,u++)a[u]=n[l];return a.buffer}},3357:(d,t,e)=>{d.exports=e(7292),d.exports.parser=e(3401)},3371:(d,t)=>{(function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256),s=0;s<64;s++)i[e.charCodeAt(s)]=s;t.encode=function(n){var a,l=new Uint8Array(n),u=l.length,f="";for(a=0;a<u;a+=3)f+=e[l[a]>>2],f+=e[(3&l[a])<<4|l[a+1]>>4],f+=e[(15&l[a+1])<<2|l[a+2]>>6],f+=e[63&l[a+2]];return u%3==2?f=f.substring(0,f.length-1)+"=":u%3==1&&(f=f.substring(0,f.length-2)+"=="),f},t.decode=function(n){var a,l,u,f,p,h=.75*n.length,o=n.length,r=0;n[n.length-1]==="="&&(h--,n[n.length-2]==="="&&h--);var c=new ArrayBuffer(h),_=new Uint8Array(c);for(a=0;a<o;a+=4)l=i[n.charCodeAt(a)],u=i[n.charCodeAt(a+1)],f=i[n.charCodeAt(a+2)],p=i[n.charCodeAt(a+3)],_[r++]=l<<2|u>>4,_[r++]=(15&u)<<4|f>>2,_[r++]=(3&f)<<6|63&p;return c}})()},3401:(d,t,e)=>{var i,s=e(2505),n=e(8839),a=e(3344),l=e(969),u=e(8758);typeof ArrayBuffer<"u"&&(i=e(3371));var f=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),p=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),h=f||p;t.protocol=3;var o=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},r=s(o),c={type:"error",data:"parser error"},_=e(3118);function m(y,v,C){for(var b=new Array(y.length),x=l(y.length,C),w=function(k,E,F){v(E,function(I,D){b[k]=D,F(I,b)})},T=0;T<y.length;T++)w(T,y[T],x)}t.encodePacket=function(y,v,C,b){typeof v=="function"&&(b=v,v=!1),typeof C=="function"&&(b=C,C=null);var x=y.data===void 0?void 0:y.data.buffer||y.data;if(typeof ArrayBuffer<"u"&&x instanceof ArrayBuffer)return function(T,k,E){if(!k)return t.encodeBase64Packet(T,E);var F=T.data,I=new Uint8Array(F),D=new Uint8Array(1+F.byteLength);D[0]=o[T.type];for(var P=0;P<I.length;P++)D[P+1]=I[P];return E(D.buffer)}(y,v,b);if(_!==void 0&&x instanceof _)return function(T,k,E){if(!k)return t.encodeBase64Packet(T,E);if(h)return function(I,D,P){if(!D)return t.encodeBase64Packet(I,P);var R=new FileReader;return R.onload=function(){t.encodePacket({type:I.type,data:R.result},D,!0,P)},R.readAsArrayBuffer(I.data)}(T,k,E);var F=new Uint8Array(1);return F[0]=o[T.type],E(new _([F.buffer,T.data]))}(y,v,b);if(x&&x.base64)return function(T,k){return k("b"+t.packets[T.type]+T.data.data)}(y,b);var w=o[y.type];return y.data!==void 0&&(w+=C?u.encode(String(y.data),{strict:!1}):String(y.data)),b(""+w)},t.encodeBase64Packet=function(y,v){var C,b="b"+t.packets[y.type];if(_!==void 0&&y.data instanceof _){var x=new FileReader;return x.onload=function(){var E=x.result.split(",")[1];v(b+E)},x.readAsDataURL(y.data)}try{C=String.fromCharCode.apply(null,new Uint8Array(y.data))}catch{for(var w=new Uint8Array(y.data),T=new Array(w.length),k=0;k<w.length;k++)T[k]=w[k];C=String.fromCharCode.apply(null,T)}return b+=btoa(C),v(b)},t.decodePacket=function(y,v,C){if(y===void 0)return c;if(typeof y=="string"){if(y.charAt(0)==="b")return t.decodeBase64Packet(y.substr(1),v);if(C&&(y=function(w){try{w=u.decode(w,{strict:!1})}catch{return!1}return w}(y))===!1)return c;var b=y.charAt(0);return Number(b)==b&&r[b]?y.length>1?{type:r[b],data:y.substring(1)}:{type:r[b]}:c}b=new Uint8Array(y)[0];var x=a(y,1);return _&&v==="blob"&&(x=new _([x])),{type:r[b],data:x}},t.decodeBase64Packet=function(y,v){var C=r[y.charAt(0)];if(!i)return{type:C,data:{base64:!0,data:y.substr(1)}};var b=i.decode(y.substr(1));return v==="blob"&&_&&(b=new _([b])),{type:C,data:b}},t.encodePayload=function(y,v,C){typeof v=="function"&&(C=v,v=null);var b=n(y);return v&&b?_&&!h?t.encodePayloadAsBlob(y,C):t.encodePayloadAsArrayBuffer(y,C):y.length?void m(y,function(x,w){t.encodePacket(x,!!b&&v,!1,function(T){w(null,function(k){return k.length+":"+k}(T))})},function(x,w){return C(w.join(""))}):C("0:")},t.decodePayload=function(y,v,C){if(typeof y!="string")return t.decodePayloadAsBinary(y,v,C);var b;if(typeof v=="function"&&(C=v,v=null),y==="")return C(c,0,1);for(var x,w,T="",k=0,E=y.length;k<E;k++){var F=y.charAt(k);if(F===":"){if(T===""||T!=(x=Number(T))||T!=(w=y.substr(k+1,x)).length)return C(c,0,1);if(w.length){if(b=t.decodePacket(w,v,!1),c.type===b.type&&c.data===b.data)return C(c,0,1);if(C(b,k+x,E)===!1)return}k+=x,T=""}else T+=F}return T!==""?C(c,0,1):void 0},t.encodePayloadAsArrayBuffer=function(y,v){if(!y.length)return v(new ArrayBuffer(0));m(y,function(C,b){t.encodePacket(C,!0,!0,function(x){return b(null,x)})},function(C,b){var x=b.reduce(function(k,E){var F;return k+(F=typeof E=="string"?E.length:E.byteLength).toString().length+F+2},0),w=new Uint8Array(x),T=0;return b.forEach(function(k){var E=typeof k=="string",F=k;if(E){for(var I=new Uint8Array(k.length),D=0;D<k.length;D++)I[D]=k.charCodeAt(D);F=I.buffer}w[T++]=E?0:1;var P=F.byteLength.toString();for(D=0;D<P.length;D++)w[T++]=parseInt(P[D]);for(w[T++]=255,I=new Uint8Array(F),D=0;D<I.length;D++)w[T++]=I[D]}),v(w.buffer)})},t.encodePayloadAsBlob=function(y,v){m(y,function(C,b){t.encodePacket(C,!0,!0,function(x){var w=new Uint8Array(1);if(w[0]=1,typeof x=="string"){for(var T=new Uint8Array(x.length),k=0;k<x.length;k++)T[k]=x.charCodeAt(k);x=T.buffer,w[0]=0}var E=(x instanceof ArrayBuffer?x.byteLength:x.size).toString(),F=new Uint8Array(E.length+1);for(k=0;k<E.length;k++)F[k]=parseInt(E[k]);if(F[E.length]=255,_){var I=new _([w.buffer,F.buffer,x]);b(null,I)}})},function(C,b){return v(new _(b))})},t.decodePayloadAsBinary=function(y,v,C){typeof v=="function"&&(C=v,v=null);for(var b=y,x=[];b.byteLength>0;){for(var w=new Uint8Array(b),T=w[0]===0,k="",E=1;w[E]!==255;E++){if(k.length>310)return C(c,0,1);k+=w[E]}b=a(b,2+k.length),k=parseInt(k);var F=a(b,0,k);if(T)try{F=String.fromCharCode.apply(null,new Uint8Array(F))}catch{var I=new Uint8Array(F);for(F="",E=0;E<I.length;E++)F+=String.fromCharCode(I[E])}x.push(F),b=a(b,k)}var D=x.length;x.forEach(function(P,R){C(t.decodePacket(P,v,!0),R,D)})}},4258:d=>{var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];d.exports=function(i){var s=i,n=i.indexOf("["),a=i.indexOf("]");n!=-1&&a!=-1&&(i=i.substring(0,n)+i.substring(n,a).replace(/:/g,";")+i.substring(a,i.length));for(var l=t.exec(i||""),u={},f=14;f--;)u[e[f]]=l[f]||"";return n!=-1&&a!=-1&&(u.source=s,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u}},4634:d=>{var t={}.toString;d.exports=Array.isArray||function(e){return t.call(e)=="[object Array]"}},4745:d=>{d.exports=function(t,e,i){return t.on(e,i),{destroy:function(){t.removeListener(e,i)}}}},5074:(d,t,e)=>{var i=e(852)("socket.io-parser"),s=e(5971),n=e(8839),a=e(2225),l=e(4634),u=e(8247);function f(){}function p(c){var _=""+c.type;return t.BINARY_EVENT!==c.type&&t.BINARY_ACK!==c.type||(_+=c.attachments+"-"),c.nsp&&c.nsp!=="/"&&(_+=c.nsp+","),c.id!=null&&(_+=c.id),c.data!=null&&(_+=JSON.stringify(c.data)),i("encoded %j as %s",c,_),_}function h(){this.reconstructor=null}function o(c){this.reconPack=c,this.buffers=[]}function r(c){return{type:t.ERROR,data:"parser error: "+c}}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=f,t.Decoder=h,f.prototype.encode=function(c,_){c.type!==t.EVENT&&c.type!==t.ACK||!n(c.data)||(c.type=c.type===t.EVENT?t.BINARY_EVENT:t.BINARY_ACK),i("encoding packet %j",c),t.BINARY_EVENT===c.type||t.BINARY_ACK===c.type?function(m,y){a.removeBlobs(m,function(v){var C=a.deconstructPacket(v),b=p(C.packet),x=C.buffers;x.unshift(b),y(x)})}(c,_):_([p(c)])},s(h.prototype),h.prototype.add=function(c){var _;if(typeof c=="string")_=function(m){var y=0,v={type:Number(m.charAt(0))};if(t.types[v.type]==null)return r("unknown packet type "+v.type);if(t.BINARY_EVENT===v.type||t.BINARY_ACK===v.type){for(var C="";m.charAt(++y)!=="-"&&(C+=m.charAt(y),y!=m.length););if(C!=Number(C)||m.charAt(y)!=="-")throw new Error("Illegal attachments");v.attachments=Number(C)}if(m.charAt(y+1)==="/")for(v.nsp="";++y&&(x=m.charAt(y))!==","&&(v.nsp+=x,y!==m.length););else v.nsp="/";var b=m.charAt(y+1);if(b!==""&&Number(b)==b){for(v.id="";++y;){var x;if((x=m.charAt(y))==null||Number(x)!=x){--y;break}if(v.id+=m.charAt(y),y===m.length)break}v.id=Number(v.id)}if(m.charAt(++y)){var w=function(T){try{return JSON.parse(T)}catch{return!1}}(m.substr(y));if(w===!1||v.type!==t.ERROR&&!l(w))return r("invalid payload");v.data=w}return i("decoded %s as %j",m,v),v}(c),t.BINARY_EVENT===_.type||t.BINARY_ACK===_.type?(this.reconstructor=new o(_),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",_)):this.emit("decoded",_);else{if(!u(c)&&!c.base64)throw new Error("Unknown type: "+c);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(_=this.reconstructor.takeBinaryData(c))&&(this.reconstructor=null,this.emit("decoded",_))}},h.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},o.prototype.takeBinaryData=function(c){if(this.buffers.push(c),this.buffers.length===this.reconPack.attachments){var _=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),_}return null},o.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},5660:()=>{},5911:(d,t,e)=>{var i=e(2672),s=e(9140),n=e(3401),a=e(2370),l=e(2121),u=e(6617)("engine.io-client:polling");d.exports=p;var f=new(e(3051))({xdomain:!1}).responseType!=null;function p(h){var o=h&&h.forceBase64;f&&!o||(this.supportsBinary=!1),i.call(this,h)}a(p,i),p.prototype.name="polling",p.prototype.doOpen=function(){this.poll()},p.prototype.pause=function(h){var o=this;function r(){u("paused"),o.readyState="paused",h()}if(this.readyState="pausing",this.polling||!this.writable){var c=0;this.polling&&(u("we are currently polling - waiting to pause"),c++,this.once("pollComplete",function(){u("pre-pause polling complete"),--c||r()})),this.writable||(u("we are currently writing - waiting to pause"),c++,this.once("drain",function(){u("pre-pause writing complete"),--c||r()}))}else r()},p.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},p.prototype.onData=function(h){var o=this;u("polling got data %s",h),n.decodePayload(h,this.socket.binaryType,function(r,c,_){if(o.readyState==="opening"&&o.onOpen(),r.type==="close")return o.onClose(),!1;o.onPacket(r)}),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},p.prototype.doClose=function(){var h=this;function o(){u("writing close packet"),h.write([{type:"close"}])}this.readyState==="open"?(u("transport open - closing"),o()):(u("transport not open - deferring close"),this.once("open",o))},p.prototype.write=function(h){var o=this;this.writable=!1;var r=function(){o.writable=!0,o.emit("drain")};n.encodePayload(h,this.supportsBinary,function(c){o.doWrite(c,r)})},p.prototype.uri=function(){var h=this.query||{},o=this.secure?"https":"http",r="";return this.timestampRequests!==!1&&(h[this.timestampParam]=l()),this.supportsBinary||h.sid||(h.b64=1),h=s.encode(h),this.port&&(o==="https"&&Number(this.port)!==443||o==="http"&&Number(this.port)!==80)&&(r=":"+this.port),h.length&&(h="?"+h),o+"://"+(this.hostname.indexOf(":")!==-1?"["+this.hostname+"]":this.hostname)+r+this.path+h}},5971:d=>{function t(e){if(e)return function(i){for(var s in t.prototype)i[s]=t.prototype[s];return i}(e)}d.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(i),this},t.prototype.once=function(e,i){function s(){this.off(e,s),i.apply(this,arguments)}return s.fn=i,this.on(e,s),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s,n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var a=0;a<n.length;a++)if((s=n[a])===i||s.fn===i){n.splice(a,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var i=[].slice.call(arguments,1),s=this._callbacks["$"+e];if(s)for(var n=0,a=(s=s.slice(0)).length;n<a;++n)s[n].apply(this,i);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},6585:d=>{var t=1e3,e=60*t,i=60*e,s=24*i,n=7*s;function a(l,u,f,p){var h=u>=1.5*f;return Math.round(l/f)+" "+p+(h?"s":"")}d.exports=function(l,u){u=u||{};var f,p,h=typeof l;if(h==="string"&&l.length>0)return function(o){if(!((o=String(o)).length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(o);if(r){var c=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*c;case"weeks":case"week":case"w":return c*n;case"days":case"day":case"d":return c*s;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*e;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}(l);if(h==="number"&&isFinite(l))return u.long?(f=l,(p=Math.abs(f))>=s?a(f,p,s,"day"):p>=i?a(f,p,i,"hour"):p>=e?a(f,p,e,"minute"):p>=t?a(f,p,t,"second"):f+" ms"):function(o){var r=Math.abs(o);return r>=s?Math.round(o/s)+"d":r>=i?Math.round(o/i)+"h":r>=e?Math.round(o/e)+"m":r>=t?Math.round(o/t)+"s":o+"ms"}(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))}},6617:(d,t,e)=>{function i(){var s;try{s=t.storage.debug}catch{}return!s&&typeof process<"u"&&"env"in process&&(s=yt.DEBUG),s}(t=d.exports=e(9110)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(s){var n=this.useColors;if(s[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+s[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var a="color: "+this.color;s.splice(1,0,a,"color: inherit");var l=0,u=0;s[0].replace(/%[a-zA-Z%]/g,function(f){f!=="%%"&&(l++,f==="%c"&&(u=l))}),s.splice(u,0,a)}},t.save=function(s){try{s==null?t.storage.removeItem("debug"):t.storage.debug=s}catch{}},t.load=i,t.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(s){try{return JSON.stringify(s)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}},t.enable(i())},6855:(d,t,e)=>{var i,s=e(2672),n=e(3401),a=e(9140),l=e(2370),u=e(2121),f=e(6617)("engine.io-client:websocket"),p=O.WebSocket||O.MozWebSocket;if(typeof window>"u")try{i=e(5660)}catch{}var h=p;function o(r){r&&r.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=r.perMessageDeflate,this.usingBrowserWebSocket=p&&!r.forceNode,this.protocols=r.protocols,this.usingBrowserWebSocket||(h=i),s.call(this,r)}h||typeof window<"u"||(h=i),d.exports=o,l(o,s),o.prototype.name="websocket",o.prototype.supportsBinary=!0,o.prototype.doOpen=function(){if(this.check()){var r=this.uri(),c=this.protocols,_={agent:this.agent,perMessageDeflate:this.perMessageDeflate};_.pfx=this.pfx,_.key=this.key,_.passphrase=this.passphrase,_.cert=this.cert,_.ca=this.ca,_.ciphers=this.ciphers,_.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(_.headers=this.extraHeaders),this.localAddress&&(_.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?c?new h(r,c):new h(r):new h(r,c,_)}catch(m){return this.emit("error",m)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},o.prototype.addEventListeners=function(){var r=this;this.ws.onopen=function(){r.onOpen()},this.ws.onclose=function(){r.onClose()},this.ws.onmessage=function(c){r.onData(c.data)},this.ws.onerror=function(c){r.onError("websocket error",c)}},o.prototype.write=function(r){var c=this;this.writable=!1;for(var _=r.length,m=0,y=_;m<y;m++)(function(v){n.encodePacket(v,c.supportsBinary,function(C){if(!c.usingBrowserWebSocket){var b={};v.options&&(b.compress=v.options.compress),c.perMessageDeflate&&(typeof C=="string"?O.Buffer.byteLength(C):C.length)<c.perMessageDeflate.threshold&&(b.compress=!1)}try{c.usingBrowserWebSocket?c.ws.send(C):c.ws.send(C,b)}catch{f("websocket closed before onclose event")}--_||(c.emit("flush"),setTimeout(function(){c.writable=!0,c.emit("drain")},0))})})(r[m])},o.prototype.onClose=function(){s.prototype.onClose.call(this)},o.prototype.doClose=function(){this.ws!==void 0&&this.ws.close()},o.prototype.uri=function(){var r=this.query||{},c=this.secure?"wss":"ws",_="";return this.port&&(c==="wss"&&Number(this.port)!==443||c==="ws"&&Number(this.port)!==80)&&(_=":"+this.port),this.timestampRequests&&(r[this.timestampParam]=u()),this.supportsBinary||(r.b64=1),(r=a.encode(r)).length&&(r="?"+r),c+"://"+(this.hostname.indexOf(":")!==-1?"["+this.hostname+"]":this.hostname)+_+this.path+r},o.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===o.prototype.name)}},6938:d=>{var t=[].indexOf;d.exports=function(e,i){if(t)return e.indexOf(i);for(var s=0;s<e.length;++s)if(e[s]===i)return s;return-1}},7007:d=>{var t,e=typeof Reflect=="object"?Reflect:null,i=e&&typeof e.apply=="function"?e.apply:function(m,y,v){return Function.prototype.apply.call(m,y,v)};t=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:function(m){return Object.getOwnPropertyNames(m)};var s=Number.isNaN||function(m){return m!=m};function n(){n.init.call(this)}d.exports=n,d.exports.once=function(m,y){return new Promise(function(v,C){function b(w){m.removeListener(y,x),C(w)}function x(){typeof m.removeListener=="function"&&m.removeListener("error",b),v([].slice.call(arguments))}_(m,y,x,{once:!0}),y!=="error"&&function(w,T){typeof w.on=="function"&&_(w,"error",T,{once:!0})}(m,b)})},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var a=10;function l(m){if(typeof m!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof m)}function u(m){return m._maxListeners===void 0?n.defaultMaxListeners:m._maxListeners}function f(m,y,v,C){var b,x,w,T;if(l(v),(x=m._events)===void 0?(x=m._events=Object.create(null),m._eventsCount=0):(x.newListener!==void 0&&(m.emit("newListener",y,v.listener?v.listener:v),x=m._events),w=x[y]),w===void 0)w=x[y]=v,++m._eventsCount;else if(typeof w=="function"?w=x[y]=C?[v,w]:[w,v]:C?w.unshift(v):w.push(v),(b=u(m))>0&&w.length>b&&!w.warned){w.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+w.length+" "+String(y)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=m,k.type=y,k.count=w.length,T=k,console&&console.warn&&console.warn(T)}return m}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(m,y,v){var C={fired:!1,wrapFn:void 0,target:m,type:y,listener:v},b=p.bind(C);return b.listener=v,C.wrapFn=b,b}function o(m,y,v){var C=m._events;if(C===void 0)return[];var b=C[y];return b===void 0?[]:typeof b=="function"?v?[b.listener||b]:[b]:v?function(x){for(var w=new Array(x.length),T=0;T<w.length;++T)w[T]=x[T].listener||x[T];return w}(b):c(b,b.length)}function r(m){var y=this._events;if(y!==void 0){var v=y[m];if(typeof v=="function")return 1;if(v!==void 0)return v.length}return 0}function c(m,y){for(var v=new Array(y),C=0;C<y;++C)v[C]=m[C];return v}function _(m,y,v,C){if(typeof m.on=="function")C.once?m.once(y,v):m.on(y,v);else{if(typeof m.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof m);m.addEventListener(y,function b(x){C.once&&m.removeEventListener(y,b),v(x)})}}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(m){if(typeof m!="number"||m<0||s(m))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+m+".");a=m}}),n.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||s(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this},n.prototype.getMaxListeners=function(){return u(this)},n.prototype.emit=function(m){for(var y=[],v=1;v<arguments.length;v++)y.push(arguments[v]);var C=m==="error",b=this._events;if(b!==void 0)C=C&&b.error===void 0;else if(!C)return!1;if(C){var x;if(y.length>0&&(x=y[0]),x instanceof Error)throw x;var w=new Error("Unhandled error."+(x?" ("+x.message+")":""));throw w.context=x,w}var T=b[m];if(T===void 0)return!1;if(typeof T=="function")i(T,this,y);else{var k=T.length,E=c(T,k);for(v=0;v<k;++v)i(E[v],this,y)}return!0},n.prototype.addListener=function(m,y){return f(this,m,y,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(m,y){return f(this,m,y,!0)},n.prototype.once=function(m,y){return l(y),this.on(m,h(this,m,y)),this},n.prototype.prependOnceListener=function(m,y){return l(y),this.prependListener(m,h(this,m,y)),this},n.prototype.removeListener=function(m,y){var v,C,b,x,w;if(l(y),(C=this._events)===void 0)return this;if((v=C[m])===void 0)return this;if(v===y||v.listener===y)--this._eventsCount===0?this._events=Object.create(null):(delete C[m],C.removeListener&&this.emit("removeListener",m,v.listener||y));else if(typeof v!="function"){for(b=-1,x=v.length-1;x>=0;x--)if(v[x]===y||v[x].listener===y){w=v[x].listener,b=x;break}if(b<0)return this;b===0?v.shift():function(T,k){for(;k+1<T.length;k++)T[k]=T[k+1];T.pop()}(v,b),v.length===1&&(C[m]=v[0]),C.removeListener!==void 0&&this.emit("removeListener",m,w||y)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(m){var y,v,C;if((v=this._events)===void 0)return this;if(v.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):v[m]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete v[m]),this;if(arguments.length===0){var b,x=Object.keys(v);for(C=0;C<x.length;++C)(b=x[C])!=="removeListener"&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(y=v[m])=="function")this.removeListener(m,y);else if(y!==void 0)for(C=y.length-1;C>=0;C--)this.removeListener(m,y[C]);return this},n.prototype.listeners=function(m){return o(this,m,!0)},n.prototype.rawListeners=function(m){return o(this,m,!1)},n.listenerCount=function(m,y){return typeof m.listenerCount=="function"?m.listenerCount(y):r.call(m,y)},n.prototype.listenerCount=r,n.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7292:(d,t,e)=>{var i=e(8520),s=e(5971),n=e(6617)("engine.io-client:socket"),a=e(6938),l=e(3401),u=e(4258),f=e(9140);function p(h,o){if(!(this instanceof p))return new p(h,o);o=o||{},h&&typeof h=="object"&&(o=h,h=null),h?(h=u(h),o.hostname=h.host,o.secure=h.protocol==="https"||h.protocol==="wss",o.port=h.port,h.query&&(o.query=h.query)):o.host&&(o.hostname=u(o.host).host),this.secure=o.secure!=null?o.secure:O.location&&location.protocol==="https:",o.hostname&&!o.port&&(o.port=this.secure?"443":"80"),this.agent=o.agent||!1,this.hostname=o.hostname||(O.location?location.hostname:"localhost"),this.port=o.port||(O.location&&location.port?location.port:this.secure?443:80),this.query=o.query||{},typeof this.query=="string"&&(this.query=f.decode(this.query)),this.upgrade=o.upgrade!==!1,this.path=(o.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!o.forceJSONP,this.jsonp=o.jsonp!==!1,this.forceBase64=!!o.forceBase64,this.enablesXDR=!!o.enablesXDR,this.timestampParam=o.timestampParam||"t",this.timestampRequests=o.timestampRequests,this.transports=o.transports||["polling","websocket"],this.transportOptions=o.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=o.policyPort||843,this.rememberUpgrade=o.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=o.onlyBinaryUpgrades,this.perMessageDeflate=o.perMessageDeflate!==!1&&(o.perMessageDeflate||{}),this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=o.pfx||null,this.key=o.key||null,this.passphrase=o.passphrase||null,this.cert=o.cert||null,this.ca=o.ca||null,this.ciphers=o.ciphers||null,this.rejectUnauthorized=o.rejectUnauthorized===void 0||o.rejectUnauthorized,this.forceNode=!!o.forceNode;var r=typeof O=="object"&&O;r.global===r&&(o.extraHeaders&&Object.keys(o.extraHeaders).length>0&&(this.extraHeaders=o.extraHeaders),o.localAddress&&(this.localAddress=o.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}d.exports=p,p.priorWebsocketSuccess=!1,s(p.prototype),p.protocol=l.protocol,p.Socket=p,p.Transport=e(2672),p.transports=e(8520),p.parser=e(3401),p.prototype.createTransport=function(h){n('creating transport "%s"',h);var o=function(c){var _={};for(var m in c)c.hasOwnProperty(m)&&(_[m]=c[m]);return _}(this.query);o.EIO=l.protocol,o.transport=h;var r=this.transportOptions[h]||{};return this.id&&(o.sid=this.id),new i[h]({query:o,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0})},p.prototype.open=function(){var h;if(this.rememberUpgrade&&p.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)h="websocket";else{if(this.transports.length===0){var o=this;return void setTimeout(function(){o.emit("error","No transports available")},0)}h=this.transports[0]}this.readyState="opening";try{h=this.createTransport(h)}catch{return this.transports.shift(),void this.open()}h.open(),this.setTransport(h)},p.prototype.setTransport=function(h){n("setting transport %s",h.name);var o=this;this.transport&&(n("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=h,h.on("drain",function(){o.onDrain()}).on("packet",function(r){o.onPacket(r)}).on("error",function(r){o.onError(r)}).on("close",function(){o.onClose("transport close")})},p.prototype.probe=function(h){n('probing transport "%s"',h);var o=this.createTransport(h,{probe:1}),r=!1,c=this;function _(){if(c.onlyBinaryUpgrades){var w=!this.supportsBinary&&c.transport.supportsBinary;r=r||w}r||(n('probe transport "%s" opened',h),o.send([{type:"ping",data:"probe"}]),o.once("packet",function(T){if(!r)if(T.type==="pong"&&T.data==="probe"){if(n('probe transport "%s" pong',h),c.upgrading=!0,c.emit("upgrading",o),!o)return;p.priorWebsocketSuccess=o.name==="websocket",n('pausing current transport "%s"',c.transport.name),c.transport.pause(function(){r||c.readyState!=="closed"&&(n("changing transport and sending upgrade packet"),x(),c.setTransport(o),o.send([{type:"upgrade"}]),c.emit("upgrade",o),o=null,c.upgrading=!1,c.flush())})}else{n('probe transport "%s" failed',h);var k=new Error("probe error");k.transport=o.name,c.emit("upgradeError",k)}}))}function m(){r||(r=!0,x(),o.close(),o=null)}function y(w){var T=new Error("probe error: "+w);T.transport=o.name,m(),n('probe transport "%s" failed because of error: %s',h,w),c.emit("upgradeError",T)}function v(){y("transport closed")}function C(){y("socket closed")}function b(w){o&&w.name!==o.name&&(n('"%s" works - aborting "%s"',w.name,o.name),m())}function x(){o.removeListener("open",_),o.removeListener("error",y),o.removeListener("close",v),c.removeListener("close",C),c.removeListener("upgrading",b)}p.priorWebsocketSuccess=!1,o.once("open",_),o.once("error",y),o.once("close",v),this.once("close",C),this.once("upgrading",b),o.open()},p.prototype.onOpen=function(){if(n("socket open"),this.readyState="open",p.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){n("starting upgrade probes");for(var h=0,o=this.upgrades.length;h<o;h++)this.probe(this.upgrades[h])}},p.prototype.onPacket=function(h){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(n('socket receive: type "%s", data "%s"',h.type,h.data),this.emit("packet",h),this.emit("heartbeat"),h.type){case"open":this.onHandshake(JSON.parse(h.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var o=new Error("server error");o.code=h.data,this.onError(o);break;case"message":this.emit("data",h.data),this.emit("message",h.data)}else n('packet received with socket readyState "%s"',this.readyState)},p.prototype.onHandshake=function(h){this.emit("handshake",h),this.id=h.sid,this.transport.query.sid=h.sid,this.upgrades=this.filterUpgrades(h.upgrades),this.pingInterval=h.pingInterval,this.pingTimeout=h.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},p.prototype.onHeartbeat=function(h){clearTimeout(this.pingTimeoutTimer);var o=this;o.pingTimeoutTimer=setTimeout(function(){o.readyState!=="closed"&&o.onClose("ping timeout")},h||o.pingInterval+o.pingTimeout)},p.prototype.setPing=function(){var h=this;clearTimeout(h.pingIntervalTimer),h.pingIntervalTimer=setTimeout(function(){n("writing ping packet - expecting pong within %sms",h.pingTimeout),h.ping(),h.onHeartbeat(h.pingTimeout)},h.pingInterval)},p.prototype.ping=function(){var h=this;this.sendPacket("ping",function(){h.emit("ping")})},p.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()},p.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(n("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},p.prototype.write=p.prototype.send=function(h,o,r){return this.sendPacket("message",h,o,r),this},p.prototype.sendPacket=function(h,o,r,c){if(typeof o=="function"&&(c=o,o=void 0),typeof r=="function"&&(c=r,r=null),this.readyState!=="closing"&&this.readyState!=="closed"){(r=r||{}).compress=r.compress!==!1;var _={type:h,data:o,options:r};this.emit("packetCreate",_),this.writeBuffer.push(_),c&&this.once("flush",c),this.flush()}},p.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var h=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?c():o()}):this.upgrading?c():o()}function o(){h.onClose("forced close"),n("socket closing - telling transport to close"),h.transport.close()}function r(){h.removeListener("upgrade",r),h.removeListener("upgradeError",r),o()}function c(){h.once("upgrade",r),h.once("upgradeError",r)}return this},p.prototype.onError=function(h){n("socket error %j",h),p.priorWebsocketSuccess=!1,this.emit("error",h),this.onClose("transport error",h)},p.prototype.onClose=function(h,o){this.readyState!=="opening"&&this.readyState!=="open"&&this.readyState!=="closing"||(n('socket close with reason: "%s"',h),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",h,o),this.writeBuffer=[],this.prevBufferLen=0)},p.prototype.filterUpgrades=function(h){for(var o=[],r=0,c=h.length;r<c;r++)~a(this.transports,h[r])&&o.push(h[r]);return o}},7698:(d,t,e)=>{var i=e(9331),s=e(5074),n=e(9725),a=e(9368)("socket.io-client");d.exports=t=u;var l=t.managers={};function u(f,p){typeof f=="object"&&(p=f,f=void 0),p=p||{};var h,o=i(f),r=o.source,c=o.id,_=o.path,m=l[c]&&_ in l[c].nsps;return p.forceNew||p["force new connection"]||p.multiplex===!1||m?(a("ignoring socket cache for %s",r),h=n(r,p)):(l[c]||(a("new io instance for %s",r),l[c]=n(r,p)),h=l[c]),o.query&&!p.query&&(p.query=o.query),h.socket(o.path,p)}t.protocol=s.protocol,t.connect=u,t.Manager=e(9725),t.Socket=e(7773)},7773:(d,t,e)=>{var i=e(5074),s=e(5971),n=e(8104),a=e(4745),l=e(8144),u=e(9368)("socket.io-client:socket"),f=e(9140);d.exports=o;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=s.prototype.emit;function o(r,c,_){this.io=r,this.nsp=c,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,_&&_.query&&(this.query=_.query),this.io.autoConnect&&this.open()}s(o.prototype),o.prototype.subEvents=function(){if(!this.subs){var r=this.io;this.subs=[a(r,"open",l(this,"onopen")),a(r,"packet",l(this,"onpacket")),a(r,"close",l(this,"onclose"))]}},o.prototype.open=o.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting")),this},o.prototype.send=function(){var r=n(arguments);return r.unshift("message"),this.emit.apply(this,r),this},o.prototype.emit=function(r){if(p.hasOwnProperty(r))return h.apply(this,arguments),this;var c=n(arguments),_={type:i.EVENT,data:c,options:{}};return _.options.compress=!this.flags||this.flags.compress!==!1,typeof c[c.length-1]=="function"&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=c.pop(),_.id=this.ids++),this.connected?this.packet(_):this.sendBuffer.push(_),delete this.flags,this},o.prototype.packet=function(r){r.nsp=this.nsp,this.io.packet(r)},o.prototype.onopen=function(){if(u("transport is open - connecting"),this.nsp!=="/")if(this.query){var r=typeof this.query=="object"?f.encode(this.query):this.query;u("sending connect packet with query %s",r),this.packet({type:i.CONNECT,query:r})}else this.packet({type:i.CONNECT})},o.prototype.onclose=function(r){u("close (%s)",r),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",r)},o.prototype.onpacket=function(r){if(r.nsp===this.nsp)switch(r.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(r);break;case i.ACK:case i.BINARY_ACK:this.onack(r);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",r.data)}},o.prototype.onevent=function(r){var c=r.data||[];u("emitting event %j",c),r.id!=null&&(u("attaching ack callback to event"),c.push(this.ack(r.id))),this.connected?h.apply(this,c):this.receiveBuffer.push(c)},o.prototype.ack=function(r){var c=this,_=!1;return function(){if(!_){_=!0;var m=n(arguments);u("sending ack %j",m),c.packet({type:i.ACK,id:r,data:m})}}},o.prototype.onack=function(r){var c=this.acks[r.id];typeof c=="function"?(u("calling ack %s with %j",r.id,r.data),c.apply(this,r.data),delete this.acks[r.id]):u("bad ack %s",r.id)},o.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},o.prototype.emitBuffered=function(){var r;for(r=0;r<this.receiveBuffer.length;r++)h.apply(this,this.receiveBuffer[r]);for(this.receiveBuffer=[],r=0;r<this.sendBuffer.length;r++)this.packet(this.sendBuffer[r]);this.sendBuffer=[]},o.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},o.prototype.destroy=function(){if(this.subs){for(var r=0;r<this.subs.length;r++)this.subs[r].destroy();this.subs=null}this.io.destroy(this)},o.prototype.close=o.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},o.prototype.compress=function(r){return this.flags=this.flags||{},this.flags.compress=r,this}},7833:(d,t,e)=>{t.formatArgs=function(s){if(s[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+s[0]+(this.useColors?"%c ":" ")+"+"+d.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;s.splice(1,0,n,"color: inherit");let a=0,l=0;s[0].replace(/%[a-zA-Z%]/g,u=>{u!=="%%"&&(a++,u==="%c"&&(l=a))}),s.splice(l,0,n)},t.save=function(s){try{s?t.storage.setItem("debug",s):t.storage.removeItem("debug")}catch{}},t.load=function(){let s;try{s=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!s&&typeof process<"u"&&"env"in process&&(s=yt.DEBUG),s},t.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let s;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(s=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(s[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch{}}(),t.destroy=(()=>{let s=!1;return()=>{s||(s=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),d.exports=e(736)(t);const{formatters:i}=d.exports;i.j=function(s){try{return JSON.stringify(s)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}},8104:d=>{d.exports=function(t,e){for(var i=[],s=(e=e||0)||0;s<t.length;s++)i[s-e]=t[s];return i}},8144:d=>{var t=[].slice;d.exports=function(e,i){if(typeof i=="string"&&(i=e[i]),typeof i!="function")throw new Error("bind() requires a function");var s=t.call(arguments,2);return function(){return i.apply(e,s.concat(t.call(arguments)))}}},8247:d=>{d.exports=function(t){return O.Buffer&&O.Buffer.isBuffer(t)||O.ArrayBuffer&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))}},8383:d=>{try{d.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{d.exports=!1}},8520:(d,t,e)=>{var i=e(3051),s=e(9332),n=e(2252),a=e(6855);t.polling=function(l){var u=!1,f=!1,p=l.jsonp!==!1;if(O.location){var h=location.protocol==="https:",o=location.port;o||(o=h?443:80),u=l.hostname!==location.hostname||o!==l.port,f=l.secure!==h}if(l.xdomain=u,l.xscheme=f,"open"in new i(l)&&!l.forceJSONP)return new s(l);if(!p)throw new Error("JSONP disabled");return new n(l)},t.websocket=a},8758:d=>{var t,e,i,s=String.fromCharCode;function n(h){for(var o,r,c=[],_=0,m=h.length;_<m;)(o=h.charCodeAt(_++))>=55296&&o<=56319&&_<m?(64512&(r=h.charCodeAt(_++)))==56320?c.push(((1023&o)<<10)+(1023&r)+65536):(c.push(o),_--):c.push(o);return c}function a(h,o){if(h>=55296&&h<=57343){if(o)throw Error("Lone surrogate U+"+h.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function l(h,o){return s(h>>o&63|128)}function u(h,o){if(!(4294967168&h))return s(h);var r="";return 4294965248&h?4294901760&h?4292870144&h||(r=s(h>>18&7|240),r+=l(h,12),r+=l(h,6)):(a(h,o)||(h=65533),r=s(h>>12&15|224),r+=l(h,6)):r=s(h>>6&31|192),r+s(63&h|128)}function f(){if(i>=e)throw Error("Invalid byte index");var h=255&t[i];if(i++,(192&h)==128)return 63&h;throw Error("Invalid continuation byte")}function p(h){var o,r;if(i>e)throw Error("Invalid byte index");if(i==e)return!1;if(o=255&t[i],i++,!(128&o))return o;if((224&o)==192){if((r=(31&o)<<6|f())>=128)return r;throw Error("Invalid continuation byte")}if((240&o)==224){if((r=(15&o)<<12|f()<<6|f())>=2048)return a(r,h)?r:65533;throw Error("Invalid continuation byte")}if((248&o)==240&&(r=(7&o)<<18|f()<<12|f()<<6|f())>=65536&&r<=1114111)return r;throw Error("Invalid UTF-8 detected")}d.exports={version:"2.1.2",encode:function(h,o){for(var r=(o=o||{}).strict!==!1,c=n(h),_=c.length,m=-1,y="";++m<_;)y+=u(c[m],r);return y},decode:function(h,o){var r=(o=o||{}).strict!==!1;t=n(h),e=t.length,i=0;for(var c,_=[];(c=p(r))!==!1;)_.push(c);return function(m){for(var y,v=m.length,C=-1,b="";++C<v;)(y=m[C])>65535&&(b+=s((y-=65536)>>>10&1023|55296),y=56320|1023&y),b+=s(y);return b}(_)}}},8839:(d,t,e)=>{var i=e(4634),s=Object.prototype.toString,n=typeof Blob=="function"||typeof Blob<"u"&&s.call(Blob)==="[object BlobConstructor]",a=typeof File=="function"||typeof File<"u"&&s.call(File)==="[object FileConstructor]";d.exports=function l(u){if(!u||typeof u!="object")return!1;if(i(u)){for(var f=0,p=u.length;f<p;f++)if(l(u[f]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(u)||typeof ArrayBuffer=="function"&&u instanceof ArrayBuffer||n&&u instanceof Blob||a&&u instanceof File)return!0;if(u.toJSON&&typeof u.toJSON=="function"&&arguments.length===1)return l(u.toJSON(),!0);for(var h in u)if(Object.prototype.hasOwnProperty.call(u,h)&&l(u[h]))return!0;return!1}},9110:(d,t,e)=>{function i(n){var a;function l(){if(l.enabled){var u=l,f=+new Date,p=f-(a||f);u.diff=p,u.prev=a,u.curr=f,a=f;for(var h=new Array(arguments.length),o=0;o<h.length;o++)h[o]=arguments[o];h[0]=t.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");var r=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,function(c,_){if(c==="%%")return c;r++;var m=t.formatters[_];if(typeof m=="function"){var y=h[r];c=m.call(u,y),h.splice(r,1),r--}return c}),t.formatArgs.call(u,h),(l.log||t.log||console.log.bind(console)).apply(u,h)}}return l.namespace=n,l.enabled=t.enabled(n),l.useColors=t.useColors(),l.color=function(u){var f,p=0;for(f in u)p=(p<<5)-p+u.charCodeAt(f),p|=0;return t.colors[Math.abs(p)%t.colors.length]}(n),l.destroy=s,typeof t.init=="function"&&t.init(l),t.instances.push(l),l}function s(){var n=t.instances.indexOf(this);return n!==-1&&(t.instances.splice(n,1),!0)}(t=d.exports=i.debug=i.default=i).coerce=function(n){return n instanceof Error?n.stack||n.message:n},t.disable=function(){t.enable("")},t.enable=function(n){var a;t.save(n),t.names=[],t.skips=[];var l=(typeof n=="string"?n:"").split(/[\s,]+/),u=l.length;for(a=0;a<u;a++)l[a]&&((n=l[a].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+n.substr(1)+"$")):t.names.push(new RegExp("^"+n+"$")));for(a=0;a<t.instances.length;a++){var f=t.instances[a];f.enabled=t.enabled(f.namespace)}},t.enabled=function(n){if(n[n.length-1]==="*")return!0;var a,l;for(a=0,l=t.skips.length;a<l;a++)if(t.skips[a].test(n))return!1;for(a=0,l=t.names.length;a<l;a++)if(t.names[a].test(n))return!0;return!1},t.humanize=e(3097),t.instances=[],t.names=[],t.skips=[],t.formatters={}},9140:(d,t)=>{t.encode=function(e){var i="";for(var s in e)e.hasOwnProperty(s)&&(i.length&&(i+="&"),i+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return i},t.decode=function(e){for(var i={},s=e.split("&"),n=0,a=s.length;n<a;n++){var l=s[n].split("=");i[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return i}},9331:(d,t,e)=>{var i=e(4258),s=e(9368)("socket.io-client:url");d.exports=function(n,a){var l=n;a=a||O.location,n==null&&(n=a.protocol+"//"+a.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n=n.charAt(1)==="/"?a.protocol+n:a.host+n),/^(https?|wss?):\/\//.test(n)||(s("protocol-less url %s",n),n=a!==void 0?a.protocol+"//"+n:"https://"+n),s("parse %s",n),l=i(n)),l.port||(/^(http|ws)$/.test(l.protocol)?l.port="80":/^(http|ws)s$/.test(l.protocol)&&(l.port="443")),l.path=l.path||"/";var u=l.host.indexOf(":")!==-1?"["+l.host+"]":l.host;return l.id=l.protocol+"://"+u+":"+l.port,l.href=l.protocol+"://"+u+(a&&a.port===l.port?"":":"+l.port),l}},9332:(d,t,e)=>{var i=e(3051),s=e(5911),n=e(5971),a=e(2370),l=e(6617)("engine.io-client:polling-xhr");function u(){}function f(o){if(s.call(this,o),this.requestTimeout=o.requestTimeout,this.extraHeaders=o.extraHeaders,O.location){var r=location.protocol==="https:",c=location.port;c||(c=r?443:80),this.xd=o.hostname!==O.location.hostname||c!==o.port,this.xs=o.secure!==r}}function p(o){this.method=o.method||"GET",this.uri=o.uri,this.xd=!!o.xd,this.xs=!!o.xs,this.async=o.async!==!1,this.data=o.data!==void 0?o.data:null,this.agent=o.agent,this.isBinary=o.isBinary,this.supportsBinary=o.supportsBinary,this.enablesXDR=o.enablesXDR,this.requestTimeout=o.requestTimeout,this.pfx=o.pfx,this.key=o.key,this.passphrase=o.passphrase,this.cert=o.cert,this.ca=o.ca,this.ciphers=o.ciphers,this.rejectUnauthorized=o.rejectUnauthorized,this.extraHeaders=o.extraHeaders,this.create()}function h(){for(var o in p.requests)p.requests.hasOwnProperty(o)&&p.requests[o].abort()}d.exports=f,d.exports.Request=p,a(f,s),f.prototype.supportsBinary=!0,f.prototype.request=function(o){return(o=o||{}).uri=this.uri(),o.xd=this.xd,o.xs=this.xs,o.agent=this.agent||!1,o.supportsBinary=this.supportsBinary,o.enablesXDR=this.enablesXDR,o.pfx=this.pfx,o.key=this.key,o.passphrase=this.passphrase,o.cert=this.cert,o.ca=this.ca,o.ciphers=this.ciphers,o.rejectUnauthorized=this.rejectUnauthorized,o.requestTimeout=this.requestTimeout,o.extraHeaders=this.extraHeaders,new p(o)},f.prototype.doWrite=function(o,r){var c=typeof o!="string"&&o!==void 0,_=this.request({method:"POST",data:o,isBinary:c}),m=this;_.on("success",r),_.on("error",function(y){m.onError("xhr post error",y)}),this.sendXhr=_},f.prototype.doPoll=function(){l("xhr poll");var o=this.request(),r=this;o.on("data",function(c){r.onData(c)}),o.on("error",function(c){r.onError("xhr poll error",c)}),this.pollXhr=o},n(p.prototype),p.prototype.create=function(){var o={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};o.pfx=this.pfx,o.key=this.key,o.passphrase=this.passphrase,o.cert=this.cert,o.ca=this.ca,o.ciphers=this.ciphers,o.rejectUnauthorized=this.rejectUnauthorized;var r=this.xhr=new i(o),c=this;try{l("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var _ in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(_)&&r.setRequestHeader(_,this.extraHeaders[_])}catch{}if(this.method==="POST")try{this.isBinary?r.setRequestHeader("Content-type","application/octet-stream"):r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in r&&(r.withCredentials=!0),this.requestTimeout&&(r.timeout=this.requestTimeout),this.hasXDR()?(r.onload=function(){c.onLoad()},r.onerror=function(){c.onError(r.responseText)}):r.onreadystatechange=function(){if(r.readyState===2)try{var m=r.getResponseHeader("Content-Type");c.supportsBinary&&m==="application/octet-stream"&&(r.responseType="arraybuffer")}catch{}r.readyState===4&&(r.status===200||r.status===1223?c.onLoad():setTimeout(function(){c.onError(r.status)},0))},l("xhr data %s",this.data),r.send(this.data)}catch(m){return void setTimeout(function(){c.onError(m)},0)}O.document&&(this.index=p.requestsCount++,p.requests[this.index]=this)},p.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},p.prototype.onData=function(o){this.emit("data",o),this.onSuccess()},p.prototype.onError=function(o){this.emit("error",o),this.cleanup(!0)},p.prototype.cleanup=function(o){if(this.xhr!==void 0&&this.xhr!==null){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,o)try{this.xhr.abort()}catch{}O.document&&delete p.requests[this.index],this.xhr=null}},p.prototype.onLoad=function(){var o;try{var r;try{r=this.xhr.getResponseHeader("Content-Type")}catch{}o=r==="application/octet-stream"&&this.xhr.response||this.xhr.responseText}catch(c){this.onError(c)}o!=null&&this.onData(o)},p.prototype.hasXDR=function(){return O.XDomainRequest!==void 0&&!this.xs&&this.enablesXDR},p.prototype.abort=function(){this.cleanup()},p.requestsCount=0,p.requests={},O.document&&(O.attachEvent?O.attachEvent("onunload",h):O.addEventListener&&O.addEventListener("beforeunload",h,!1))},9368:(d,t,e)=>{function i(){var s;try{s=t.storage.debug}catch{}return!s&&typeof process<"u"&&"env"in process&&(s=yt.DEBUG),s}(t=d.exports=e(9939)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(s){var n=this.useColors;if(s[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+s[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var a="color: "+this.color;s.splice(1,0,a,"color: inherit");var l=0,u=0;s[0].replace(/%[a-zA-Z%]/g,function(f){f!=="%%"&&(l++,f==="%c"&&(u=l))}),s.splice(u,0,a)}},t.save=function(s){try{s==null?t.storage.removeItem("debug"):t.storage.debug=s}catch{}},t.load=i,t.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(s){try{return JSON.stringify(s)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}},t.enable(i())},9725:(d,t,e)=>{var i=e(3357),s=e(7773),n=e(5971),a=e(5074),l=e(4745),u=e(8144),f=e(9368)("socket.io-client:manager"),p=e(6938),h=e(3059),o=Object.prototype.hasOwnProperty;function r(c,_){if(!(this instanceof r))return new r(c,_);c&&typeof c=="object"&&(_=c,c=void 0),(_=_||{}).path=_.path||"/socket.io",this.nsps={},this.subs=[],this.opts=_,this.reconnection(_.reconnection!==!1),this.reconnectionAttempts(_.reconnectionAttempts||1/0),this.reconnectionDelay(_.reconnectionDelay||1e3),this.reconnectionDelayMax(_.reconnectionDelayMax||5e3),this.randomizationFactor(_.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(_.timeout==null?2e4:_.timeout),this.readyState="closed",this.uri=c,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var m=_.parser||a;this.encoder=new m.Encoder,this.decoder=new m.Decoder,this.autoConnect=_.autoConnect!==!1,this.autoConnect&&this.open()}d.exports=r,r.prototype.emitAll=function(){for(var c in this.emit.apply(this,arguments),this.nsps)o.call(this.nsps,c)&&this.nsps[c].emit.apply(this.nsps[c],arguments)},r.prototype.updateSocketIds=function(){for(var c in this.nsps)o.call(this.nsps,c)&&(this.nsps[c].id=this.generateId(c))},r.prototype.generateId=function(c){return(c==="/"?"":c+"#")+this.engine.id},n(r.prototype),r.prototype.reconnection=function(c){return arguments.length?(this._reconnection=!!c,this):this._reconnection},r.prototype.reconnectionAttempts=function(c){return arguments.length?(this._reconnectionAttempts=c,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(c){return arguments.length?(this._reconnectionDelay=c,this.backoff&&this.backoff.setMin(c),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(c){return arguments.length?(this._randomizationFactor=c,this.backoff&&this.backoff.setJitter(c),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(c){return arguments.length?(this._reconnectionDelayMax=c,this.backoff&&this.backoff.setMax(c),this):this._reconnectionDelayMax},r.prototype.timeout=function(c){return arguments.length?(this._timeout=c,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()},r.prototype.open=r.prototype.connect=function(c,_){if(f("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=i(this.uri,this.opts);var m=this.engine,y=this;this.readyState="opening",this.skipReconnect=!1;var v=l(m,"open",function(){y.onopen(),c&&c()}),C=l(m,"error",function(w){if(f("connect_error"),y.cleanup(),y.readyState="closed",y.emitAll("connect_error",w),c){var T=new Error("Connection error");T.data=w,c(T)}else y.maybeReconnectOnOpen()});if(this._timeout!==!1){var b=this._timeout;f("connect attempt will timeout after %d",b);var x=setTimeout(function(){f("connect attempt timed out after %d",b),v.destroy(),m.close(),m.emit("error","timeout"),y.emitAll("connect_timeout",b)},b);this.subs.push({destroy:function(){clearTimeout(x)}})}return this.subs.push(v),this.subs.push(C),this},r.prototype.onopen=function(){f("open"),this.cleanup(),this.readyState="open",this.emit("open");var c=this.engine;this.subs.push(l(c,"data",u(this,"ondata"))),this.subs.push(l(c,"ping",u(this,"onping"))),this.subs.push(l(c,"pong",u(this,"onpong"))),this.subs.push(l(c,"error",u(this,"onerror"))),this.subs.push(l(c,"close",u(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",u(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(c){this.decoder.add(c)},r.prototype.ondecoded=function(c){this.emit("packet",c)},r.prototype.onerror=function(c){f("error",c),this.emitAll("error",c)},r.prototype.socket=function(c,_){var m=this.nsps[c];if(!m){m=new s(this,c,_),this.nsps[c]=m;var y=this;m.on("connecting",v),m.on("connect",function(){m.id=y.generateId(c)}),this.autoConnect&&v()}function v(){~p(y.connecting,m)||y.connecting.push(m)}return m},r.prototype.destroy=function(c){var _=p(this.connecting,c);~_&&this.connecting.splice(_,1),this.connecting.length||this.close()},r.prototype.packet=function(c){f("writing packet %j",c);var _=this;c.query&&c.type===0&&(c.nsp+="?"+c.query),_.encoding?_.packetBuffer.push(c):(_.encoding=!0,this.encoder.encode(c,function(m){for(var y=0;y<m.length;y++)_.engine.write(m[y],c.options);_.encoding=!1,_.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var c=this.packetBuffer.shift();this.packet(c)}},r.prototype.cleanup=function(){f("cleanup");for(var c=this.subs.length,_=0;_<c;_++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){f("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(c){f("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",c),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var c=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var _=this.backoff.duration();f("will wait %dms before reconnect attempt",_),this.reconnecting=!0;var m=setTimeout(function(){c.skipReconnect||(f("attempting reconnect"),c.emitAll("reconnect_attempt",c.backoff.attempts),c.emitAll("reconnecting",c.backoff.attempts),c.skipReconnect||c.open(function(y){y?(f("reconnect attempt error"),c.reconnecting=!1,c.reconnect(),c.emitAll("reconnect_error",y.data)):(f("reconnect success"),c.onreconnect())}))},_);this.subs.push({destroy:function(){clearTimeout(m)}})}},r.prototype.onreconnect=function(){var c=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",c)}},9939:(d,t,e)=>{var i;function s(n){function a(){if(a.enabled){var l=a,u=+new Date,f=u-(i||u);l.diff=f,l.prev=i,l.curr=u,i=u;for(var p=new Array(arguments.length),h=0;h<p.length;h++)p[h]=arguments[h];p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var o=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(r,c){if(r==="%%")return r;o++;var _=t.formatters[c];if(typeof _=="function"){var m=p[o];r=_.call(l,m),p.splice(o,1),o--}return r}),t.formatArgs.call(l,p),(a.log||t.log||console.log.bind(console)).apply(l,p)}}return a.namespace=n,a.enabled=t.enabled(n),a.useColors=t.useColors(),a.color=function(l){var u,f=0;for(u in l)f=(f<<5)-f+l.charCodeAt(u),f|=0;return t.colors[Math.abs(f)%t.colors.length]}(n),typeof t.init=="function"&&t.init(a),a}(t=d.exports=s.debug=s.default=s).coerce=function(n){return n instanceof Error?n.stack||n.message:n},t.disable=function(){t.enable("")},t.enable=function(n){t.save(n),t.names=[],t.skips=[];for(var a=(typeof n=="string"?n:"").split(/[\s,]+/),l=a.length,u=0;u<l;u++)a[u]&&((n=a[u].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+n.substr(1)+"$")):t.names.push(new RegExp("^"+n+"$")))},t.enabled=function(n){var a,l;for(a=0,l=t.skips.length;a<l;a++)if(t.skips[a].test(n))return!1;for(a=0,l=t.names.length;a<l;a++)if(t.names[a].test(n))return!0;return!1},t.humanize=e(2902),t.names=[],t.skips=[],t.formatters={}}},Ut={};function j(d){var t=Ut[d];if(t!==void 0)return t.exports;var e=Ut[d]={exports:{}};return Yt[d](e,e.exports,j),e.exports}j.n=d=>{var t=d&&d.__esModule?()=>d.default:()=>d;return j.d(t,{a:t}),t},j.d=(d,t)=>{for(var e in t)j.o(t,e)&&!j.o(d,e)&&Object.defineProperty(d,e,{enumerable:!0,get:t[e]})},j.o=(d,t)=>Object.prototype.hasOwnProperty.call(d,t);var Et={};j.d(Et,{Bx:()=>K,F4:()=>$t,Pr:()=>oe});var Zt=j(7007),Qt=j.n(Zt),te=j(7698),ee=j.n(te),se=j(7833),J=j.n(se);const $t=Object.freeze({createAccessToken:"/auth/v1/token",updateAccessToken:"/auth/v1/token",deleteToken:"/auth/v1/token/revoke",createSessionUrl:"/open/v1/sessions/auth",createChatEventSubscription:"/open/v1/sessions/events/subscribe/chat",createDonationEventSubscription:"/open/v1/sessions/events/subscribe/donation",getUser:"/open/v1/users/me",postChat:"/open/v1/chats/send"}),K=Object.freeze({SYSTEM:"SYSTEM",CHAT:"CHAT",DONATION:"DONATION"});var $,W,rt,it,z,Q,X,st,ot,G,tt,nt,dt,mt,L,Ct;class oe extends Qt(){constructor({api_url:e,code:i,state:s,access_token:n,refresh_token:a,token_type:l,expires_in:u,scope:f,paths:p={}}){super();U(this,$);U(this,W);U(this,rt);U(this,it);U(this,z);U(this,Q);U(this,X);U(this,st);U(this,ot);U(this,G);U(this,tt);U(this,nt);U(this,dt);U(this,mt);U(this,L);U(this,Ct);gt(this,"on",super.on);gt(this,"off",super.off);gt(this,"emit",super.emit);M(this,$,e),M(this,W,{...$t,...p}),M(this,rt,i),M(this,it,s),M(this,z,n),M(this,Q,a),M(this,X,l),M(this,st,parseInt(u)),M(this,ot,f),M(this,L,J()("chzzk-proxy")),M(this,Ct,J()("chzzk-proxy:error")),A(this,L).call(this,`constructor(${e}, ${i}, ${s}, ${p}, ${n}, ${a}, ${l}, ${u}, ${f})`)}get connected(){return!!A(this,G)&&A(this,G).connected}get api_url(){return A(this,$)}get paths(){return A(this,W)}get code(){return A(this,rt)}get state(){return A(this,it)}get access_token(){return A(this,z)}get refresh_token(){return A(this,Q)}get token_type(){return A(this,X)}get expires_in(){return A(this,st)}get scope(){return A(this,ot)}get session_key(){return A(this,tt)}get channel_id(){return A(this,nt)}get channel_name(){return A(this,dt)}get nickname(){return A(this,mt)}set message(e){if(this.connected)return this.postChat(e)}async connect(){if(this.connected)return this.connected;let e;A(this,z)||(e=await this.createAccessToken()),A(this,L).call(this,"access_token",A(this,z)),A(this,L).call(this,"refresh_token",A(this,Q)),A(this,L).call(this,"token_type",A(this,X)),A(this,L).call(this,"expires_in",A(this,st)),A(this,L).call(this,"scope",A(this,ot)),await this.getUser(),e=await this.createSessionUrl();const i=e.url,s={reconnection:!1,"force new connection":!0,"connect timeout":3e3};return typeof window>"u"&&(s.transports=["websocket"]),A(this,L).call(this,"socket_option",s),M(this,G,ee()(i,s)),A(this,G).on("connect",async()=>{A(this,L).call(this,"[SUCCESS] socket.io connection established")}),A(this,G).on(K.SYSTEM,async n=>{const{type:a,data:l}=JSON.parse(n),{sessionKey:u,eventType:f,channelId:p}=l;switch(a){case"connected":A(this,L).call(this,`[SUCCESS] connected sessionKey: ${u}`),M(this,tt,u),await this.createChatEventSubscription(),await this.createDonationEventSubscription();break;case"subscribed":A(this,L).call(this,`[SUCCESS] subscribed eventType: ${f}, channelId: ${p}`),M(this,nt,p);break;case"unsubscribed":A(this,L).call(this,`[SUCCESS] unsubscribed eventType: ${f}, channelId: ${p}`);break;case"revoked":A(this,L).call(this,`[SUCCESS] revoked eventType: ${f}, channelId: ${p}`)}this.emit(K.SYSTEM,{sessionKey:u,eventType:f,channelId:p})}),A(this,G).on(K.CHAT,n=>{const a=JSON.parse(n);A(this,L).call(this,K.CHAT,a),this.emit(K.CHAT,a)}),A(this,G).on(K.DONATION,n=>{const a=JSON.parse(n);A(this,L).call(this,K.CHAT,a),this.emit(K.DONATION,a)}),this.connected}async destroy(){this.connected&&(A(this,G).close(),M(this,G,null),M(this,tt,null),M(this,nt,null),await this.deleteToken())}async updateToken(){this.connected&&await this.updateAccessToken()}async fetchRequest(e,i){const s=J()("chzzk-proxy:fetchRequest");s("api_url",e),s("options",i);const n=i.method||"GET",a=new URL(e);for(const h in i.param)i.param[h]&&a.searchParams.append(h,`${i.param[h]}`);s("url",a);const l=new Headers;for(const h in i.headers)i.headers[h]&&l.append(h,`${i.headers[h]}`);s("headers",l);const u=new Request(a,{method:n,headers:l,body:JSON.stringify(i.body)});s("request",u);const f=await fetch(u);s("response",f);const p=await f.json();return s("result",p),p.content}async createAccessToken(){const e=J()("chzzk-proxy:createAccessToken"),i=await this.fetchRequest(A(this,$),{method:"POST",headers:{"Content-Type":"application/json",path:A(this,W).createAccessToken},body:{grantType:"authorization_code",code:A(this,rt),state:A(this,it)}});return e("result",i),M(this,z,i.accessToken),M(this,Q,i.refreshToken),M(this,X,i.tokenType),M(this,st,i.expiresIn),M(this,ot,i.scope),i}async updateAccessToken(){const e=J()("chzzk-proxy:updateAccessToken"),i=await this.fetchRequest(A(this,$),{method:"POST",headers:{"Content-Type":"application/json",path:A(this,W).updateAccessToken},body:{grantType:"refresh_token",refreshToken:A(this,Q)}});return e("result",i),i}async deleteToken(){const e=J()("chzzk-proxy:deleteToken"),i=await this.fetchRequest(A(this,$),{method:"POST",headers:{Authorization:`${A(this,X)} ${A(this,z)}`,"Content-Type":"application/json",path:A(this,W).deleteToken},body:{token:A(this,z)}});return e("result",i),i}async createSessionUrl(){const e=J()("chzzk-proxy:createSessionUrl"),i=await this.fetchRequest(A(this,$),{method:"GET",headers:{Authorization:`${A(this,X)} ${A(this,z)}`,"Content-Type":"application/json",path:A(this,W).createSessionUrl}});return e("result",i),i}async createChatEventSubscription(){const e=J()("chzzk-proxy:createChatEventSubscription"),i=await this.fetchRequest(A(this,$),{method:"POST",param:{sessionKey:A(this,tt)},headers:{Authorization:`${A(this,X)} ${A(this,z)}`,"Content-Type":"application/json",path:A(this,W).createChatEventSubscription}});return e("result",i),i}async createDonationEventSubscription(){const e=J()("chzzk-proxy:createDonationEventSubscription"),i=await this.fetchRequest(A(this,$),{method:"POST",param:{sessionKey:A(this,tt)},headers:{Authorization:`${A(this,X)} ${A(this,z)}`,"Content-Type":"application/json",path:A(this,W).createDonationEventSubscription}});return e("result",i),i}async getUser(){const e=J()("chzzk-proxy:getUser"),i=await this.fetchRequest(A(this,$),{method:"GET",headers:{Authorization:`${A(this,X)} ${A(this,z)}`,"Content-Type":"application/json",path:A(this,W).getUser}});return e("result",i),M(this,nt,i.channelId),M(this,dt,i.channelName),M(this,mt,i.nickname),i}async postChat(e){const i=J()("chzzk-proxy:postChat"),s=await this.fetchRequest(A(this,$),{method:"POST",headers:{Authorization:`${A(this,X)} ${A(this,z)}`,"Content-Type":"application/json",path:A(this,W).postChat},body:{message:e}});return i("result",s),s}}$=new WeakMap,W=new WeakMap,rt=new WeakMap,it=new WeakMap,z=new WeakMap,Q=new WeakMap,X=new WeakMap,st=new WeakMap,ot=new WeakMap,G=new WeakMap,tt=new WeakMap,nt=new WeakMap,dt=new WeakMap,mt=new WeakMap,L=new WeakMap,Ct=new WeakMap;const ne=Et.Pr,zt=Et.Bx;Et.F4;class Wt extends H.Events.EventEmitter{}var Z=(d=>(d.CHAT="CHAT",d.DONATION="DONATION",d))(Z||{});class re extends Wt{constructor(){super(),this.SCALE=4,this.WIDTH=480*this.SCALE,this.HEIGHT=270*this.SCALE,this.DEBUG=!1,this.bgm_map={},this._volume_master=parseFloat(localStorage.getItem("CommonStore:volume:master")||"0.4"),this._volume_bgm=parseFloat(localStorage.getItem("CommonStore:volume:bgm")||"0.15"),this._volume_effect=parseFloat(localStorage.getItem("CommonStore:volume:effect")||"0.4"),this.url="https://showskillsspark.github.io/kora_restaurant/svsv",this.style={color:{grey_0:parseInt(localStorage.getItem("CommonStore:style:color:grey_0")||"0x000000"),grey_1:parseInt(localStorage.getItem("CommonStore:style:color:grey_1")||"0x111111"),grey_2:parseInt(localStorage.getItem("CommonStore:style:color:grey_2")||"0x222222"),grey_3:parseInt(localStorage.getItem("CommonStore:style:color:grey_3")||"0x333333"),grey_4:parseInt(localStorage.getItem("CommonStore:style:color:grey_4")||"0x444444"),grey_5:parseInt(localStorage.getItem("CommonStore:style:color:grey_5")||"0x555555"),grey_6:parseInt(localStorage.getItem("CommonStore:style:color:grey_6")||"0x666666"),grey_7:parseInt(localStorage.getItem("CommonStore:style:color:grey_7")||"0x777777"),grey_8:parseInt(localStorage.getItem("CommonStore:style:color:grey_8")||"0x888888"),grey_9:parseInt(localStorage.getItem("CommonStore:style:color:grey_9")||"0x999999"),grey_a:parseInt(localStorage.getItem("CommonStore:style:color:grey_a")||"0xaaaaaa"),grey_b:parseInt(localStorage.getItem("CommonStore:style:color:grey_b")||"0xbbbbbb"),grey_c:parseInt(localStorage.getItem("CommonStore:style:color:grey_c")||"0xcccccc"),grey_d:parseInt(localStorage.getItem("CommonStore:style:color:grey_d")||"0xdddddd"),grey_e:parseInt(localStorage.getItem("CommonStore:style:color:grey_e")||"0xeeeeee"),grey_f:parseInt(localStorage.getItem("CommonStore:style:color:grey_f")||"0xffffff"),green_a:parseInt(localStorage.getItem("CommonStore:style:color:green_a")||"0x00aa6c"),green_f:parseInt(localStorage.getItem("CommonStore:style:color:green_f")||"0x00ffa3"),purple_a:parseInt(localStorage.getItem("CommonStore:style:color:purple_a")||"0x6c00aa"),purple_f:parseInt(localStorage.getItem("CommonStore:style:color:purple_f")||"0xa300ff"),pink_a:parseInt(localStorage.getItem("CommonStore:style:color:pink_a")||"0xaa006c"),pink_f:parseInt(localStorage.getItem("CommonStore:style:color:pink_f")||"0xff00a3")},color_code:{grey_0:localStorage.getItem("CommonStore:style:color_code:grey_0")||"#000000",grey_1:localStorage.getItem("CommonStore:style:color_code:grey_1")||"#111111",grey_2:localStorage.getItem("CommonStore:style:color_code:grey_2")||"#222222",grey_3:localStorage.getItem("CommonStore:style:color_code:grey_3")||"#333333",grey_4:localStorage.getItem("CommonStore:style:color_code:grey_4")||"#444444",grey_5:localStorage.getItem("CommonStore:style:color_code:grey_5")||"#555555",grey_6:localStorage.getItem("CommonStore:style:color_code:grey_6")||"#666666",grey_7:localStorage.getItem("CommonStore:style:color_code:grey_7")||"#777777",grey_8:localStorage.getItem("CommonStore:style:color_code:grey_8")||"#888888",grey_9:localStorage.getItem("CommonStore:style:color_code:grey_9")||"#999999",grey_a:localStorage.getItem("CommonStore:style:color_code:grey_a")||"#aaaaaa",grey_b:localStorage.getItem("CommonStore:style:color_code:grey_b")||"#bbbbbb",grey_c:localStorage.getItem("CommonStore:style:color_code:grey_c")||"#cccccc",grey_d:localStorage.getItem("CommonStore:style:color_code:grey_d")||"#dddddd",grey_e:localStorage.getItem("CommonStore:style:color_code:grey_e")||"#eeeeee",grey_f:localStorage.getItem("CommonStore:style:color_code:grey_f")||"#ffffff",green_a:localStorage.getItem("CommonStore:style:color_code:grey_a")||"#00aa6c",green_f:localStorage.getItem("CommonStore:style:color_code:grey_f")||"#00ffa3",purple_a:localStorage.getItem("CommonStore:style:color_code:purple_a")||"#6c00aa",purple_f:localStorage.getItem("CommonStore:style:color_code:purple_f")||"#a300ff",pink_a:localStorage.getItem("CommonStore:style:color:pink_a")||"#aa006c",pink_f:localStorage.getItem("CommonStore:style:color:pink_f")||"#ff00a3"},font_style:{},font_padding:0};const t=16;this.style.font_style={fontFamily:"DungGeunMo",fontSize:t*this.SCALE,color:this.style.color_code.grey_f,align:"center"},this.style.font_padding=t*this.SCALE/10,this.proxy=new ne({api_url:"https://uohwcn08lb.execute-api.ap-northeast-2.amazonaws.com/default/chzzkProxy",code:sessionStorage.getItem("CommonStore:proxy:code")||new URL(window.location.href).searchParams.get("code")||void 0,state:sessionStorage.getItem("CommonStore:proxy:state")||new URL(window.location.href).searchParams.get("state")||void 0,access_token:sessionStorage.getItem("CommonStore:proxy:access_token")||void 0,refresh_token:sessionStorage.getItem("CommonStore:proxy:refresh_token")||void 0,token_type:sessionStorage.getItem("CommonStore:proxy:token_type")||void 0,expires_in:sessionStorage.getItem("CommonStore:proxy:expires_in")||void 0,scope:sessionStorage.getItem("CommonStore:proxy:scope")||void 0}),this.proxy.on(zt.CHAT,e=>{const{channelId:i,senderChannelId:s,profile:n,content:a,emojis:l,messageTime:u}=e,{nickname:f,badges:p,verifiedMark:h}=n,{key:o,value:r}=l;this.emit("CHAT",{channel_id:i,nickname:f,message:a})}),this.proxy.on(zt.DONATION,e=>{const{donationType:i,channelId:s,donatorChannelId:n,donatorNickname:a,payAmount:l,donationText:u,emojis:f}=e,{key:p,value:h}=f;this.emit("DONATION",{channel_id:n,nickname:a,message:u,pay:parseInt(l)})})}set bgm(t){var e;this._bgm_key&&(t!=null&&t.key.startsWith(this._bgm_key))||(this._bgm&&this._bgm.stop(),this._bgm=t,this._bgm_key=t==null?void 0:t.key,(e=this._bgm)==null||e.play())}get volume_master(){return this._volume_master}set volume_master(t){var e;this._volume_master=t,localStorage.setItem("CommonStore:volume:master",t.toString()),(e=this.onVolumeMasterChange)==null||e.call(this)}get volume_bgm(){return this._volume_bgm}set volume_bgm(t){var e;this._volume_bgm=t,localStorage.setItem("CommonStore:volume:bgm",t.toString()),(e=this._bgm)==null||e.setVolume(t)}get volume_effect(){return this._volume_effect}set volume_effect(t){this._volume_effect=t,localStorage.setItem("CommonStore:volume:effect",t.toString())}}const g=new re,ct=class ct extends H.GameObjects.Container{constructor(t,e,i,s,n){super(t,e,i),this._centered=!1,this._pointerover=!1,t.add.existing(this),this.setSize(s,n)}init(t,e,i){const s=this.height*.8,n=Math.min(this.width,s);this.game_logo=e,this.game_logo.setScale(n/this.game_logo.width).setY((n-this.height)/2),this.game_logo_animation_key=i,this.game_logo.play(this.game_logo_animation_key);const a=this.height*.2;this.game_name=this.scene.add.text(0,s/2,t,{...g.style.font_style,fontSize:a}).setOrigin(.5).setPadding(g.style.font_padding),this.cover=this.scene.add.rectangle(0,0,this.width*1.1,this.height*1.1,g.style.color.grey_0,.5),this.add([this.game_logo,this.game_name,this.cover]),this.onButtonState()}get centered(){return this._centered}get pointerover(){return this._pointerover}set centered(t){this._centered=t,this.onButtonState()}set pointerover(t){var e;if(this._pointerover=t,this.onButtonState(),t){this.game_logo.anims.repeatDelay=0;let i=(e=this.game_logo.anims.currentFrame)!=null&&e.index?this.game_logo.anims.currentFrame.index%this.game_logo.anims.getTotalFrames():void 0;this.game_logo.play({key:this.game_logo_animation_key,startFrame:i,repeatDelay:ct.animation_duration/10,delay:0})}else this.game_logo.anims.repeatDelay=ct.animation_duration,this.game_logo.anims.resume();this.game_logo.anims.reverse()}onButtonState(){this._centered&&this._pointerover?(this.setScale(1.2),this.cover.setAlpha(0)):this._centered&&!this._pointerover?(this.setScale(1),this.cover.setAlpha(0)):!this._centered&&this._pointerover?(this.setScale(1),this.cover.setAlpha(1)):!this._centered&&!this._pointerover&&(this.setScale(.8),this.cover.setAlpha(1))}onpointerup(){console.error(this.game_name.text,"onpointerup is not implemented.")}onpointerdown(){this.game_logo.anims.pause()}};ct.animation_duration=1e3;let It=ct;var B=(d=>(d.TEAM1="TEAM1",d.TEAM2="TEAM2",d))(B||{}),q=(d=>(d.WHITE="하양",d.BLACK="검정",d.NONE="투명",d))(q||{}),at=(d=>(d.CLICK="클릭",d.MOST="최다 득표",d.PROPORTIONAL="득표 비례 확률",d))(at||{}),N=(d=>(d.TEAM1="1 팀",d.TEAM2="2 팀",d.NONE="불참",d.DEFAULT="기본값",d))(N||{}),_t=(d=>(d.TEAM1="1 팀",d.TEAM2="2 팀",d.RANDOM="무작위",d))(_t||{});class Ht{constructor({name:t,timeout_index:e,disk_index:i,put_index:s}){this.timeout_list=[10,20,30,40,50,60,300],this.disk_color_list=["하양","검정"],this.put_list=["클릭","최다 득표","득표 비례 확률"],this.name=t,this.timeout_index=e,this.disk_color_index=i,this.put_index=s}get timeout(){return this.timeout_list[this.timeout_index]}get disk_color(){return this.disk_color_list[this.disk_color_index]}get put(){return this.put_list[this.put_index]}nextTimeout(t){return this.timeout_index=(this.timeout_index+this.timeout_list.length+t)%this.timeout_list.length,this.timeout}nextDisk(t){return this.disk_color_index=(this.disk_color_index+this.disk_color_list.length+t)%this.disk_color_list.length,this.disk_color}nextPut(t){return this.put_index=(this.put_index+this.put_list.length+t)%this.put_list.length,this.put}}var Ot=(d=>(d[d.WALL=0]="WALL",d[d.EMPTY=1]="EMPTY",d[d.BLOCK=2]="BLOCK",d))(Ot||{}),Y=(d=>(d.SET="SET",d.PUT="PUT",d.PUT_FAIL="PUT_FAIL",d.PASS="PASS",d.END="END",d))(Y||{});class ie{constructor(t,e,i){this.team_tag=null,this.x=t,this.y=e,this.disk_color=i}}class ae{constructor(t){this.width_list=[8,10],this.height_list=[8,10],this.tiles=[],this.disks=[],this.parent=t,this.width_index=parseInt(localStorage.getItem("OthelloStore:game_board:width_index")||"0"),this.height_index=parseInt(localStorage.getItem("OthelloStore:game_board:height_index")||"0"),this.counter={TEAM1:0,TEAM2:0}}get width(){return this.width_list[this.width_index]}get height(){return this.height_list[this.height_index]}init(t,e){this.counter={TEAM1:0,TEAM2:0};for(let i=0;i<12;i++){this.tiles[i]=[],this.disks[i]=[];for(let s=0;s<12;s++)i>0&&i<=this.width&&s>0&&s<=this.height?this.tiles[i][s]=1:this.tiles[i][s]=0,this.disks[i][s]=new ie(i,s,"투명")}this.setDisk(this.width/2,this.height/2,"TEAM1",t),this.setDisk(this.width/2+1,this.height/2,"TEAM2",e),this.setDisk(this.width/2,this.height/2+1,"TEAM2",e),this.setDisk(this.width/2+1,this.height/2+1,"TEAM1",t)}setDisk(t,e,i,s,n=!0){const a=this.disks[t][e],l=a.team_tag,u=a.disk_color;this.disks[t][e].disk_color=s,this.disks[t][e].team_tag=i,this.counter[i]+=1,l&&(this.counter[l]-=1),n&&this.parent.emit("SET",t,e,u,s)}putDisk(t,e,i,s){const n=this.canPutDisk(t,e,i,s);return n.length===0?(this.parent.emit("PUT_FAIL"),!1):(this.setDisk(t,e,i,s),n.forEach(a=>{this.setDisk(a.x,a.y,i,s)}),this.parent.emit("PUT",t,e),!0)}canPutDisk(t,e,i,s){if(t<1||t>this.width||e<1||e>this.height)return[];if(this.disks[t][e].disk_color!=="투명")return[];const n=this.getFlippingDisk(t,e,0,-1,i,s,!0),a=this.getFlippingDisk(t,e,1,-1,i,s,!0),l=this.getFlippingDisk(t,e,1,0,i,s,!0),u=this.getFlippingDisk(t,e,1,1,i,s,!0),f=this.getFlippingDisk(t,e,0,1,i,s,!0),p=this.getFlippingDisk(t,e,-1,1,i,s,!0),h=this.getFlippingDisk(t,e,-1,0,i,s,!0),o=this.getFlippingDisk(t,e,-1,-1,i,s,!0);return[...n,...a,...l,...u,...f,...p,...h,...o]}getFlippingDisk(t,e,i,s,n,a,l=!1){if(this.tiles[e+s][t+i]!==1)return[];const f=l?[]:[this.disks[t][e]],p=this.disks[t+i][e+s];if(p.disk_color==="투명")return[];if(p.team_tag===n)return[...f];{const h=this.getFlippingDisk(t+i,e+s,i,s,n,a);return h.length>0?[...h,...f]:[]}}canPutDiskSet(t,e){const i=new Set;for(let s=1;s<=this.width;s++)for(let n=1;n<=this.height;n++)this.canPutDisk(s,n,t,e).length>0&&i.add(this.disks[s][n]);return i}}class ce extends Wt{constructor(){super(),this.default_membership_list=["1 팀","2 팀","불참"],this.start_team_list=["1 팀","2 팀","무작위"],this.teams={},this.teams.TEAM1=new Ht({name:localStorage.getItem("OthelloStore:teams:TEAM1:name")||"1 팀",timeout_index:parseInt(localStorage.getItem("OthelloStore:teams:TEAM1:timeout_index")||"6"),disk_index:parseInt(localStorage.getItem("OthelloStore:teams:TEAM1:disk_index")||"0"),put_index:parseInt(localStorage.getItem("OthelloStore:teams:TEAM1:put_index")||"0")}),this.teams.TEAM2=new Ht({name:localStorage.getItem("OthelloStore:teams:TEAM2:name")||"2 팀",timeout_index:parseInt(localStorage.getItem("OthelloStore:teams:TEAM2:timeout_index")||"1"),disk_index:parseInt(localStorage.getItem("OthelloStore:teams:TEAM2:disk_index")||"1"),put_index:parseInt(localStorage.getItem("OthelloStore:teams:TEAM2:put_index")||"1")}),this.members={},this.default_membership_index=parseInt(localStorage.getItem("OthelloStore:default_membership_index")||"1"),this.start_team_index=parseInt(localStorage.getItem("OthelloStore:start_team_index")||"2"),this.game_board=new ae(this)}get default_membership(){return this.default_membership_list[this.default_membership_index]}get start_team(){return this.start_team_list[this.start_team_index]}nextTeamTimeout(t,e){this.teams[t].nextTimeout(e),localStorage.setItem(`OthelloStore:teams:${t}:timeout_index`,this.teams[t].timeout_index.toString()),this.emit("teams:timeout",t,this.teams[t].timeout)}nextTeamDisk(t,e){this.teams[t].nextDisk(e),localStorage.setItem(`OthelloStore:teams:${t}:disk_index`,this.teams[t].disk_color_index.toString()),this.emit("teams:disk",t,this.teams[t].disk_color)}nextTeamPut(t,e){this.teams[t].nextPut(e),localStorage.setItem(`OthelloStore:teams:${t}:put_index`,this.teams[t].put_index.toString()),this.emit("teams:put",t,this.teams[t].put)}nextDefaultMembership(t){this.default_membership_index=(this.default_membership_index+this.default_membership_list.length+t)%this.default_membership_list.length,localStorage.setItem("OthelloStore:default_membership_index",this.default_membership_index.toString()),this.emit("default_membership",this.default_membership)}nextStartTeam(t){this.start_team_index=(this.start_team_index+this.start_team_list.length+t)%this.start_team_list.length,localStorage.setItem("OthelloStore:start_team_index",this.start_team_index.toString()),this.emit("start_team",this.start_team)}setMemberShip(t,e){this.members[t]=e,this.emit("members",t,this.members[t])}}const S=new ce,Dt=(d,t)=>[`${String.fromCharCode(d+65-1)}`,`${t}`],Mt=d=>{let t=-1,e=-1;return/^[a-z]\d+.*/.test(d)?(t=d[0].charCodeAt(0)-97+1,e=parseInt(d.slice(1))):/^[A-Z]\d+.*/.test(d)&&(t=d[0].charCodeAt(0)-65+1,e=parseInt(d.slice(1))),[t,e]};class jt extends H.GameObjects.Container{constructor(t,e,i,s,n,a){super(t,e,i),this.disk_set=new Set,this.chat_nickname_list=[],this.chat_position_list=[],this.chat_flag=new Set,this.vote={},t.add.existing(this),this.team_tag=a;const l=s/50,u=g.style.font_style.fontSize,f=t.add.graphics().lineStyle(l,g.style.color.grey_f).strokeRect(0,0,s,n);this.add(f);const p=u,h=t.add.text(s/2,p,S.teams[a].name,{...g.style.font_style}).setOrigin(.5);this.add(h);const o=p+u*2,c=S.teams[a].disk_color===q.WHITE?0:6,_=t.add.sprite(s*1/4,o,"Othello:assets",c).setScale(g.SCALE).setOrigin(.5),m=S.game_board.counter[a],y=t.add.text(s*2/3,o,m.toString(),{...g.style.font_style,fontSize:u*(.8+1.2*m/64)}).setOrigin(.5);this.add([_,y]);const v=o+u*2,C=t.add.text(s/2,v,"남은 시간",{...g.style.font_style,fontSize:u*2/3}).setOrigin(.5);this.timer_text=t.add.text(s/2,v+u,`${S.teams[a].timeout} 초`,{...g.style.font_style,color:g.style.color_code.green_f}).setOrigin(.5),this.add([C,this.timer_text]),this.timer_event=t.time.addEvent({}),t.events.on("shutdown",()=>{t.time.removeEvent(this.timer_event)});const b=u/4,x=v+u*2,w=s-2*b,T=n-x-b,k=l/2,E=t.add.graphics().lineStyle(k,g.style.color.grey_f).strokeRect(b,x,w,T);this.add([E]);const F=b+u/8,I=11;this.chat_font_size=u/2,this.chat_nickname_width=w-this.chat_font_size*2.5;for(let P=0;P<I;P++){const R=t.add.text(F,x+this.chat_font_size*P*1.1,"nickname",{...g.style.font_style,fontSize:this.chat_font_size}).setCrop(0,0,this.chat_nickname_width,this.chat_font_size),et=t.add.text(F+this.chat_nickname_width+this.chat_font_size*2/3,x+this.chat_font_size*P*1.1,"A1",{...g.style.font_style,fontSize:this.chat_font_size});this.chat_nickname_list.push(R),this.chat_position_list.push(et)}this.add([...this.chat_nickname_list,...this.chat_position_list]),this.cover=t.add.rectangle(-k,-k,s+2*k,n+2*k,g.style.color.grey_0,.5).setOrigin(0),this.add(this.cover);const D=()=>{const P=S.game_board.counter[a];y.setText(P.toString()).setFontSize(u*(.8+1.2*P/64))};S.on(Y.SET,D),t.events.on("shutdown",()=>{S.off(Y.SET,D)}),this.clearChat(),g.DEBUG&&this.addChat("id_A1","지나가는 시민A",1,1)}onstartturn(t){this.cover.visible=!1,this.disk_set=t,this.scene.time.removeEvent(this.timer_event),this.vote={},this.timer_event=this.scene.time.addEvent({delay:g.DEBUG?50:1e3,repeat:S.teams[this.team_tag].timeout,callback:()=>{if(this.timer_text.setText(`${this.timer_event.repeatCount-1} 초`),this.timer_event.repeatCount>6?this.timer_text.setColor(g.style.color_code.green_f).setScale(1):this.timer_text.setColor(g.style.color_code.pink_f).setScale(1.3),this.timer_event.repeatCount===0){this.timer_text.setText(`${S.teams[this.team_tag].timeout} 초`).setColor(g.style.color_code.green_f).setScale(1);let e=!1;if(S.teams[this.team_tag].put===at.MOST&&Object.keys(this.vote).length>0){let i=0,s="";for(const l in this.vote){const u=this.vote[l];i<u?(i=u,s=l):u===i&&Math.random()<.5&&(s=l)}const[n,a]=Mt(s);e=S.game_board.putDisk(n,a,this.team_tag,S.teams[this.team_tag].disk_color)}else if(S.teams[this.team_tag].put===at.PROPORTIONAL&&Object.keys(this.vote).length>0){const i=[];for(const l in this.vote)for(let u=0;u<this.vote[l];u++)i.push(l);const s=i[Math.floor(Math.random()*i.length)],[n,a]=Mt(s);e=S.game_board.putDisk(n,a,this.team_tag,S.teams[this.team_tag].disk_color)}if(S.teams[this.team_tag].put===at.CLICK||Object.keys(this.vote).length===0||!e){const i=[...this.disk_set][Math.floor(Math.random()*this.disk_set.size)];S.game_board.putDisk(i.x,i.y,this.team_tag,S.teams[this.team_tag].disk_color)}}}}),this.clearChat()}onendturn(){this.timer_event.paused=!0,this.cover.visible=!0}clearChat(){this.chat_nickname_list.forEach(t=>t.setText("").setVisible(!1)),this.chat_position_list.forEach(t=>t.setText("").setVisible(!1)),this.chat_flag=new Set}addChat(t,e,i,s){if(this.chat_flag.has(t))return;this.chat_flag.add(t);const[n,a]=Dt(i,s),l=n+a;this.vote[l]?this.vote[l]+=1:this.vote[l]=1,this.chat_nickname_list.forEach((u,f)=>{f===this.chat_nickname_list.length-1?u.setText(e).setCrop(0,0,this.chat_nickname_width,this.chat_font_size).setVisible(!0):u.setText(this.chat_nickname_list[f+1].text).setCrop(0,0,this.chat_nickname_width,this.chat_font_size).setVisible(!0)}),this.chat_position_list.forEach((u,f)=>{f===this.chat_position_list.length-1?u.setText(l).setVisible(!0):u.setText(this.chat_position_list[f+1].text).setVisible(!0)})}endGame(){this.timer_event.paused=!0}}const kt=class kt extends H.Scene{constructor(){super(kt.key),this.tiles=[],this.disks=[],this.team_panels={},this.curr_turn=B.TEAM1,this.prev_pass=!1}static preload(t){t.anims.create({key:`${q.WHITE}-${q.BLACK}`,frames:t.anims.generateFrameNumbers("Othello:assets",{start:0,end:6})}),t.anims.create({key:`${q.BLACK}-${q.WHITE}`,frames:t.anims.generateFrameNumbers("Othello:assets",{start:6,end:12})})}create(){const t=g.WIDTH/(S.game_board.width+2),e=g.HEIGHT/(S.game_board.height+2),i=Math.min(t,e)/32,s=g.HEIGHT/20;this.add.text(g.WIDTH/2,s,"스트리머 vs 시청자",{...g.style.font_style,color:g.style.color_code.green_f}).setOrigin(.5,0);const n=g.HEIGHT/10,a=g.HEIGHT/10,l=this.add.text(n,a,"뒤로",{...g.style.font_style,color:g.style.color_code.pink_a}).setOrigin(0,.5).setInteractive().on("pointerup",()=>{this.sound.play("Common:sound:exit",{volume:g.volume_effect}),this.scene.start(ut.key)}).on("pointerover",()=>{l.setColor(g.style.color_code.pink_f)}).on("pointerout",()=>{l.setColor(g.style.color_code.pink_a)}),u=32*i,f=32*i,p=(g.WIDTH-u*(S.game_board.width+2))/2,h=f/2+g.style.font_style.fontSize-32*i/2,o=g.style.color.green_a,r=g.style.color.green_f;for(let k=0;k<S.game_board.width+2;k++){this.tiles[k]=[],this.disks[k]=[];for(let E=0;E<S.game_board.height+2;E++){const F=p+k*u,I=h+E*f;switch(S.game_board.tiles[k][E]){case Ot.EMPTY:this.tiles[k][E]=this.add.sprite(F,I,"Othello:assets",16).setOrigin(0).setScale(i).setTint(o).setToBack();const Ft=this.add.graphics().lineStyle(2*i,r).strokeRoundedRect(F,I,u,f,2*i);Ft.visible=!1,this.tiles[k][E].setInteractive().on("pointerup",()=>{(S.teams[this.curr_turn].put===at.CLICK||g.DEBUG)&&S.game_board.putDisk(k,E,this.curr_turn,S.teams[this.curr_turn].disk_color)}).on("pointerover",()=>{Ft.visible=!0}).on("pointerout",()=>{Ft.visible=!1});break;case Ot.WALL:let V;if(k==0)E==0?V=21:E==S.game_board.height+1?V=23:V=17;else if(k==S.game_board.width+1)E==0?V=22:E==S.game_board.height+1?V=24:V=18;else if(E==0)V=19;else if(E==S.game_board.height+1)V=20;else break;this.tiles[k][E]=this.add.sprite(F,I,"Othello:assets",V).setOrigin(0).setScale(i).setTint(o).setToBack();break}const P=S.game_board.disks[k][E];let R=13;switch(P.disk_color){case q.WHITE:R=0;break;case q.BLACK:R=6;break;case q.NONE:R=13;break}this.disks[k][E]=this.add.sprite(F,I,"Othello:assets",R).setOrigin(0).setScale(i);const et={...g.style.font_style,fontSize:g.style.font_style.fontSize*2/3,color:g.style.color_code.green_a},[Xt,Gt]=Dt(k,E);k===0&&E>0&&E<S.game_board.height+1&&this.add.text(F+u*2/3,I+u/2,Gt,et).setOrigin(.5),E===0&&k>0&&k<S.game_board.width+1&&this.add.text(F+u/2,I+u*2/3,Xt,et).setOrigin(.5)}}const c=u/2,_=h+f,m=(g.WIDTH-u*(S.game_board.width+3))/2,y=g.HEIGHT-(_+f/2);this.team_panels[B.TEAM1]=new jt(this,c,_,m,y,B.TEAM1),this.team_panels[B.TEAM2]=new jt(this,g.WIDTH-m-c,_,m,y,B.TEAM2);const v=(k,E,F,I)=>{if(F===q.NONE||F===I){const D=I===q.WHITE?0:6;this.disks[k][E].setFrame(D).setTint(g.style.color.grey_f)}else this.disks[k][E].anims.play(`${F}-${I}`)},C=(k,E)=>{if(this.curr_turn===B.TEAM1&&S.members[g.proxy.channel_id]===N.TEAM1||this.curr_turn===B.TEAM2&&S.members[g.proxy.channel_id]===N.TEAM2){const[F,I]=Dt(k,E);g.proxy.message=F+I}this.sound.play("Common:sound:open_menu",{volume:g.volume_effect}),this.nextTurn()},b=()=>{this.sound.play("Common:sound:close_menu",{volume:g.volume_effect})};S.on(Y.SET,v),S.on(Y.PUT,C),S.on(Y.PUT_FAIL,b),this.events.on("shutdown",()=>{S.off(Y.SET,v),S.off(Y.PUT,C),S.off(Y.PUT_FAIL,b)});const x=({channel_id:k,nickname:E,message:F})=>{const[I,D]=Mt(F),P=S.members[k]===N.DEFAULT?S.default_membership:S.members[k];let R;switch(P){case N.TEAM1:R=B.TEAM1;break;case N.TEAM2:R=B.TEAM2;break;case N.DEFAULT:case N.NONE:return}for(const et of this.team_panels[R].disk_set)et.x===I&&et.y===D&&this.team_panels[R].addChat(k,E,I,D)};g.on(Z.CHAT,x),g.on(Z.DONATION,x),this.events.on("shutdown",()=>{g.off(Z.CHAT,x),g.off(Z.DONATION,x)});const w=["battle1","battle2","battle3"],T=w[Math.floor(Math.random()*w.length)];switch(g.bgm=g.bgm_map["bgm:"+T+":intro"],S.start_team){case _t.TEAM1:this.setTurn(B.TEAM1);break;case _t.TEAM2:this.setTurn(B.TEAM2);break;case _t.RANDOM:const k=[B.TEAM1,B.TEAM2];this.setTurn(k[Math.round(Math.random())]);break}}setTurn(t){const e=S.teams[t].disk_color,i=S.game_board.canPutDiskSet(t,e);if(i.size>0){this.team_panels[this.curr_turn].onendturn(),this.team_panels[t].onstartturn(i),this.curr_turn=t,this.prev_pass=!1;for(let s=1;s<=S.game_board.width;s++)for(let n=1;n<=S.game_board.height;n++)i.has(S.game_board.disks[s][n])?this.disks[s][n].setFrame(14).setTint(g.style.color.green_a):S.game_board.disks[s][n].disk_color===q.NONE&&this.disks[s][n].setFrame(13)}else this.prev_pass?this.endGame():(this.prev_pass=!0,this.setTurn(this.curr_turn))}nextTurn(){const t=this.curr_turn===B.TEAM1?B.TEAM2:B.TEAM1;this.setTurn(t)}endGame(){console.log("game over");for(let t=1;t<=S.game_board.width;t++)for(let e=1;e<=S.game_board.height;e++)S.game_board.disks[t][e].disk_color===q.NONE&&this.disks[t][e].setFrame(13);this.team_panels[B.TEAM1].endGame(),this.team_panels[B.TEAM2].endGame()}};kt.key="OthelloGameScene";let lt=kt;class Bt extends H.GameObjects.Container{constructor(t,e,i){super(t,e,i),t.add.existing(this)}}class he extends Bt{constructor(t,e,i,s,{label:n="label",value:a="value"}){super(t,e,i);const l=s*1/10,u=this.scene.add.text(l,0,n,{...g.style.font_style,color:g.style.color_code.grey_0}).setOrigin(.5,0).setPadding(g.style.font_padding);this.add(u);const f=s*6/10;this.value_text=this.scene.add.text(f,0,a,{...g.style.font_style,color:g.style.color_code.grey_0}).setOrigin(.5,0).setPadding(g.style.font_padding),this.add(this.value_text),this.scene.add.graphics()}}class le extends Bt{constructor(t,e,i,s,{label:n="label",value:a="value",on_left_button_click:l,on_right_button_click:u}){super(t,e,i);const f=s*1/10,p=this.scene.add.text(f,0,n,{...g.style.font_style,color:g.style.color_code.grey_0}).setOrigin(.5,0).setPadding(g.style.font_padding);this.add(p);const h=s*6/10;this.value_text=this.scene.add.text(h,0,a,{...g.style.font_style,color:g.style.color_code.grey_0}).setOrigin(.5,0).setPadding(g.style.font_padding),this.add(this.value_text);const o=s*3/10,r=this.scene.add.sprite(o,0,"Common:button_header").setOrigin(.5,.25).setScale(g.SCALE).setFlipX(!0).setTint(g.style.color.grey_a).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:g.volume_effect}),l==null||l()}).on("pointerover",()=>{r.setTint(g.style.color.grey_4)}).on("pointerout",()=>{r.setTint(g.style.color.grey_a)}),c=s*9/10,_=this.scene.add.sprite(c,0,"Common:button_header").setOrigin(.5,.25).setScale(g.SCALE).setTint(g.style.color.grey_a).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:g.volume_effect}),u==null||u()}).on("pointerover",()=>{_.setTint(g.style.color.grey_4)}).on("pointerout",()=>{_.setTint(g.style.color.grey_a)});this.add([r,_])}setValueText(t){this.value_text.setText(t)}}class ue extends Bt{constructor(t,e,i,s,n,{height:a}){super(t,e,i),this.page_index=0,this.page_count=1,this.users=[],this.nicknames=[],this.users_flag=new Set,this.per_page=16,this.nickname_text=[],this.team_text=[];const l=s/200,u=t.add.graphics().lineStyle(l*2,8947848).strokeRect(-l,-l,s+2*l,n+2*l);this.add(u);const f=h=>{switch(h){case N.DEFAULT:return N.TEAM1;case N.TEAM1:return N.TEAM2;case N.TEAM2:return N.NONE;case N.NONE:return N.DEFAULT}};this.font_size=g.style.font_style.fontSize,this.nickname_text_width=s*8/20;for(let h=0;h<this.per_page/2;h++)for(let o=0;o<2;o++){(h+o)%2&&this.add(t.add.graphics().fillStyle(g.style.color.grey_f).fillRect(s*o/2,this.font_size*h,s/2,this.font_size));const r=t.add.text((s*o+s*1/20)/2,this.font_size*(h+.5),"nickname",{...g.style.font_style,color:g.style.color_code.grey_0}).setScale(.8).setOrigin(0,.5).setCrop(0,0,this.nickname_text_width,this.font_size);this.nickname_text.push(r);const c=t.add.text((s*o+s*15/20)/2+this.font_size,this.font_size*(h+.5),N.TEAM1,{...g.style.font_style,color:g.style.color_code.green_f}).setScale(.8).setOrigin(.5,.5).setTint(g.style.color.grey_a);c.setInteractive().on("pointerup",()=>{const _=this.page_index*this.per_page+2*h+o,m=this.users[_];this.nicknames[_];const y=S.members[m],v=f(y);S.setMemberShip(m,v),this.scene.sound.play("Common:sound:cancel",{volume:g.volume_effect}),c.setText(v)}).on("pointerover",()=>{c.setTint(g.style.color.grey_4)}).on("pointerout",()=>{c.setTint(g.style.color.grey_a)}),this.team_text.push(c)}this.add(this.nickname_text),this.add(this.team_text);const p=n+g.style.font_style.fontSize/2;if(this.page_text=t.add.text(s/2,p,` ${this.page_index} / ${this.page_count} `,{...g.style.font_style,backgroundColor:g.style.color_code.grey_0}).setOrigin(.5,0),this.add(this.page_text),this.left_button=t.add.sprite(s*2/6,p,"Common:button_header").setTint(g.style.color.grey_a).setOrigin(.5,.25).setScale(g.SCALE).setFlipX(!0),this.left_button.setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:g.volume_effect}),this.movePage(-1)}).on("pointerover",()=>{this.left_button.setTint(g.style.color.grey_4)}).on("pointerout",()=>{this.left_button.setTint(g.style.color.grey_a)}),this.right_button=t.add.sprite(s*4/6,p,"Common:button_header").setTint(g.style.color.grey_a).setOrigin(.5,.25).setScale(g.SCALE),this.right_button.setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:g.volume_effect}),this.movePage(1)}).on("pointerover",()=>{this.right_button.setTint(g.style.color.grey_4)}).on("pointerout",()=>{this.right_button.setTint(g.style.color.grey_a)}),this.add([this.left_button,this.right_button]),this.addUser(g.proxy.channel_id,g.proxy.nickname??"방장"),g.DEBUG)for(let h=0;h<20;h++){const o=`test id ${h}`;this.addUser(o,`테스트닉네임입니다${h}`)}}addUser(t,e){this.users_flag.has(t)||(this.users.push(t),this.nicknames.push(e),this.users_flag.add(t),S.setMemberShip(t,g.proxy.channel_id===t?N.TEAM1:N.DEFAULT),this.page_count=Math.ceil(this.users.length/this.per_page),this.page_text.setText(` ${this.page_index+1} / ${this.page_count} `),this.updateTable())}movePage(t){this.page_index=Math.max(0,Math.min(this.page_count-1,this.page_index+t)),this.page_text.setText(` ${this.page_index+1} / ${this.page_count} `),this.updateTable()}updateTable(){for(let t=0;t<this.per_page;t++){const e=this.nickname_text[t],i=this.team_text[t],s=this.per_page*this.page_index+t,n=this.users[s],a=this.nicknames[s],l=S.members[n];a?(e.setText(a).setCrop(0,0,this.nickname_text_width,this.font_size).setVisible(!0),i.setText(l).setVisible(!0)):(e.setVisible(!1),i.setVisible(!1))}}}class Nt extends H.GameObjects.Container{constructor(t,e,i){super(t),this.option_count=0,this._selected=!1,this.onselect=()=>{},this.onunselect=()=>{},this.scene.add.existing(this);const s=g.WIDTH/20,n=g.HEIGHT/20;this.round=g.WIDTH/100,this.tag_width=g.WIDTH*9/10/5,this.tag_height=g.style.font_style.fontSize*2,this.tag_x_offset=s+i*this.tag_width,this.tag_y_offset=n,this.tag_background=t.add.graphics(),this.add(this.tag_background);const a=t.add.zone(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height).setOrigin(0).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:g.volume_effect}),this.select=!0}).on("pointerover",()=>{this._selected||this.tag_background.fillStyle(g.style.color.grey_a).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round)}).on("pointerout",()=>{this._selected||this.tag_background.fillStyle(g.style.color.grey_6).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round)});this.add(a),this.tag_text_x_offset=s+this.tag_width/2+i*this.tag_width,this.tag_text_y_offset=this.tag_y_offset+this.tag_height/2,this.tag_text=t.add.text(this.tag_text_x_offset,this.tag_text_y_offset,e,g.style.font_style).setOrigin(.5).setPadding(g.style.font_padding),this.add(this.tag_text),this.panel_x_offset=s,this.panel_y_offset=this.tag_y_offset+this.tag_height,this.panel_width=g.WIDTH*9/10,this.panel_height=g.HEIGHT*9/10-this.panel_y_offset+n,this.panel_background=t.add.graphics().fillStyle(g.style.color.grey_e).fillRoundedRect(this.panel_x_offset,this.panel_y_offset,this.panel_width,this.panel_height,this.round),this.add(this.panel_background);const l=t.add.zone(this.panel_x_offset,this.panel_y_offset,this.panel_width,this.panel_height).setOrigin(0).setInteractive();this.add(l),this.select=!1}getOptionPosition(t=1){const e=this.panel_x_offset+this.panel_width/20,i=this.panel_y_offset+this.panel_height/20+this.option_count*g.style.font_style.fontSize*2,s=g.WIDTH-2*e,n=t*g.style.font_style.fontSize*2;return{option_x_offset:e,option_y_offset:i,option_width:s,option_height:n}}addTextOption({label:t,value:e}){const{option_x_offset:i,option_y_offset:s,option_width:n}=this.getOptionPosition();this.option_count+=1;const a=new he(this.scene,i,s,n,{label:t,value:e});return this.add(a),a}addListOption({label:t,value:e,on_left_button_click:i,on_right_button_click:s}){const{option_x_offset:n,option_y_offset:a,option_width:l}=this.getOptionPosition();this.option_count+=1;const u=new le(this.scene,n,a,l,{label:t,value:e,on_left_button_click:i,on_right_button_click:s});return this.add(u),u}addPageOption({height:t=1}){const{option_x_offset:e,option_y_offset:i,option_width:s,option_height:n}=this.getOptionPosition(t);this.option_count+=t;const a=new ue(this.scene,e,i,s,n,{height:t});return this.add(a),a}set select(t){t?(this.tag_background.fillStyle(g.style.color.grey_e).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round),this.tag_text.setTint(g.style.color.grey_0),this.setToTop(),this.onselect()):(this.tag_background.fillStyle(g.style.color.grey_6).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round),this.tag_text.setTint(g.style.color.grey_f),this.onunselect()),this._selected=t}}class qt extends Nt{constructor(t,e,i,s){super(t,s,i),this.addTextOption({label:"팀명",value:S.teams[e].name});const n=this.addListOption({label:"제한시간",value:`${S.teams[e].timeout} 초`,on_left_button_click:()=>{S.nextTeamTimeout(e,-1)},on_right_button_click:()=>{S.nextTeamTimeout(e,1)}}),a=this.addListOption({label:"색깔",value:S.teams[e].disk_color,on_left_button_click:()=>{S.nextTeamDisk(e,-1)},on_right_button_click:()=>{S.nextTeamDisk(e,1)}}),l=this.addListOption({label:"놓는방식",value:S.teams[e].put,on_left_button_click:()=>{S.nextTeamPut(e,-1)},on_right_button_click:()=>{S.nextTeamPut(e,1)}}),u=(h,o)=>{e===h&&n.setValueText(`${o} 초`)},f=(h,o)=>{e===h&&a.setValueText(o)},p=(h,o)=>{e===h&&l.setValueText(o)};S.on("teams:timeout",u),S.on("teams:disk",f),S.on("teams:put",p),this.scene.events.on("shutdown",()=>{S.off("teams:timeout",u),S.off("teams:disk",f),S.off("teams:put",p)})}}class pe extends Nt{constructor(t,e){super(t,"팀원",e);const i=this.addListOption({label:"기본값",value:S.default_membership,on_left_button_click:()=>S.nextDefaultMembership(-1),on_right_button_click:()=>S.nextDefaultMembership(1)}),s=this.addPageOption({height:4}),n=l=>{i.setValueText(l)};S.on("default_membership",n);const a=({channel_id:l,nickname:u,message:f})=>{s.addUser(l,u)};g.on(Z.CHAT,a),g.on(Z.DONATION,a),t.events.on("shutdown",()=>{S.off("default_membership",n),g.off(Z.CHAT,a),g.off(Z.DONATION,a)})}}class fe extends Nt{constructor(t,e,i){super(t,"리버시",e),this.tag_text.setColor(g.style.color_code.green_f);const s=this.addListOption({label:"누구부터",value:S.start_team,on_left_button_click:()=>S.nextStartTeam(-1),on_right_button_click:()=>S.nextStartTeam(1)}),n=this.scene.add.text(this.panel_x_offset+this.panel_width/2,this.panel_y_offset+this.panel_height/2,"드가자!",{...g.style.font_style,fontSize:g.style.font_style.fontSize*2,color:g.style.color_code.green_a}).setOrigin(.5).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:shop",{volume:g.volume_effect}),i()}).on("pointerover",()=>{n.setColor(g.style.color_code.grey_4)}).on("pointerout",()=>{n.setColor(g.style.color_code.green_a)});this.add(n);const a=l=>{s.setValueText(l)};S.on("start_team",a),this.scene.events.on("shutdown",()=>{S.off("start_team",a)})}}const xt=class xt extends H.Scene{constructor(){super(xt.key),this.startGameScene=()=>{S.game_board.init(S.teams[B.TEAM1].disk_color,S.teams[B.TEAM2].disk_color),this.scene.start(lt.key)}}create(){g.bgm=g.bgm_map["bgm:login:intro"];const t=new qt(this,B.TEAM1,.5,N.TEAM1),e=new qt(this,B.TEAM2,1.5,N.TEAM2),i=new pe(this,2.75),s=new fe(this,4,this.startGameScene),n=g.HEIGHT/10,a=g.HEIGHT/10,l=this.add.text(n,a,"뒤로",{...g.style.font_style,color:g.style.color_code.pink_a}).setOrigin(0,.5).setInteractive().on("pointerup",()=>{this.sound.play("Common:sound:exit",{volume:g.volume_effect}),this.scene.start(pt.key)}).on("pointerover",()=>{l.setColor(g.style.color_code.pink_f)}).on("pointerout",()=>{l.setColor(g.style.color_code.pink_a)});t.onselect=()=>{e.select=!1,i.select=!1,s.select=!1},e.onselect=()=>{t.select=!1,i.select=!1,s.select=!1},i.onselect=()=>{t.select=!1,e.select=!1,s.select=!1},s.onselect=()=>{t.select=!1,e.select=!1,i.select=!1},t.select=!0}};xt.key="OthelloSettingScene";let ut=xt;const ht=class ht extends It{static preload(t){t.anims.create({key:ht.game_logo_animation_key,frames:t.anims.generateFrameNumbers("Othello:assets",{start:32,end:44}),duration:this.animation_duration,repeat:-1,repeatDelay:this.animation_duration*2,delay:this.animation_duration*Math.random()*2})}constructor(t,e,i,s,n){super(t,e,i,s,n),this.scene=t;const a=this.scene.add.sprite(0,0,"Othello:assets",32);super.init("오델로",a,ht.game_logo_animation_key)}onpointerup(){this.scene.sound.play("Common:sound:pause",{volume:g.volume_effect}),this.scene.scene.start(ut.key)}};ht.game_logo_animation_key="OthelloSelectGameButton:animation";let vt=ht;const St=class St extends H.Scene{constructor(){super(St.key)}create(){const t=g.HEIGHT/20;this.add.text(g.WIDTH/2,t,"스트리머 vs 시청자",{...g.style.font_style,color:g.style.color_code.green_f}).setOrigin(.5,0);const e=g.WIDTH*.2,i=g.HEIGHT*.5,s=[vt].map((c,_)=>new c(this,g.WIDTH*(1/2+_*3/10),g.HEIGHT/2,e,i)),n=e,a=i,l=g.WIDTH*.3,u=this.add.zone(g.WIDTH/2-l,g.HEIGHT/2,n,a).setOrigin(.5),f=this.add.zone(g.WIDTH/2,g.HEIGHT/2,n,a).setOrigin(.5),p=this.add.zone(g.WIDTH/2+l,g.HEIGHT/2,n,a).setOrigin(.5),h=(c,_,m)=>{c<0||c>=s.length||(s[c].centered=_,s[c].pointerover=m)},o=(c,_,m)=>{c<0||c>=s.length||(s[c].centered=_,s[c].pointerover=m)};let r=0;u.setInteractive().on("pointerup",()=>{r!==0&&s.forEach((c,_)=>{c.setPosition(c.x+l,c.y),c.centered=r-1==_,c.pointerover=r-2==_}),r=Math.max(r-1,0)}).on("pointerdown",()=>{}).on("pointerover",()=>{r>0&&this.sound.play("Common:sound:cancel",{volume:g.volume_effect}),h(r-1,!1,!0)}).on("pointerout",()=>{o(r-1,!1,!1)}),f.setInteractive().on("pointerup",()=>{s[r].onpointerup()}).on("pointerdown",()=>{s[r].onpointerdown()}).on("pointerover",()=>{this.sound.play("Common:sound:cancel",{volume:g.volume_effect}),h(r,!0,!0)}).on("pointerout",()=>{o(r,!0,!1)}),p.setInteractive().on("pointerup",()=>{r!==s.length-1&&s.forEach((c,_)=>{c.setPosition(c.x-l,c.y),c.centered=r+1==_,c.pointerover=r+2==_}),r=Math.min(r+1,s.length-1)}).on("pointerdown",()=>{}).on("pointerover",()=>{r<s.length-1&&this.sound.play("Common:sound:cancel",{volume:g.volume_effect}),h(r+1,!1,!0)}).on("pointerout",()=>{o(r+1,!1,!1)}),s[r].centered=!0}};St.key="SelectGameScene";let pt=St;const wt=class wt extends H.Scene{constructor(){super(wt.key)}preload(){this.load.spritesheet("Othello:assets","assets/Games/Othello/Othello.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("Common:button_header","assets/Common/button_header.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("Common:button_close","assets/Common/button_close.png",{frameWidth:32,frameHeight:32}),this.load.setPath("assets/Common/"),this.load.audio("Common:sound:cancel","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Cancel.mp3"),this.load.audio("Common:sound:confirm","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Confirm.mp3"),this.load.audio("Common:sound:select","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_MenuSelections.mp3"),this.load.audio("Common:sound:open_menu","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_OpenMenu.mp3"),this.load.audio("Common:sound:close_menu","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_CloseMenu.mp3"),this.load.audio("Common:sound:exit","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Exit.mp3"),this.load.audio("Common:sound:pause","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Pause.mp3"),this.load.audio("Common:sound:resume","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Resume.mp3"),this.load.audio("Common:sound:shop","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Shop.mp3"),this.load.audio("Common:sound:equip","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Equip.mp3"),this.load.audio("bgm:battle1:intro","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/And The Journey Begins/xDeviruchi - And The Journey Begins (Intro).wav"),this.load.audio("bgm:battle1","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/And The Journey Begins/xDeviruchi - And The Journey Begins (Loop).wav"),this.load.audio("bgm:battle2:intro","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Exploring The Unknown/xDeviruchi - Exploring The Unknown (Intro).wav"),this.load.audio("bgm:battle2","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Exploring The Unknown/xDeviruchi - Exploring The Unknown (Loop).wav"),this.load.audio("bgm:battle3:intro","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Prepare for Battle!/xDeviruchi - Prepare for Battle! (Intro).wav"),this.load.audio("bgm:battle3","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Prepare for Battle!/xDeviruchi - Prepare for Battle! (Loop).wav")}create(){vt.preload(this),lt.preload(this);for(const t of["battle1","battle2","battle3"]){const e=this.sound.add(`bgm:${t}:intro`,{volume:g.volume_bgm});e.on("complete",()=>{g.bgm=this.sound.add(`bgm:${t}`,{loop:!0,volume:g.volume_bgm})}),g.bgm_map[`bgm:${t}:intro`]=e}this.scene.start(pt.key)}};wt.key="PreloadScene";let ft=wt;const Tt=class Tt extends H.Scene{constructor(){super(Tt.key)}preload(){this.load.audio("select","assets/Common/SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_MenuSelections.mp3"),this.load.audio("confirm","assets/Common/SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Confirm.mp3"),this.load.audio("bgm:login:intro","assets/Common/xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Take some rest and eat some food!/xDeviruchi - Take some rest and eat some food! (Intro).wav"),this.load.audio("bgm:login","assets/Common/xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Take some rest and eat some food!/xDeviruchi - Take some rest and eat some food! (Loop).wav")}async create(){const t=this.sound.add("bgm:login:intro",{volume:g.volume_bgm});if(t.on("complete",()=>{g.bgm=this.sound.add("bgm:login",{loop:!0,volume:g.volume_bgm})}),g.bgm_map["bgm:login:intro"]=t,g.bgm=g.bgm_map["bgm:login:intro"],g.DEBUG){this.scene.start(ft.key);return}const e=g.proxy,i=this.add.text(g.WIDTH/2,g.HEIGHT*1/2,"",g.style.font_style).setOrigin(.5).setPadding(g.style.font_padding),s=this.add.text(g.WIDTH/2,g.HEIGHT*2/3,"",g.style.font_style).setOrigin(.5).setPadding(g.style.font_padding).setTint(g.style.color.green_a);e.access_token?e.connect().then(()=>{this.scene.start(ft.key)}).catch(()=>{this.clearSession(),i.setText(`
[에러] 서비스 연결에 실패했습니다.

잠시 후 재시도합니다.
`);let n=60;s.setText(`${n}초`),this.time.addEvent({delay:1e3,callback:()=>{n-=1,n==0&&window.open(g.url,"_self"),s.setText(`${n}초`)},repeat:n})}):e.code?e.createAccessToken().then(()=>{sessionStorage.setItem("CommonStore:proxy:access_token",e.access_token),sessionStorage.setItem("CommonStore:proxy:refresh_token",e.refresh_token),sessionStorage.setItem("CommonStore:proxy:token_type",e.token_type),sessionStorage.setItem("CommonStore:proxy:expires_in",e.expires_in.toString()),sessionStorage.setItem("CommonStore:proxy:scope",e.scope),window.open(g.url,"_self")}).catch(()=>{this.clearSession(),i.setText(`
[에러] 토큰 발급에 실패했습니다.

잠시 후 재시도합니다.
`);let n=60;s.setText(`${n}초`),this.time.addEvent({delay:1e3,callback:()=>{n-=1,n==0&&window.open(g.url,"_self"),s.setText(`${n}초`)},repeat:n})}):(i.setText(`[안내] 치지직 API 사용 권한이 필요합니다.

아래 버튼을 눌러 동의해주세요.
`),s.setText("오케이!"),s.setInteractive({cursor:"pointer"}).on("pointerover",()=>{s.setTint(g.style.color.green_f),this.sound.play("select",{volume:g.volume_effect})}).on("pointerout",()=>{s.setTint(g.style.color.green_a)}).on("pointerup",()=>{const n="e04f347f-43a8-4efe-a75c-48fc210f174d",a=g.url,u=`https://chzzk.naver.com/account-interlock?clientId=${n}&redirectUri=${a}&state=skills`;sessionStorage.setItem("CommonStore:proxy:client_id",n),sessionStorage.setItem("CommonStore:proxy:redirect_uri",a),this.sound.play("confirm",{volume:g.volume_effect}),window.open(u,"_self")}))}clearSession(){sessionStorage.getItem("CommonStore:proxy:code"),sessionStorage.getItem("CommonStore:proxy:state"),sessionStorage.getItem("CommonStore:proxy:access_token"),sessionStorage.getItem("CommonStore:proxy:refresh_token"),sessionStorage.getItem("CommonStore:proxy:token_type"),sessionStorage.getItem("CommonStore:proxy:expires_in"),sessionStorage.getItem("CommonStore:proxy:scope")}};Tt.key="LoginScene";let bt=Tt;const At=class At extends H.Scene{constructor(){super(At.key)}preload(){this.load.font("DungGeunMo","https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/DungGeunMo.woff")}create(){this.sound.setVolume(g.volume_master),g.onVolumeMasterChange=()=>{this.sound.setVolume(g.volume_master)},this.scene.start(bt.key)}};At.key="BootScene";let Pt=At;const de={type:H.AUTO,parent:"game-container",width:g.WIDTH,height:g.HEIGHT,transparent:!0,pixelArt:!0,roundPixels:!1,antialias:!1,scale:{mode:H.Scale.FIT,autoCenter:H.Scale.CENTER_BOTH},fullscreenTarget:"game-container",preserveDrawingBuffer:!0,scene:[Pt,bt,ft,pt,ut,lt]};document.addEventListener("DOMContentLoaded",()=>{new H.Game(de)});
