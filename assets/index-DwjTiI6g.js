var te=Object.defineProperty;var jt=m=>{throw TypeError(m)};var ee=(m,e,t)=>e in m?te(m,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):m[e]=t;var x=(m,e,t)=>ee(m,typeof e!="symbol"?e+"":e,t),qt=(m,e,t)=>e.has(m)||jt("Cannot "+t);var E=(m,e,t)=>(qt(m,e,"read from private field"),t?t.call(m):e.get(m)),z=(m,e,t)=>e.has(m)?jt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(m):e.set(m,t),P=(m,e,t,r)=>(qt(m,e,"write to private field"),r?r.call(m,t):e.set(m,t),t);import{r as se}from"./phaser-BA8NYTic.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();var H=se(),M={},vt={};/*! For license information please see index.js.LICENSE.txt */var oe={218:m=>{var e=1e3,t=60*e,r=60*t,o=24*r;function s(a,c,u){if(!(a<c))return a<1.5*c?Math.floor(a/c)+" "+u:Math.ceil(a/c)+" "+u+"s"}m.exports=function(a,c){c=c||{};var u,f=typeof a;if(f==="string"&&a.length>0)return function(p){if(!((p=String(p)).length>100)){var h=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(h){var n=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*o;case"hours":case"hour":case"hrs":case"hr":case"h":return n*r;case"minutes":case"minute":case"mins":case"min":case"m":return n*t;case"seconds":case"second":case"secs":case"sec":case"s":return n*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(a);if(f==="number"&&isNaN(a)===!1)return c.long?s(u=a,o,"day")||s(u,r,"hour")||s(u,t,"minute")||s(u,e,"second")||u+" ms":function(p){return p>=o?Math.round(p/o)+"d":p>=r?Math.round(p/r)+"h":p>=t?Math.round(p/t)+"m":p>=e?Math.round(p/e)+"s":p+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},736:(m,e,t)=>{m.exports=function(r){function o(c){let u,f,p,h=null;function n(...i){if(!n.enabled)return;const l=n,g=Number(new Date),y=g-(u||g);l.diff=y,l.prev=u,l.curr=g,u=g,i[0]=o.coerce(i[0]),typeof i[0]!="string"&&i.unshift("%O");let _=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(v,b)=>{if(v==="%%")return"%";_++;const C=o.formatters[b];if(typeof C=="function"){const T=i[_];v=C.call(l,T),i.splice(_,1),_--}return v}),o.formatArgs.call(l,i),(l.log||o.log).apply(l,i)}return n.namespace=c,n.useColors=o.useColors(),n.color=o.selectColor(c),n.extend=s,n.destroy=o.destroy,Object.defineProperty(n,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(f!==o.namespaces&&(f=o.namespaces,p=o.enabled(c)),p),set:i=>{h=i}}),typeof o.init=="function"&&o.init(n),n}function s(c,u){const f=o(this.namespace+(u===void 0?":":u)+c);return f.log=this.log,f}function a(c,u){let f=0,p=0,h=-1,n=0;for(;f<c.length;)if(p<u.length&&(u[p]===c[f]||u[p]==="*"))u[p]==="*"?(h=p,n=f,p++):(f++,p++);else{if(h===-1)return!1;p=h+1,n++,f=n}for(;p<u.length&&u[p]==="*";)p++;return p===u.length}return o.debug=o,o.default=o,o.coerce=function(c){return c instanceof Error?c.stack||c.message:c},o.disable=function(){const c=[...o.names,...o.skips.map(u=>"-"+u)].join(",");return o.enable(""),c},o.enable=function(c){o.save(c),o.namespaces=c,o.names=[],o.skips=[];const u=(typeof c=="string"?c:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const f of u)f[0]==="-"?o.skips.push(f.slice(1)):o.names.push(f)},o.enabled=function(c){for(const u of o.skips)if(a(c,u))return!1;for(const u of o.names)if(a(c,u))return!0;return!1},o.humanize=t(6585),o.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(r).forEach(c=>{o[c]=r[c]}),o.names=[],o.skips=[],o.formatters={},o.selectColor=function(c){let u=0;for(let f=0;f<c.length;f++)u=(u<<5)-u+c.charCodeAt(f),u|=0;return o.colors[Math.abs(u)%o.colors.length]},o.enable(o.load()),o}},852:(m,e,t)=>{function r(){var o;try{o=e.storage.debug}catch{}return!o&&typeof process<"u"&&"env"in process&&(o=vt.DEBUG),o}(e=m.exports=t(1175)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(o){var s=this.useColors;if(o[0]=(s?"%c":"")+this.namespace+(s?" %c":" ")+o[0]+(s?"%c ":" ")+"+"+e.humanize(this.diff),s){var a="color: "+this.color;o.splice(1,0,a,"color: inherit");var c=0,u=0;o[0].replace(/%[a-zA-Z%]/g,function(f){f!=="%%"&&(c++,f==="%c"&&(u=c))}),o.splice(u,0,a)}},e.save=function(o){try{o==null?e.storage.removeItem("debug"):e.storage.debug=o}catch{}},e.load=r,e.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(o){try{return JSON.stringify(o)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}},e.enable(r())},969:m=>{function e(){}m.exports=function(t,r,o){var s=!1;return o=o||e,a.count=t,t===0?r():a;function a(c,u){if(a.count<=0)throw new Error("after called too many times");--a.count,c?(s=!0,r(c),r=o):a.count!==0||s||r(null,u)}}},1175:(m,e,t)=>{function r(s){var a;function c(){if(c.enabled){var u=c,f=+new Date,p=f-(a||f);u.diff=p,u.prev=a,u.curr=f,a=f;for(var h=new Array(arguments.length),n=0;n<h.length;n++)h[n]=arguments[n];h[0]=e.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");var i=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,function(l,g){if(l==="%%")return l;i++;var y=e.formatters[g];if(typeof y=="function"){var _=h[i];l=y.call(u,_),h.splice(i,1),i--}return l}),e.formatArgs.call(u,h),(c.log||e.log||console.log.bind(console)).apply(u,h)}}return c.namespace=s,c.enabled=e.enabled(s),c.useColors=e.useColors(),c.color=function(u){var f,p=0;for(f in u)p=(p<<5)-p+u.charCodeAt(f),p|=0;return e.colors[Math.abs(p)%e.colors.length]}(s),c.destroy=o,typeof e.init=="function"&&e.init(c),e.instances.push(c),c}function o(){var s=e.instances.indexOf(this);return s!==-1&&(e.instances.splice(s,1),!0)}(e=m.exports=r.debug=r.default=r).coerce=function(s){return s instanceof Error?s.stack||s.message:s},e.disable=function(){e.enable("")},e.enable=function(s){var a;e.save(s),e.names=[],e.skips=[];var c=(typeof s=="string"?s:"").split(/[\s,]+/),u=c.length;for(a=0;a<u;a++)c[a]&&((s=c[a].replace(/\*/g,".*?"))[0]==="-"?e.skips.push(new RegExp("^"+s.substr(1)+"$")):e.names.push(new RegExp("^"+s+"$")));for(a=0;a<e.instances.length;a++){var f=e.instances[a];f.enabled=e.enabled(f.namespace)}},e.enabled=function(s){if(s[s.length-1]==="*")return!0;var a,c;for(a=0,c=e.skips.length;a<c;a++)if(e.skips[a].test(s))return!1;for(a=0,c=e.names.length;a<c;a++)if(e.names[a].test(s))return!0;return!1},e.humanize=t(218),e.instances=[],e.names=[],e.skips=[],e.formatters={}},2121:m=>{var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={},o=0,s=0;function a(u){var f="";do f=t[u%64]+f,u=Math.floor(u/64);while(u>0);return f}function c(){var u=a(+new Date);return u!==e?(o=0,e=u):u+"."+a(o++)}for(;s<64;s++)r[t[s]]=s;c.encode=a,c.decode=function(u){var f=0;for(s=0;s<u.length;s++)f=64*f+r[u.charAt(s)];return f},m.exports=c},2225:(m,e,t)=>{var r=t(4634),o=t(8247),s=Object.prototype.toString,a=typeof M.Blob=="function"||s.call(M.Blob)==="[object BlobConstructor]",c=typeof M.File=="function"||s.call(M.File)==="[object FileConstructor]";function u(p,h){if(!p)return p;if(o(p)){var n={_placeholder:!0,num:h.length};return h.push(p),n}if(r(p)){for(var i=new Array(p.length),l=0;l<p.length;l++)i[l]=u(p[l],h);return i}if(typeof p=="object"&&!(p instanceof Date)){for(var g in i={},p)i[g]=u(p[g],h);return i}return p}function f(p,h){if(!p)return p;if(p&&p._placeholder)return h[p.num];if(r(p))for(var n=0;n<p.length;n++)p[n]=f(p[n],h);else if(typeof p=="object")for(var i in p)p[i]=f(p[i],h);return p}e.deconstructPacket=function(p){var h=[],n=p.data,i=p;return i.data=u(n,h),i.attachments=h.length,{packet:i,buffers:h}},e.reconstructPacket=function(p,h){return p.data=f(p.data,h),p.attachments=void 0,p},e.removeBlobs=function(p,h){var n=0,i=p;(function l(g,y,_){if(!g)return g;if(a&&g instanceof Blob||c&&g instanceof File){n++;var v=new FileReader;v.onload=function(){_?_[y]=this.result:i=this.result,--n||h(i)},v.readAsArrayBuffer(g)}else if(r(g))for(var b=0;b<g.length;b++)l(g[b],b,g);else if(typeof g=="object"&&!o(g))for(var C in g)l(g[C],C,g)})(i),n||h(i)}},2252:(m,e,t)=>{var r=t(5911),o=t(2370);m.exports=f;var s,a=/\n/g,c=/\\n/g;function u(){}function f(p){r.call(this,p),this.query=this.query||{},s||(M.___eio||(M.___eio=[]),s=M.___eio),this.index=s.length;var h=this;s.push(function(n){h.onData(n)}),this.query.j=this.index,M.document&&M.addEventListener&&M.addEventListener("beforeunload",function(){h.script&&(h.script.onerror=u)},!1)}o(f,r),f.prototype.supportsBinary=!1,f.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},f.prototype.doPoll=function(){var p=this,h=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),h.async=!0,h.src=this.uri(),h.onerror=function(i){p.onError("jsonp poll error",i)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(h,n):(document.head||document.body).appendChild(h),this.script=h,typeof navigator<"u"&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var i=document.createElement("iframe");document.body.appendChild(i),document.body.removeChild(i)},100)},f.prototype.doWrite=function(p,h){var n=this;if(!this.form){var i,l=document.createElement("form"),g=document.createElement("textarea"),y=this.iframeId="eio_iframe_"+this.index;l.className="socketio",l.style.position="absolute",l.style.top="-1000px",l.style.left="-1000px",l.target=y,l.method="POST",l.setAttribute("accept-charset","utf-8"),g.name="d",l.appendChild(g),document.body.appendChild(l),this.form=l,this.area=g}function _(){v(),h()}function v(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(C){n.onError("jsonp polling iframe removal error",C)}try{var b='<iframe src="javascript:0" name="'+n.iframeId+'">';i=document.createElement(b)}catch{(i=document.createElement("iframe")).name=n.iframeId,i.src="javascript:0"}i.id=n.iframeId,n.form.appendChild(i),n.iframe=i}this.form.action=this.uri(),v(),p=p.replace(c,`\\
`),this.area.value=p.replace(a,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){n.iframe.readyState==="complete"&&_()}:this.iframe.onload=_}},2370:m=>{m.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},2505:m=>{m.exports=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var o in e)r.call(e,o)&&t.push(o);return t}},2672:(m,e,t)=>{var r=t(3401),o=t(5971);function s(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.forceNode=a.forceNode,this.extraHeaders=a.extraHeaders,this.localAddress=a.localAddress}m.exports=s,o(s.prototype),s.prototype.onError=function(a,c){var u=new Error(a);return u.type="TransportError",u.description=c,this.emit("error",u),this},s.prototype.open=function(){return this.readyState!=="closed"&&this.readyState!==""||(this.readyState="opening",this.doOpen()),this},s.prototype.close=function(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this},s.prototype.send=function(a){if(this.readyState!=="open")throw new Error("Transport not open");this.write(a)},s.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},s.prototype.onData=function(a){var c=r.decodePacket(a,this.socket.binaryType);this.onPacket(c)},s.prototype.onPacket=function(a){this.emit("packet",a)},s.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},2902:m=>{var e=1e3,t=60*e,r=60*t,o=24*r;function s(a,c,u){if(!(a<c))return a<1.5*c?Math.floor(a/c)+" "+u:Math.ceil(a/c)+" "+u+"s"}m.exports=function(a,c){c=c||{};var u,f=typeof a;if(f==="string"&&a.length>0)return function(p){if(!((p=String(p)).length>100)){var h=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(h){var n=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*o;case"hours":case"hour":case"hrs":case"hr":case"h":return n*r;case"minutes":case"minute":case"mins":case"min":case"m":return n*t;case"seconds":case"second":case"secs":case"sec":case"s":return n*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(a);if(f==="number"&&isNaN(a)===!1)return c.long?s(u=a,o,"day")||s(u,r,"hour")||s(u,t,"minute")||s(u,e,"second")||u+" ms":function(p){return p>=o?Math.round(p/o)+"d":p>=r?Math.round(p/r)+"h":p>=t?Math.round(p/t)+"m":p>=e?Math.round(p/e)+"s":p+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},3051:(m,e,t)=>{var r=t(8383);m.exports=function(o){var s=o.xdomain,a=o.xscheme,c=o.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!s||r))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!a&&c)return new XDomainRequest}catch{}if(!s)try{return new M[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}},3059:m=>{function e(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}m.exports=e,e.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var r=Math.random(),o=Math.floor(r*this.jitter*t);t=1&Math.floor(10*r)?t+o:t-o}return 0|Math.min(t,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(t){this.ms=t},e.prototype.setMax=function(t){this.max=t},e.prototype.setJitter=function(t){this.jitter=t}},3097:m=>{var e=1e3,t=60*e,r=60*t,o=24*r;function s(a,c,u){if(!(a<c))return a<1.5*c?Math.floor(a/c)+" "+u:Math.ceil(a/c)+" "+u+"s"}m.exports=function(a,c){c=c||{};var u,f=typeof a;if(f==="string"&&a.length>0)return function(p){if(!((p=String(p)).length>100)){var h=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(h){var n=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*o;case"hours":case"hour":case"hrs":case"hr":case"h":return n*r;case"minutes":case"minute":case"mins":case"min":case"m":return n*t;case"seconds":case"second":case"secs":case"sec":case"s":return n*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(a);if(f==="number"&&isNaN(a)===!1)return c.long?s(u=a,o,"day")||s(u,r,"hour")||s(u,t,"minute")||s(u,e,"second")||u+" ms":function(p){return p>=o?Math.round(p/o)+"d":p>=r?Math.round(p/r)+"h":p>=t?Math.round(p/t)+"m":p>=e?Math.round(p/e)+"s":p+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},3118:m=>{var e=e!==void 0?e:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"&&MozBlobBuilder,t=function(){try{return new Blob(["hi"]).size===2}catch{return!1}}(),r=t&&function(){try{return new Blob([new Uint8Array([1,2])]).size===2}catch{return!1}}(),o=e&&e.prototype.append&&e.prototype.getBlob;function s(u){return u.map(function(f){if(f.buffer instanceof ArrayBuffer){var p=f.buffer;if(f.byteLength!==p.byteLength){var h=new Uint8Array(f.byteLength);h.set(new Uint8Array(p,f.byteOffset,f.byteLength)),p=h.buffer}return p}return f})}function a(u,f){f=f||{};var p=new e;return s(u).forEach(function(h){p.append(h)}),f.type?p.getBlob(f.type):p.getBlob()}function c(u,f){return new Blob(s(u),f||{})}typeof Blob<"u"&&(a.prototype=Blob.prototype,c.prototype=Blob.prototype),m.exports=t?r?Blob:c:o?a:void 0},3344:m=>{m.exports=function(e,t,r){var o=e.byteLength;if(t=t||0,r=r||o,e.slice)return e.slice(t,r);if(t<0&&(t+=o),r<0&&(r+=o),r>o&&(r=o),t>=o||t>=r||o===0)return new ArrayBuffer(0);for(var s=new Uint8Array(e),a=new Uint8Array(r-t),c=t,u=0;c<r;c++,u++)a[u]=s[c];return a.buffer}},3357:(m,e,t)=>{m.exports=t(7292),m.exports.parser=t(3401)},3371:(m,e)=>{(function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),o=0;o<64;o++)r[t.charCodeAt(o)]=o;e.encode=function(s){var a,c=new Uint8Array(s),u=c.length,f="";for(a=0;a<u;a+=3)f+=t[c[a]>>2],f+=t[(3&c[a])<<4|c[a+1]>>4],f+=t[(15&c[a+1])<<2|c[a+2]>>6],f+=t[63&c[a+2]];return u%3==2?f=f.substring(0,f.length-1)+"=":u%3==1&&(f=f.substring(0,f.length-2)+"=="),f},e.decode=function(s){var a,c,u,f,p,h=.75*s.length,n=s.length,i=0;s[s.length-1]==="="&&(h--,s[s.length-2]==="="&&h--);var l=new ArrayBuffer(h),g=new Uint8Array(l);for(a=0;a<n;a+=4)c=r[s.charCodeAt(a)],u=r[s.charCodeAt(a+1)],f=r[s.charCodeAt(a+2)],p=r[s.charCodeAt(a+3)],g[i++]=c<<2|u>>4,g[i++]=(15&u)<<4|f>>2,g[i++]=(3&f)<<6|63&p;return l}})()},3401:(m,e,t)=>{var r,o=t(2505),s=t(8839),a=t(3344),c=t(969),u=t(8758);typeof ArrayBuffer<"u"&&(r=t(3371));var f=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),p=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),h=f||p;e.protocol=3;var n=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},i=o(n),l={type:"error",data:"parser error"},g=t(3118);function y(_,v,b){for(var C=new Array(_.length),T=c(_.length,b),S=function(w,F,I){v(F,function(O,D){C[w]=D,I(O,C)})},A=0;A<_.length;A++)S(A,_[A],T)}e.encodePacket=function(_,v,b,C){typeof v=="function"&&(C=v,v=!1),typeof b=="function"&&(C=b,b=null);var T=_.data===void 0?void 0:_.data.buffer||_.data;if(typeof ArrayBuffer<"u"&&T instanceof ArrayBuffer)return function(A,w,F){if(!w)return e.encodeBase64Packet(A,F);var I=A.data,O=new Uint8Array(I),D=new Uint8Array(1+I.byteLength);D[0]=n[A.type];for(var R=0;R<O.length;R++)D[R+1]=O[R];return F(D.buffer)}(_,v,C);if(g!==void 0&&T instanceof g)return function(A,w,F){if(!w)return e.encodeBase64Packet(A,F);if(h)return function(O,D,R){if(!D)return e.encodeBase64Packet(O,R);var L=new FileReader;return L.onload=function(){e.encodePacket({type:O.type,data:L.result},D,!0,R)},L.readAsArrayBuffer(O.data)}(A,w,F);var I=new Uint8Array(1);return I[0]=n[A.type],F(new g([I.buffer,A.data]))}(_,v,C);if(T&&T.base64)return function(A,w){return w("b"+e.packets[A.type]+A.data.data)}(_,C);var S=n[_.type];return _.data!==void 0&&(S+=b?u.encode(String(_.data),{strict:!1}):String(_.data)),C(""+S)},e.encodeBase64Packet=function(_,v){var b,C="b"+e.packets[_.type];if(g!==void 0&&_.data instanceof g){var T=new FileReader;return T.onload=function(){var F=T.result.split(",")[1];v(C+F)},T.readAsDataURL(_.data)}try{b=String.fromCharCode.apply(null,new Uint8Array(_.data))}catch{for(var S=new Uint8Array(_.data),A=new Array(S.length),w=0;w<S.length;w++)A[w]=S[w];b=String.fromCharCode.apply(null,A)}return C+=btoa(b),v(C)},e.decodePacket=function(_,v,b){if(_===void 0)return l;if(typeof _=="string"){if(_.charAt(0)==="b")return e.decodeBase64Packet(_.substr(1),v);if(b&&(_=function(S){try{S=u.decode(S,{strict:!1})}catch{return!1}return S}(_))===!1)return l;var C=_.charAt(0);return Number(C)==C&&i[C]?_.length>1?{type:i[C],data:_.substring(1)}:{type:i[C]}:l}C=new Uint8Array(_)[0];var T=a(_,1);return g&&v==="blob"&&(T=new g([T])),{type:i[C],data:T}},e.decodeBase64Packet=function(_,v){var b=i[_.charAt(0)];if(!r)return{type:b,data:{base64:!0,data:_.substr(1)}};var C=r.decode(_.substr(1));return v==="blob"&&g&&(C=new g([C])),{type:b,data:C}},e.encodePayload=function(_,v,b){typeof v=="function"&&(b=v,v=null);var C=s(_);return v&&C?g&&!h?e.encodePayloadAsBlob(_,b):e.encodePayloadAsArrayBuffer(_,b):_.length?void y(_,function(T,S){e.encodePacket(T,!!C&&v,!1,function(A){S(null,function(w){return w.length+":"+w}(A))})},function(T,S){return b(S.join(""))}):b("0:")},e.decodePayload=function(_,v,b){if(typeof _!="string")return e.decodePayloadAsBinary(_,v,b);var C;if(typeof v=="function"&&(b=v,v=null),_==="")return b(l,0,1);for(var T,S,A="",w=0,F=_.length;w<F;w++){var I=_.charAt(w);if(I===":"){if(A===""||A!=(T=Number(A))||A!=(S=_.substr(w+1,T)).length)return b(l,0,1);if(S.length){if(C=e.decodePacket(S,v,!1),l.type===C.type&&l.data===C.data)return b(l,0,1);if(b(C,w+T,F)===!1)return}w+=T,A=""}else A+=I}return A!==""?b(l,0,1):void 0},e.encodePayloadAsArrayBuffer=function(_,v){if(!_.length)return v(new ArrayBuffer(0));y(_,function(b,C){e.encodePacket(b,!0,!0,function(T){return C(null,T)})},function(b,C){var T=C.reduce(function(w,F){var I;return w+(I=typeof F=="string"?F.length:F.byteLength).toString().length+I+2},0),S=new Uint8Array(T),A=0;return C.forEach(function(w){var F=typeof w=="string",I=w;if(F){for(var O=new Uint8Array(w.length),D=0;D<w.length;D++)O[D]=w.charCodeAt(D);I=O.buffer}S[A++]=F?0:1;var R=I.byteLength.toString();for(D=0;D<R.length;D++)S[A++]=parseInt(R[D]);for(S[A++]=255,O=new Uint8Array(I),D=0;D<O.length;D++)S[A++]=O[D]}),v(S.buffer)})},e.encodePayloadAsBlob=function(_,v){y(_,function(b,C){e.encodePacket(b,!0,!0,function(T){var S=new Uint8Array(1);if(S[0]=1,typeof T=="string"){for(var A=new Uint8Array(T.length),w=0;w<T.length;w++)A[w]=T.charCodeAt(w);T=A.buffer,S[0]=0}var F=(T instanceof ArrayBuffer?T.byteLength:T.size).toString(),I=new Uint8Array(F.length+1);for(w=0;w<F.length;w++)I[w]=parseInt(F[w]);if(I[F.length]=255,g){var O=new g([S.buffer,I.buffer,T]);C(null,O)}})},function(b,C){return v(new g(C))})},e.decodePayloadAsBinary=function(_,v,b){typeof v=="function"&&(b=v,v=null);for(var C=_,T=[];C.byteLength>0;){for(var S=new Uint8Array(C),A=S[0]===0,w="",F=1;S[F]!==255;F++){if(w.length>310)return b(l,0,1);w+=S[F]}C=a(C,2+w.length),w=parseInt(w);var I=a(C,0,w);if(A)try{I=String.fromCharCode.apply(null,new Uint8Array(I))}catch{var O=new Uint8Array(I);for(I="",F=0;F<O.length;F++)I+=String.fromCharCode(O[F])}T.push(I),C=a(C,w)}var D=T.length;T.forEach(function(R,L){b(e.decodePacket(R,v,!0),L,D)})}},4258:m=>{var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,t=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];m.exports=function(r){var o=r,s=r.indexOf("["),a=r.indexOf("]");s!=-1&&a!=-1&&(r=r.substring(0,s)+r.substring(s,a).replace(/:/g,";")+r.substring(a,r.length));for(var c=e.exec(r||""),u={},f=14;f--;)u[t[f]]=c[f]||"";return s!=-1&&a!=-1&&(u.source=o,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u}},4634:m=>{var e={}.toString;m.exports=Array.isArray||function(t){return e.call(t)=="[object Array]"}},4745:m=>{m.exports=function(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}},5074:(m,e,t)=>{var r=t(852)("socket.io-parser"),o=t(5971),s=t(8839),a=t(2225),c=t(4634),u=t(8247);function f(){}function p(l){var g=""+l.type;return e.BINARY_EVENT!==l.type&&e.BINARY_ACK!==l.type||(g+=l.attachments+"-"),l.nsp&&l.nsp!=="/"&&(g+=l.nsp+","),l.id!=null&&(g+=l.id),l.data!=null&&(g+=JSON.stringify(l.data)),r("encoded %j as %s",l,g),g}function h(){this.reconstructor=null}function n(l){this.reconPack=l,this.buffers=[]}function i(l){return{type:e.ERROR,data:"parser error: "+l}}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=f,e.Decoder=h,f.prototype.encode=function(l,g){l.type!==e.EVENT&&l.type!==e.ACK||!s(l.data)||(l.type=l.type===e.EVENT?e.BINARY_EVENT:e.BINARY_ACK),r("encoding packet %j",l),e.BINARY_EVENT===l.type||e.BINARY_ACK===l.type?function(y,_){a.removeBlobs(y,function(v){var b=a.deconstructPacket(v),C=p(b.packet),T=b.buffers;T.unshift(C),_(T)})}(l,g):g([p(l)])},o(h.prototype),h.prototype.add=function(l){var g;if(typeof l=="string")g=function(y){var _=0,v={type:Number(y.charAt(0))};if(e.types[v.type]==null)return i("unknown packet type "+v.type);if(e.BINARY_EVENT===v.type||e.BINARY_ACK===v.type){for(var b="";y.charAt(++_)!=="-"&&(b+=y.charAt(_),_!=y.length););if(b!=Number(b)||y.charAt(_)!=="-")throw new Error("Illegal attachments");v.attachments=Number(b)}if(y.charAt(_+1)==="/")for(v.nsp="";++_&&(T=y.charAt(_))!==","&&(v.nsp+=T,_!==y.length););else v.nsp="/";var C=y.charAt(_+1);if(C!==""&&Number(C)==C){for(v.id="";++_;){var T;if((T=y.charAt(_))==null||Number(T)!=T){--_;break}if(v.id+=y.charAt(_),_===y.length)break}v.id=Number(v.id)}if(y.charAt(++_)){var S=function(A){try{return JSON.parse(A)}catch{return!1}}(y.substr(_));if(S===!1||v.type!==e.ERROR&&!c(S))return i("invalid payload");v.data=S}return r("decoded %s as %j",y,v),v}(l),e.BINARY_EVENT===g.type||e.BINARY_ACK===g.type?(this.reconstructor=new n(g),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",g)):this.emit("decoded",g);else{if(!u(l)&&!l.base64)throw new Error("Unknown type: "+l);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(g=this.reconstructor.takeBinaryData(l))&&(this.reconstructor=null,this.emit("decoded",g))}},h.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},n.prototype.takeBinaryData=function(l){if(this.buffers.push(l),this.buffers.length===this.reconPack.attachments){var g=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),g}return null},n.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},5660:()=>{},5911:(m,e,t)=>{var r=t(2672),o=t(9140),s=t(3401),a=t(2370),c=t(2121),u=t(6617)("engine.io-client:polling");m.exports=p;var f=new(t(3051))({xdomain:!1}).responseType!=null;function p(h){var n=h&&h.forceBase64;f&&!n||(this.supportsBinary=!1),r.call(this,h)}a(p,r),p.prototype.name="polling",p.prototype.doOpen=function(){this.poll()},p.prototype.pause=function(h){var n=this;function i(){u("paused"),n.readyState="paused",h()}if(this.readyState="pausing",this.polling||!this.writable){var l=0;this.polling&&(u("we are currently polling - waiting to pause"),l++,this.once("pollComplete",function(){u("pre-pause polling complete"),--l||i()})),this.writable||(u("we are currently writing - waiting to pause"),l++,this.once("drain",function(){u("pre-pause writing complete"),--l||i()}))}else i()},p.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},p.prototype.onData=function(h){var n=this;u("polling got data %s",h),s.decodePayload(h,this.socket.binaryType,function(i,l,g){if(n.readyState==="opening"&&n.onOpen(),i.type==="close")return n.onClose(),!1;n.onPacket(i)}),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},p.prototype.doClose=function(){var h=this;function n(){u("writing close packet"),h.write([{type:"close"}])}this.readyState==="open"?(u("transport open - closing"),n()):(u("transport not open - deferring close"),this.once("open",n))},p.prototype.write=function(h){var n=this;this.writable=!1;var i=function(){n.writable=!0,n.emit("drain")};s.encodePayload(h,this.supportsBinary,function(l){n.doWrite(l,i)})},p.prototype.uri=function(){var h=this.query||{},n=this.secure?"https":"http",i="";return this.timestampRequests!==!1&&(h[this.timestampParam]=c()),this.supportsBinary||h.sid||(h.b64=1),h=o.encode(h),this.port&&(n==="https"&&Number(this.port)!==443||n==="http"&&Number(this.port)!==80)&&(i=":"+this.port),h.length&&(h="?"+h),n+"://"+(this.hostname.indexOf(":")!==-1?"["+this.hostname+"]":this.hostname)+i+this.path+h}},5971:m=>{function e(t){if(t)return function(r){for(var o in e.prototype)r[o]=e.prototype[o];return r}(t)}m.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(r),this},e.prototype.once=function(t,r){function o(){this.off(t,o),r.apply(this,arguments)}return o.fn=r,this.on(t,o),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o,s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var a=0;a<s.length;a++)if((o=s[a])===r||o.fn===r){s.splice(a,1);break}return this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};var r=[].slice.call(arguments,1),o=this._callbacks["$"+t];if(o)for(var s=0,a=(o=o.slice(0)).length;s<a;++s)o[s].apply(this,r);return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},6585:m=>{var e=1e3,t=60*e,r=60*t,o=24*r,s=7*o;function a(c,u,f,p){var h=u>=1.5*f;return Math.round(c/f)+" "+p+(h?"s":"")}m.exports=function(c,u){u=u||{};var f,p,h=typeof c;if(h==="string"&&c.length>0)return function(n){if(!((n=String(n)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(n);if(i){var l=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*l;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*t;case"seconds":case"second":case"secs":case"sec":case"s":return l*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}(c);if(h==="number"&&isFinite(c))return u.long?(f=c,(p=Math.abs(f))>=o?a(f,p,o,"day"):p>=r?a(f,p,r,"hour"):p>=t?a(f,p,t,"minute"):p>=e?a(f,p,e,"second"):f+" ms"):function(n){var i=Math.abs(n);return i>=o?Math.round(n/o)+"d":i>=r?Math.round(n/r)+"h":i>=t?Math.round(n/t)+"m":i>=e?Math.round(n/e)+"s":n+"ms"}(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))}},6617:(m,e,t)=>{function r(){var o;try{o=e.storage.debug}catch{}return!o&&typeof process<"u"&&"env"in process&&(o=vt.DEBUG),o}(e=m.exports=t(9110)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(o){var s=this.useColors;if(o[0]=(s?"%c":"")+this.namespace+(s?" %c":" ")+o[0]+(s?"%c ":" ")+"+"+e.humanize(this.diff),s){var a="color: "+this.color;o.splice(1,0,a,"color: inherit");var c=0,u=0;o[0].replace(/%[a-zA-Z%]/g,function(f){f!=="%%"&&(c++,f==="%c"&&(u=c))}),o.splice(u,0,a)}},e.save=function(o){try{o==null?e.storage.removeItem("debug"):e.storage.debug=o}catch{}},e.load=r,e.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(o){try{return JSON.stringify(o)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}},e.enable(r())},6855:(m,e,t)=>{var r,o=t(2672),s=t(3401),a=t(9140),c=t(2370),u=t(2121),f=t(6617)("engine.io-client:websocket"),p=M.WebSocket||M.MozWebSocket;if(typeof window>"u")try{r=t(5660)}catch{}var h=p;function n(i){i&&i.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=i.perMessageDeflate,this.usingBrowserWebSocket=p&&!i.forceNode,this.protocols=i.protocols,this.usingBrowserWebSocket||(h=r),o.call(this,i)}h||typeof window<"u"||(h=r),m.exports=n,c(n,o),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var i=this.uri(),l=this.protocols,g={agent:this.agent,perMessageDeflate:this.perMessageDeflate};g.pfx=this.pfx,g.key=this.key,g.passphrase=this.passphrase,g.cert=this.cert,g.ca=this.ca,g.ciphers=this.ciphers,g.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(g.headers=this.extraHeaders),this.localAddress&&(g.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?l?new h(i,l):new h(i):new h(i,l,g)}catch(y){return this.emit("error",y)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var i=this;this.ws.onopen=function(){i.onOpen()},this.ws.onclose=function(){i.onClose()},this.ws.onmessage=function(l){i.onData(l.data)},this.ws.onerror=function(l){i.onError("websocket error",l)}},n.prototype.write=function(i){var l=this;this.writable=!1;for(var g=i.length,y=0,_=g;y<_;y++)(function(v){s.encodePacket(v,l.supportsBinary,function(b){if(!l.usingBrowserWebSocket){var C={};v.options&&(C.compress=v.options.compress),l.perMessageDeflate&&(typeof b=="string"?M.Buffer.byteLength(b):b.length)<l.perMessageDeflate.threshold&&(C.compress=!1)}try{l.usingBrowserWebSocket?l.ws.send(b):l.ws.send(b,C)}catch{f("websocket closed before onclose event")}--g||(l.emit("flush"),setTimeout(function(){l.writable=!0,l.emit("drain")},0))})})(i[y])},n.prototype.onClose=function(){o.prototype.onClose.call(this)},n.prototype.doClose=function(){this.ws!==void 0&&this.ws.close()},n.prototype.uri=function(){var i=this.query||{},l=this.secure?"wss":"ws",g="";return this.port&&(l==="wss"&&Number(this.port)!==443||l==="ws"&&Number(this.port)!==80)&&(g=":"+this.port),this.timestampRequests&&(i[this.timestampParam]=u()),this.supportsBinary||(i.b64=1),(i=a.encode(i)).length&&(i="?"+i),l+"://"+(this.hostname.indexOf(":")!==-1?"["+this.hostname+"]":this.hostname)+g+this.path+i},n.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===n.prototype.name)}},6938:m=>{var e=[].indexOf;m.exports=function(t,r){if(e)return t.indexOf(r);for(var o=0;o<t.length;++o)if(t[o]===r)return o;return-1}},7007:m=>{var e,t=typeof Reflect=="object"?Reflect:null,r=t&&typeof t.apply=="function"?t.apply:function(y,_,v){return Function.prototype.apply.call(y,_,v)};e=t&&typeof t.ownKeys=="function"?t.ownKeys:Object.getOwnPropertySymbols?function(y){return Object.getOwnPropertyNames(y).concat(Object.getOwnPropertySymbols(y))}:function(y){return Object.getOwnPropertyNames(y)};var o=Number.isNaN||function(y){return y!=y};function s(){s.init.call(this)}m.exports=s,m.exports.once=function(y,_){return new Promise(function(v,b){function C(S){y.removeListener(_,T),b(S)}function T(){typeof y.removeListener=="function"&&y.removeListener("error",C),v([].slice.call(arguments))}g(y,_,T,{once:!0}),_!=="error"&&function(S,A){typeof S.on=="function"&&g(S,"error",A,{once:!0})}(y,C)})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function c(y){if(typeof y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof y)}function u(y){return y._maxListeners===void 0?s.defaultMaxListeners:y._maxListeners}function f(y,_,v,b){var C,T,S,A;if(c(v),(T=y._events)===void 0?(T=y._events=Object.create(null),y._eventsCount=0):(T.newListener!==void 0&&(y.emit("newListener",_,v.listener?v.listener:v),T=y._events),S=T[_]),S===void 0)S=T[_]=v,++y._eventsCount;else if(typeof S=="function"?S=T[_]=b?[v,S]:[S,v]:b?S.unshift(v):S.push(v),(C=u(y))>0&&S.length>C&&!S.warned){S.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+S.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=y,w.type=_,w.count=S.length,A=w,console&&console.warn&&console.warn(A)}return y}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(y,_,v){var b={fired:!1,wrapFn:void 0,target:y,type:_,listener:v},C=p.bind(b);return C.listener=v,b.wrapFn=C,C}function n(y,_,v){var b=y._events;if(b===void 0)return[];var C=b[_];return C===void 0?[]:typeof C=="function"?v?[C.listener||C]:[C]:v?function(T){for(var S=new Array(T.length),A=0;A<S.length;++A)S[A]=T[A].listener||T[A];return S}(C):l(C,C.length)}function i(y){var _=this._events;if(_!==void 0){var v=_[y];if(typeof v=="function")return 1;if(v!==void 0)return v.length}return 0}function l(y,_){for(var v=new Array(_),b=0;b<_;++b)v[b]=y[b];return v}function g(y,_,v,b){if(typeof y.on=="function")b.once?y.once(_,v):y.on(_,v);else{if(typeof y.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof y);y.addEventListener(_,function C(T){b.once&&y.removeEventListener(_,C),v(T)})}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(y){if(typeof y!="number"||y<0||o(y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+y+".");a=y}}),s.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(y){if(typeof y!="number"||y<0||o(y))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+y+".");return this._maxListeners=y,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(y){for(var _=[],v=1;v<arguments.length;v++)_.push(arguments[v]);var b=y==="error",C=this._events;if(C!==void 0)b=b&&C.error===void 0;else if(!b)return!1;if(b){var T;if(_.length>0&&(T=_[0]),T instanceof Error)throw T;var S=new Error("Unhandled error."+(T?" ("+T.message+")":""));throw S.context=T,S}var A=C[y];if(A===void 0)return!1;if(typeof A=="function")r(A,this,_);else{var w=A.length,F=l(A,w);for(v=0;v<w;++v)r(F[v],this,_)}return!0},s.prototype.addListener=function(y,_){return f(this,y,_,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(y,_){return f(this,y,_,!0)},s.prototype.once=function(y,_){return c(_),this.on(y,h(this,y,_)),this},s.prototype.prependOnceListener=function(y,_){return c(_),this.prependListener(y,h(this,y,_)),this},s.prototype.removeListener=function(y,_){var v,b,C,T,S;if(c(_),(b=this._events)===void 0)return this;if((v=b[y])===void 0)return this;if(v===_||v.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete b[y],b.removeListener&&this.emit("removeListener",y,v.listener||_));else if(typeof v!="function"){for(C=-1,T=v.length-1;T>=0;T--)if(v[T]===_||v[T].listener===_){S=v[T].listener,C=T;break}if(C<0)return this;C===0?v.shift():function(A,w){for(;w+1<A.length;w++)A[w]=A[w+1];A.pop()}(v,C),v.length===1&&(b[y]=v[0]),b.removeListener!==void 0&&this.emit("removeListener",y,S||_)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(y){var _,v,b;if((v=this._events)===void 0)return this;if(v.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):v[y]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete v[y]),this;if(arguments.length===0){var C,T=Object.keys(v);for(b=0;b<T.length;++b)(C=T[b])!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(_=v[y])=="function")this.removeListener(y,_);else if(_!==void 0)for(b=_.length-1;b>=0;b--)this.removeListener(y,_[b]);return this},s.prototype.listeners=function(y){return n(this,y,!0)},s.prototype.rawListeners=function(y){return n(this,y,!1)},s.listenerCount=function(y,_){return typeof y.listenerCount=="function"?y.listenerCount(_):i.call(y,_)},s.prototype.listenerCount=i,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},7292:(m,e,t)=>{var r=t(8520),o=t(5971),s=t(6617)("engine.io-client:socket"),a=t(6938),c=t(3401),u=t(4258),f=t(9140);function p(h,n){if(!(this instanceof p))return new p(h,n);n=n||{},h&&typeof h=="object"&&(n=h,h=null),h?(h=u(h),n.hostname=h.host,n.secure=h.protocol==="https"||h.protocol==="wss",n.port=h.port,h.query&&(n.query=h.query)):n.host&&(n.hostname=u(n.host).host),this.secure=n.secure!=null?n.secure:M.location&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(M.location?location.hostname:"localhost"),this.port=n.port||(M.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},typeof this.query=="string"&&(this.query=f.decode(this.query)),this.upgrade=n.upgrade!==!1,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=n.jsonp!==!1,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.transportOptions=n.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=n.perMessageDeflate!==!1&&(n.perMessageDeflate||{}),this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=n.rejectUnauthorized===void 0||n.rejectUnauthorized,this.forceNode=!!n.forceNode;var i=typeof M=="object"&&M;i.global===i&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}m.exports=p,p.priorWebsocketSuccess=!1,o(p.prototype),p.protocol=c.protocol,p.Socket=p,p.Transport=t(2672),p.transports=t(8520),p.parser=t(3401),p.prototype.createTransport=function(h){s('creating transport "%s"',h);var n=function(l){var g={};for(var y in l)l.hasOwnProperty(y)&&(g[y]=l[y]);return g}(this.query);n.EIO=c.protocol,n.transport=h;var i=this.transportOptions[h]||{};return this.id&&(n.sid=this.id),new r[h]({query:n,socket:this,agent:i.agent||this.agent,hostname:i.hostname||this.hostname,port:i.port||this.port,secure:i.secure||this.secure,path:i.path||this.path,forceJSONP:i.forceJSONP||this.forceJSONP,jsonp:i.jsonp||this.jsonp,forceBase64:i.forceBase64||this.forceBase64,enablesXDR:i.enablesXDR||this.enablesXDR,timestampRequests:i.timestampRequests||this.timestampRequests,timestampParam:i.timestampParam||this.timestampParam,policyPort:i.policyPort||this.policyPort,pfx:i.pfx||this.pfx,key:i.key||this.key,passphrase:i.passphrase||this.passphrase,cert:i.cert||this.cert,ca:i.ca||this.ca,ciphers:i.ciphers||this.ciphers,rejectUnauthorized:i.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:i.perMessageDeflate||this.perMessageDeflate,extraHeaders:i.extraHeaders||this.extraHeaders,forceNode:i.forceNode||this.forceNode,localAddress:i.localAddress||this.localAddress,requestTimeout:i.requestTimeout||this.requestTimeout,protocols:i.protocols||void 0})},p.prototype.open=function(){var h;if(this.rememberUpgrade&&p.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)h="websocket";else{if(this.transports.length===0){var n=this;return void setTimeout(function(){n.emit("error","No transports available")},0)}h=this.transports[0]}this.readyState="opening";try{h=this.createTransport(h)}catch{return this.transports.shift(),void this.open()}h.open(),this.setTransport(h)},p.prototype.setTransport=function(h){s("setting transport %s",h.name);var n=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=h,h.on("drain",function(){n.onDrain()}).on("packet",function(i){n.onPacket(i)}).on("error",function(i){n.onError(i)}).on("close",function(){n.onClose("transport close")})},p.prototype.probe=function(h){s('probing transport "%s"',h);var n=this.createTransport(h,{probe:1}),i=!1,l=this;function g(){if(l.onlyBinaryUpgrades){var S=!this.supportsBinary&&l.transport.supportsBinary;i=i||S}i||(s('probe transport "%s" opened',h),n.send([{type:"ping",data:"probe"}]),n.once("packet",function(A){if(!i)if(A.type==="pong"&&A.data==="probe"){if(s('probe transport "%s" pong',h),l.upgrading=!0,l.emit("upgrading",n),!n)return;p.priorWebsocketSuccess=n.name==="websocket",s('pausing current transport "%s"',l.transport.name),l.transport.pause(function(){i||l.readyState!=="closed"&&(s("changing transport and sending upgrade packet"),T(),l.setTransport(n),n.send([{type:"upgrade"}]),l.emit("upgrade",n),n=null,l.upgrading=!1,l.flush())})}else{s('probe transport "%s" failed',h);var w=new Error("probe error");w.transport=n.name,l.emit("upgradeError",w)}}))}function y(){i||(i=!0,T(),n.close(),n=null)}function _(S){var A=new Error("probe error: "+S);A.transport=n.name,y(),s('probe transport "%s" failed because of error: %s',h,S),l.emit("upgradeError",A)}function v(){_("transport closed")}function b(){_("socket closed")}function C(S){n&&S.name!==n.name&&(s('"%s" works - aborting "%s"',S.name,n.name),y())}function T(){n.removeListener("open",g),n.removeListener("error",_),n.removeListener("close",v),l.removeListener("close",b),l.removeListener("upgrading",C)}p.priorWebsocketSuccess=!1,n.once("open",g),n.once("error",_),n.once("close",v),this.once("close",b),this.once("upgrading",C),n.open()},p.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",p.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var h=0,n=this.upgrades.length;h<n;h++)this.probe(this.upgrades[h])}},p.prototype.onPacket=function(h){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(s('socket receive: type "%s", data "%s"',h.type,h.data),this.emit("packet",h),this.emit("heartbeat"),h.type){case"open":this.onHandshake(JSON.parse(h.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var n=new Error("server error");n.code=h.data,this.onError(n);break;case"message":this.emit("data",h.data),this.emit("message",h.data)}else s('packet received with socket readyState "%s"',this.readyState)},p.prototype.onHandshake=function(h){this.emit("handshake",h),this.id=h.sid,this.transport.query.sid=h.sid,this.upgrades=this.filterUpgrades(h.upgrades),this.pingInterval=h.pingInterval,this.pingTimeout=h.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},p.prototype.onHeartbeat=function(h){clearTimeout(this.pingTimeoutTimer);var n=this;n.pingTimeoutTimer=setTimeout(function(){n.readyState!=="closed"&&n.onClose("ping timeout")},h||n.pingInterval+n.pingTimeout)},p.prototype.setPing=function(){var h=this;clearTimeout(h.pingIntervalTimer),h.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",h.pingTimeout),h.ping(),h.onHeartbeat(h.pingTimeout)},h.pingInterval)},p.prototype.ping=function(){var h=this;this.sendPacket("ping",function(){h.emit("ping")})},p.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()},p.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},p.prototype.write=p.prototype.send=function(h,n,i){return this.sendPacket("message",h,n,i),this},p.prototype.sendPacket=function(h,n,i,l){if(typeof n=="function"&&(l=n,n=void 0),typeof i=="function"&&(l=i,i=null),this.readyState!=="closing"&&this.readyState!=="closed"){(i=i||{}).compress=i.compress!==!1;var g={type:h,data:n,options:i};this.emit("packetCreate",g),this.writeBuffer.push(g),l&&this.once("flush",l),this.flush()}},p.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var h=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?l():n()}):this.upgrading?l():n()}function n(){h.onClose("forced close"),s("socket closing - telling transport to close"),h.transport.close()}function i(){h.removeListener("upgrade",i),h.removeListener("upgradeError",i),n()}function l(){h.once("upgrade",i),h.once("upgradeError",i)}return this},p.prototype.onError=function(h){s("socket error %j",h),p.priorWebsocketSuccess=!1,this.emit("error",h),this.onClose("transport error",h)},p.prototype.onClose=function(h,n){this.readyState!=="opening"&&this.readyState!=="open"&&this.readyState!=="closing"||(s('socket close with reason: "%s"',h),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",h,n),this.writeBuffer=[],this.prevBufferLen=0)},p.prototype.filterUpgrades=function(h){for(var n=[],i=0,l=h.length;i<l;i++)~a(this.transports,h[i])&&n.push(h[i]);return n}},7698:(m,e,t)=>{var r=t(9331),o=t(5074),s=t(9725),a=t(9368)("socket.io-client");m.exports=e=u;var c=e.managers={};function u(f,p){typeof f=="object"&&(p=f,f=void 0),p=p||{};var h,n=r(f),i=n.source,l=n.id,g=n.path,y=c[l]&&g in c[l].nsps;return p.forceNew||p["force new connection"]||p.multiplex===!1||y?(a("ignoring socket cache for %s",i),h=s(i,p)):(c[l]||(a("new io instance for %s",i),c[l]=s(i,p)),h=c[l]),n.query&&!p.query&&(p.query=n.query),h.socket(n.path,p)}e.protocol=o.protocol,e.connect=u,e.Manager=t(9725),e.Socket=t(7773)},7773:(m,e,t)=>{var r=t(5074),o=t(5971),s=t(8104),a=t(4745),c=t(8144),u=t(9368)("socket.io-client:socket"),f=t(9140);m.exports=n;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=o.prototype.emit;function n(i,l,g){this.io=i,this.nsp=l,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,g&&g.query&&(this.query=g.query),this.io.autoConnect&&this.open()}o(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var i=this.io;this.subs=[a(i,"open",c(this,"onopen")),a(i,"packet",c(this,"onpacket")),a(i,"close",c(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting")),this},n.prototype.send=function(){var i=s(arguments);return i.unshift("message"),this.emit.apply(this,i),this},n.prototype.emit=function(i){if(p.hasOwnProperty(i))return h.apply(this,arguments),this;var l=s(arguments),g={type:r.EVENT,data:l,options:{}};return g.options.compress=!this.flags||this.flags.compress!==!1,typeof l[l.length-1]=="function"&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=l.pop(),g.id=this.ids++),this.connected?this.packet(g):this.sendBuffer.push(g),delete this.flags,this},n.prototype.packet=function(i){i.nsp=this.nsp,this.io.packet(i)},n.prototype.onopen=function(){if(u("transport is open - connecting"),this.nsp!=="/")if(this.query){var i=typeof this.query=="object"?f.encode(this.query):this.query;u("sending connect packet with query %s",i),this.packet({type:r.CONNECT,query:i})}else this.packet({type:r.CONNECT})},n.prototype.onclose=function(i){u("close (%s)",i),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",i)},n.prototype.onpacket=function(i){if(i.nsp===this.nsp)switch(i.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(i);break;case r.ACK:case r.BINARY_ACK:this.onack(i);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",i.data)}},n.prototype.onevent=function(i){var l=i.data||[];u("emitting event %j",l),i.id!=null&&(u("attaching ack callback to event"),l.push(this.ack(i.id))),this.connected?h.apply(this,l):this.receiveBuffer.push(l)},n.prototype.ack=function(i){var l=this,g=!1;return function(){if(!g){g=!0;var y=s(arguments);u("sending ack %j",y),l.packet({type:r.ACK,id:i,data:y})}}},n.prototype.onack=function(i){var l=this.acks[i.id];typeof l=="function"?(u("calling ack %s with %j",i.id,i.data),l.apply(this,i.data),delete this.acks[i.id]):u("bad ack %s",i.id)},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var i;for(i=0;i<this.receiveBuffer.length;i++)h.apply(this,this.receiveBuffer[i]);for(this.receiveBuffer=[],i=0;i<this.sendBuffer.length;i++)this.packet(this.sendBuffer[i]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var i=0;i<this.subs.length;i++)this.subs[i].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.prototype.compress=function(i){return this.flags=this.flags||{},this.flags.compress=i,this}},7833:(m,e,t)=>{e.formatArgs=function(o){if(o[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+o[0]+(this.useColors?"%c ":" ")+"+"+m.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;o.splice(1,0,s,"color: inherit");let a=0,c=0;o[0].replace(/%[a-zA-Z%]/g,u=>{u!=="%%"&&(a++,u==="%c"&&(c=a))}),o.splice(c,0,s)},e.save=function(o){try{o?e.storage.setItem("debug",o):e.storage.removeItem("debug")}catch{}},e.load=function(){let o;try{o=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!o&&typeof process<"u"&&"env"in process&&(o=vt.DEBUG),o},e.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let o;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(o=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(o[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch{}}(),e.destroy=(()=>{let o=!1;return()=>{o||(o=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),m.exports=t(736)(e);const{formatters:r}=m.exports;r.j=function(o){try{return JSON.stringify(o)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}},8104:m=>{m.exports=function(e,t){for(var r=[],o=(t=t||0)||0;o<e.length;o++)r[o-t]=e[o];return r}},8144:m=>{var e=[].slice;m.exports=function(t,r){if(typeof r=="string"&&(r=t[r]),typeof r!="function")throw new Error("bind() requires a function");var o=e.call(arguments,2);return function(){return r.apply(t,o.concat(e.call(arguments)))}}},8247:m=>{m.exports=function(e){return M.Buffer&&M.Buffer.isBuffer(e)||M.ArrayBuffer&&(e instanceof ArrayBuffer||ArrayBuffer.isView(e))}},8383:m=>{try{m.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{m.exports=!1}},8520:(m,e,t)=>{var r=t(3051),o=t(9332),s=t(2252),a=t(6855);e.polling=function(c){var u=!1,f=!1,p=c.jsonp!==!1;if(M.location){var h=location.protocol==="https:",n=location.port;n||(n=h?443:80),u=c.hostname!==location.hostname||n!==c.port,f=c.secure!==h}if(c.xdomain=u,c.xscheme=f,"open"in new r(c)&&!c.forceJSONP)return new o(c);if(!p)throw new Error("JSONP disabled");return new s(c)},e.websocket=a},8758:m=>{var e,t,r,o=String.fromCharCode;function s(h){for(var n,i,l=[],g=0,y=h.length;g<y;)(n=h.charCodeAt(g++))>=55296&&n<=56319&&g<y?(64512&(i=h.charCodeAt(g++)))==56320?l.push(((1023&n)<<10)+(1023&i)+65536):(l.push(n),g--):l.push(n);return l}function a(h,n){if(h>=55296&&h<=57343){if(n)throw Error("Lone surrogate U+"+h.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(h,n){return o(h>>n&63|128)}function u(h,n){if(!(4294967168&h))return o(h);var i="";return 4294965248&h?4294901760&h?4292870144&h||(i=o(h>>18&7|240),i+=c(h,12),i+=c(h,6)):(a(h,n)||(h=65533),i=o(h>>12&15|224),i+=c(h,6)):i=o(h>>6&31|192),i+o(63&h|128)}function f(){if(r>=t)throw Error("Invalid byte index");var h=255&e[r];if(r++,(192&h)==128)return 63&h;throw Error("Invalid continuation byte")}function p(h){var n,i;if(r>t)throw Error("Invalid byte index");if(r==t)return!1;if(n=255&e[r],r++,!(128&n))return n;if((224&n)==192){if((i=(31&n)<<6|f())>=128)return i;throw Error("Invalid continuation byte")}if((240&n)==224){if((i=(15&n)<<12|f()<<6|f())>=2048)return a(i,h)?i:65533;throw Error("Invalid continuation byte")}if((248&n)==240&&(i=(7&n)<<18|f()<<12|f()<<6|f())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}m.exports={version:"2.1.2",encode:function(h,n){for(var i=(n=n||{}).strict!==!1,l=s(h),g=l.length,y=-1,_="";++y<g;)_+=u(l[y],i);return _},decode:function(h,n){var i=(n=n||{}).strict!==!1;e=s(h),t=e.length,r=0;for(var l,g=[];(l=p(i))!==!1;)g.push(l);return function(y){for(var _,v=y.length,b=-1,C="";++b<v;)(_=y[b])>65535&&(C+=o((_-=65536)>>>10&1023|55296),_=56320|1023&_),C+=o(_);return C}(g)}}},8839:(m,e,t)=>{var r=t(4634),o=Object.prototype.toString,s=typeof Blob=="function"||typeof Blob<"u"&&o.call(Blob)==="[object BlobConstructor]",a=typeof File=="function"||typeof File<"u"&&o.call(File)==="[object FileConstructor]";m.exports=function c(u){if(!u||typeof u!="object")return!1;if(r(u)){for(var f=0,p=u.length;f<p;f++)if(c(u[f]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(u)||typeof ArrayBuffer=="function"&&u instanceof ArrayBuffer||s&&u instanceof Blob||a&&u instanceof File)return!0;if(u.toJSON&&typeof u.toJSON=="function"&&arguments.length===1)return c(u.toJSON(),!0);for(var h in u)if(Object.prototype.hasOwnProperty.call(u,h)&&c(u[h]))return!0;return!1}},9110:(m,e,t)=>{function r(s){var a;function c(){if(c.enabled){var u=c,f=+new Date,p=f-(a||f);u.diff=p,u.prev=a,u.curr=f,a=f;for(var h=new Array(arguments.length),n=0;n<h.length;n++)h[n]=arguments[n];h[0]=e.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");var i=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,function(l,g){if(l==="%%")return l;i++;var y=e.formatters[g];if(typeof y=="function"){var _=h[i];l=y.call(u,_),h.splice(i,1),i--}return l}),e.formatArgs.call(u,h),(c.log||e.log||console.log.bind(console)).apply(u,h)}}return c.namespace=s,c.enabled=e.enabled(s),c.useColors=e.useColors(),c.color=function(u){var f,p=0;for(f in u)p=(p<<5)-p+u.charCodeAt(f),p|=0;return e.colors[Math.abs(p)%e.colors.length]}(s),c.destroy=o,typeof e.init=="function"&&e.init(c),e.instances.push(c),c}function o(){var s=e.instances.indexOf(this);return s!==-1&&(e.instances.splice(s,1),!0)}(e=m.exports=r.debug=r.default=r).coerce=function(s){return s instanceof Error?s.stack||s.message:s},e.disable=function(){e.enable("")},e.enable=function(s){var a;e.save(s),e.names=[],e.skips=[];var c=(typeof s=="string"?s:"").split(/[\s,]+/),u=c.length;for(a=0;a<u;a++)c[a]&&((s=c[a].replace(/\*/g,".*?"))[0]==="-"?e.skips.push(new RegExp("^"+s.substr(1)+"$")):e.names.push(new RegExp("^"+s+"$")));for(a=0;a<e.instances.length;a++){var f=e.instances[a];f.enabled=e.enabled(f.namespace)}},e.enabled=function(s){if(s[s.length-1]==="*")return!0;var a,c;for(a=0,c=e.skips.length;a<c;a++)if(e.skips[a].test(s))return!1;for(a=0,c=e.names.length;a<c;a++)if(e.names[a].test(s))return!0;return!1},e.humanize=t(3097),e.instances=[],e.names=[],e.skips=[],e.formatters={}},9140:(m,e)=>{e.encode=function(t){var r="";for(var o in t)t.hasOwnProperty(o)&&(r.length&&(r+="&"),r+=encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return r},e.decode=function(t){for(var r={},o=t.split("&"),s=0,a=o.length;s<a;s++){var c=o[s].split("=");r[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return r}},9331:(m,e,t)=>{var r=t(4258),o=t(9368)("socket.io-client:url");m.exports=function(s,a){var c=s;a=a||M.location,s==null&&(s=a.protocol+"//"+a.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s=s.charAt(1)==="/"?a.protocol+s:a.host+s),/^(https?|wss?):\/\//.test(s)||(o("protocol-less url %s",s),s=a!==void 0?a.protocol+"//"+s:"https://"+s),o("parse %s",s),c=r(s)),c.port||(/^(http|ws)$/.test(c.protocol)?c.port="80":/^(http|ws)s$/.test(c.protocol)&&(c.port="443")),c.path=c.path||"/";var u=c.host.indexOf(":")!==-1?"["+c.host+"]":c.host;return c.id=c.protocol+"://"+u+":"+c.port,c.href=c.protocol+"://"+u+(a&&a.port===c.port?"":":"+c.port),c}},9332:(m,e,t)=>{var r=t(3051),o=t(5911),s=t(5971),a=t(2370),c=t(6617)("engine.io-client:polling-xhr");function u(){}function f(n){if(o.call(this,n),this.requestTimeout=n.requestTimeout,this.extraHeaders=n.extraHeaders,M.location){var i=location.protocol==="https:",l=location.port;l||(l=i?443:80),this.xd=n.hostname!==M.location.hostname||l!==n.port,this.xs=n.secure!==i}}function p(n){this.method=n.method||"GET",this.uri=n.uri,this.xd=!!n.xd,this.xs=!!n.xs,this.async=n.async!==!1,this.data=n.data!==void 0?n.data:null,this.agent=n.agent,this.isBinary=n.isBinary,this.supportsBinary=n.supportsBinary,this.enablesXDR=n.enablesXDR,this.requestTimeout=n.requestTimeout,this.pfx=n.pfx,this.key=n.key,this.passphrase=n.passphrase,this.cert=n.cert,this.ca=n.ca,this.ciphers=n.ciphers,this.rejectUnauthorized=n.rejectUnauthorized,this.extraHeaders=n.extraHeaders,this.create()}function h(){for(var n in p.requests)p.requests.hasOwnProperty(n)&&p.requests[n].abort()}m.exports=f,m.exports.Request=p,a(f,o),f.prototype.supportsBinary=!0,f.prototype.request=function(n){return(n=n||{}).uri=this.uri(),n.xd=this.xd,n.xs=this.xs,n.agent=this.agent||!1,n.supportsBinary=this.supportsBinary,n.enablesXDR=this.enablesXDR,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,n.requestTimeout=this.requestTimeout,n.extraHeaders=this.extraHeaders,new p(n)},f.prototype.doWrite=function(n,i){var l=typeof n!="string"&&n!==void 0,g=this.request({method:"POST",data:n,isBinary:l}),y=this;g.on("success",i),g.on("error",function(_){y.onError("xhr post error",_)}),this.sendXhr=g},f.prototype.doPoll=function(){c("xhr poll");var n=this.request(),i=this;n.on("data",function(l){i.onData(l)}),n.on("error",function(l){i.onError("xhr poll error",l)}),this.pollXhr=n},s(p.prototype),p.prototype.create=function(){var n={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized;var i=this.xhr=new r(n),l=this;try{c("xhr open %s: %s",this.method,this.uri),i.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var g in i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(g)&&i.setRequestHeader(g,this.extraHeaders[g])}catch{}if(this.method==="POST")try{this.isBinary?i.setRequestHeader("Content-type","application/octet-stream"):i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in i&&(i.withCredentials=!0),this.requestTimeout&&(i.timeout=this.requestTimeout),this.hasXDR()?(i.onload=function(){l.onLoad()},i.onerror=function(){l.onError(i.responseText)}):i.onreadystatechange=function(){if(i.readyState===2)try{var y=i.getResponseHeader("Content-Type");l.supportsBinary&&y==="application/octet-stream"&&(i.responseType="arraybuffer")}catch{}i.readyState===4&&(i.status===200||i.status===1223?l.onLoad():setTimeout(function(){l.onError(i.status)},0))},c("xhr data %s",this.data),i.send(this.data)}catch(y){return void setTimeout(function(){l.onError(y)},0)}M.document&&(this.index=p.requestsCount++,p.requests[this.index]=this)},p.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},p.prototype.onData=function(n){this.emit("data",n),this.onSuccess()},p.prototype.onError=function(n){this.emit("error",n),this.cleanup(!0)},p.prototype.cleanup=function(n){if(this.xhr!==void 0&&this.xhr!==null){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,n)try{this.xhr.abort()}catch{}M.document&&delete p.requests[this.index],this.xhr=null}},p.prototype.onLoad=function(){var n;try{var i;try{i=this.xhr.getResponseHeader("Content-Type")}catch{}n=i==="application/octet-stream"&&this.xhr.response||this.xhr.responseText}catch(l){this.onError(l)}n!=null&&this.onData(n)},p.prototype.hasXDR=function(){return M.XDomainRequest!==void 0&&!this.xs&&this.enablesXDR},p.prototype.abort=function(){this.cleanup()},p.requestsCount=0,p.requests={},M.document&&(M.attachEvent?M.attachEvent("onunload",h):M.addEventListener&&M.addEventListener("beforeunload",h,!1))},9368:(m,e,t)=>{function r(){var o;try{o=e.storage.debug}catch{}return!o&&typeof process<"u"&&"env"in process&&(o=vt.DEBUG),o}(e=m.exports=t(9939)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(o){var s=this.useColors;if(o[0]=(s?"%c":"")+this.namespace+(s?" %c":" ")+o[0]+(s?"%c ":" ")+"+"+e.humanize(this.diff),s){var a="color: "+this.color;o.splice(1,0,a,"color: inherit");var c=0,u=0;o[0].replace(/%[a-zA-Z%]/g,function(f){f!=="%%"&&(c++,f==="%c"&&(u=c))}),o.splice(u,0,a)}},e.save=function(o){try{o==null?e.storage.removeItem("debug"):e.storage.debug=o}catch{}},e.load=r,e.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(o){try{return JSON.stringify(o)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}},e.enable(r())},9725:(m,e,t)=>{var r=t(3357),o=t(7773),s=t(5971),a=t(5074),c=t(4745),u=t(8144),f=t(9368)("socket.io-client:manager"),p=t(6938),h=t(3059),n=Object.prototype.hasOwnProperty;function i(l,g){if(!(this instanceof i))return new i(l,g);l&&typeof l=="object"&&(g=l,l=void 0),(g=g||{}).path=g.path||"/socket.io",this.nsps={},this.subs=[],this.opts=g,this.reconnection(g.reconnection!==!1),this.reconnectionAttempts(g.reconnectionAttempts||1/0),this.reconnectionDelay(g.reconnectionDelay||1e3),this.reconnectionDelayMax(g.reconnectionDelayMax||5e3),this.randomizationFactor(g.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(g.timeout==null?2e4:g.timeout),this.readyState="closed",this.uri=l,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var y=g.parser||a;this.encoder=new y.Encoder,this.decoder=new y.Decoder,this.autoConnect=g.autoConnect!==!1,this.autoConnect&&this.open()}m.exports=i,i.prototype.emitAll=function(){for(var l in this.emit.apply(this,arguments),this.nsps)n.call(this.nsps,l)&&this.nsps[l].emit.apply(this.nsps[l],arguments)},i.prototype.updateSocketIds=function(){for(var l in this.nsps)n.call(this.nsps,l)&&(this.nsps[l].id=this.generateId(l))},i.prototype.generateId=function(l){return(l==="/"?"":l+"#")+this.engine.id},s(i.prototype),i.prototype.reconnection=function(l){return arguments.length?(this._reconnection=!!l,this):this._reconnection},i.prototype.reconnectionAttempts=function(l){return arguments.length?(this._reconnectionAttempts=l,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(l){return arguments.length?(this._reconnectionDelay=l,this.backoff&&this.backoff.setMin(l),this):this._reconnectionDelay},i.prototype.randomizationFactor=function(l){return arguments.length?(this._randomizationFactor=l,this.backoff&&this.backoff.setJitter(l),this):this._randomizationFactor},i.prototype.reconnectionDelayMax=function(l){return arguments.length?(this._reconnectionDelayMax=l,this.backoff&&this.backoff.setMax(l),this):this._reconnectionDelayMax},i.prototype.timeout=function(l){return arguments.length?(this._timeout=l,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()},i.prototype.open=i.prototype.connect=function(l,g){if(f("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=r(this.uri,this.opts);var y=this.engine,_=this;this.readyState="opening",this.skipReconnect=!1;var v=c(y,"open",function(){_.onopen(),l&&l()}),b=c(y,"error",function(S){if(f("connect_error"),_.cleanup(),_.readyState="closed",_.emitAll("connect_error",S),l){var A=new Error("Connection error");A.data=S,l(A)}else _.maybeReconnectOnOpen()});if(this._timeout!==!1){var C=this._timeout;f("connect attempt will timeout after %d",C);var T=setTimeout(function(){f("connect attempt timed out after %d",C),v.destroy(),y.close(),y.emit("error","timeout"),_.emitAll("connect_timeout",C)},C);this.subs.push({destroy:function(){clearTimeout(T)}})}return this.subs.push(v),this.subs.push(b),this},i.prototype.onopen=function(){f("open"),this.cleanup(),this.readyState="open",this.emit("open");var l=this.engine;this.subs.push(c(l,"data",u(this,"ondata"))),this.subs.push(c(l,"ping",u(this,"onping"))),this.subs.push(c(l,"pong",u(this,"onpong"))),this.subs.push(c(l,"error",u(this,"onerror"))),this.subs.push(c(l,"close",u(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",u(this,"ondecoded")))},i.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},i.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},i.prototype.ondata=function(l){this.decoder.add(l)},i.prototype.ondecoded=function(l){this.emit("packet",l)},i.prototype.onerror=function(l){f("error",l),this.emitAll("error",l)},i.prototype.socket=function(l,g){var y=this.nsps[l];if(!y){y=new o(this,l,g),this.nsps[l]=y;var _=this;y.on("connecting",v),y.on("connect",function(){y.id=_.generateId(l)}),this.autoConnect&&v()}function v(){~p(_.connecting,y)||_.connecting.push(y)}return y},i.prototype.destroy=function(l){var g=p(this.connecting,l);~g&&this.connecting.splice(g,1),this.connecting.length||this.close()},i.prototype.packet=function(l){f("writing packet %j",l);var g=this;l.query&&l.type===0&&(l.nsp+="?"+l.query),g.encoding?g.packetBuffer.push(l):(g.encoding=!0,this.encoder.encode(l,function(y){for(var _=0;_<y.length;_++)g.engine.write(y[_],l.options);g.encoding=!1,g.processPacketQueue()}))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var l=this.packetBuffer.shift();this.packet(l)}},i.prototype.cleanup=function(){f("cleanup");for(var l=this.subs.length,g=0;g<l;g++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){f("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},i.prototype.onclose=function(l){f("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",l),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var l=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var g=this.backoff.duration();f("will wait %dms before reconnect attempt",g),this.reconnecting=!0;var y=setTimeout(function(){l.skipReconnect||(f("attempting reconnect"),l.emitAll("reconnect_attempt",l.backoff.attempts),l.emitAll("reconnecting",l.backoff.attempts),l.skipReconnect||l.open(function(_){_?(f("reconnect attempt error"),l.reconnecting=!1,l.reconnect(),l.emitAll("reconnect_error",_.data)):(f("reconnect success"),l.onreconnect())}))},g);this.subs.push({destroy:function(){clearTimeout(y)}})}},i.prototype.onreconnect=function(){var l=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",l)}},9939:(m,e,t)=>{var r;function o(s){function a(){if(a.enabled){var c=a,u=+new Date,f=u-(r||u);c.diff=f,c.prev=r,c.curr=u,r=u;for(var p=new Array(arguments.length),h=0;h<p.length;h++)p[h]=arguments[h];p[0]=e.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var n=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(i,l){if(i==="%%")return i;n++;var g=e.formatters[l];if(typeof g=="function"){var y=p[n];i=g.call(c,y),p.splice(n,1),n--}return i}),e.formatArgs.call(c,p),(a.log||e.log||console.log.bind(console)).apply(c,p)}}return a.namespace=s,a.enabled=e.enabled(s),a.useColors=e.useColors(),a.color=function(c){var u,f=0;for(u in c)f=(f<<5)-f+c.charCodeAt(u),f|=0;return e.colors[Math.abs(f)%e.colors.length]}(s),typeof e.init=="function"&&e.init(a),a}(e=m.exports=o.debug=o.default=o).coerce=function(s){return s instanceof Error?s.stack||s.message:s},e.disable=function(){e.enable("")},e.enable=function(s){e.save(s),e.names=[],e.skips=[];for(var a=(typeof s=="string"?s:"").split(/[\s,]+/),c=a.length,u=0;u<c;u++)a[u]&&((s=a[u].replace(/\*/g,".*?"))[0]==="-"?e.skips.push(new RegExp("^"+s.substr(1)+"$")):e.names.push(new RegExp("^"+s+"$")))},e.enabled=function(s){var a,c;for(a=0,c=e.skips.length;a<c;a++)if(e.skips[a].test(s))return!1;for(a=0,c=e.names.length;a<c;a++)if(e.names[a].test(s))return!0;return!1},e.humanize=t(2902),e.names=[],e.skips=[],e.formatters={}}},$t={};function $(m){var e=$t[m];if(e!==void 0)return e.exports;var t=$t[m]={exports:{}};return oe[m](t,t.exports,$),t.exports}$.n=m=>{var e=m&&m.__esModule?()=>m.default:()=>m;return $.d(e,{a:e}),e},$.d=(m,e)=>{for(var t in e)$.o(e,t)&&!$.o(m,t)&&Object.defineProperty(m,t,{enumerable:!0,get:e[t]})},$.o=(m,e)=>Object.prototype.hasOwnProperty.call(m,e);var Mt={};$.d(Mt,{Bx:()=>tt,F4:()=>Kt,Pr:()=>le});var ne=$(7007),re=$.n(ne),ie=$(7698),ae=$.n(ie),ce=$(7833),Z=$.n(ce);const Kt=Object.freeze({createAccessToken:"/auth/v1/token",updateAccessToken:"/auth/v1/token",deleteToken:"/auth/v1/token/revoke",createSessionUrl:"/open/v1/sessions/auth",createChatEventSubscription:"/open/v1/sessions/events/subscribe/chat",createDonationEventSubscription:"/open/v1/sessions/events/subscribe/donation",getUser:"/open/v1/users/me",postChat:"/open/v1/chats/send"}),tt=Object.freeze({SYSTEM:"SYSTEM",CHAT:"CHAT",DONATION:"DONATION"});var V,X,lt,ht,q,st,G,rt,it,Y,ot,at,gt,yt,U,wt;class le extends re(){constructor({api_url:t,code:r,state:o,access_token:s,refresh_token:a,token_type:c,expires_in:u,scope:f,paths:p={}}){super();z(this,V);z(this,X);z(this,lt);z(this,ht);z(this,q);z(this,st);z(this,G);z(this,rt);z(this,it);z(this,Y);z(this,ot);z(this,at);z(this,gt);z(this,yt);z(this,U);z(this,wt);x(this,"on",super.on);x(this,"off",super.off);x(this,"emit",super.emit);P(this,V,t),P(this,X,{...Kt,...p}),P(this,lt,r),P(this,ht,o),P(this,q,s),P(this,st,a),P(this,G,c),P(this,rt,parseInt(u)),P(this,it,f),P(this,U,Z()("chzzk-proxy")),P(this,wt,Z()("chzzk-proxy:error")),E(this,U).call(this,`constructor(${t}, ${r}, ${o}, ${p}, ${s}, ${a}, ${c}, ${u}, ${f})`)}get connected(){return!!E(this,Y)&&E(this,Y).connected}get api_url(){return E(this,V)}get paths(){return E(this,X)}get code(){return E(this,lt)}get state(){return E(this,ht)}get access_token(){return E(this,q)}get refresh_token(){return E(this,st)}get token_type(){return E(this,G)}get expires_in(){return E(this,rt)}get scope(){return E(this,it)}get session_key(){return E(this,ot)}get channel_id(){return E(this,at)}get channel_name(){return E(this,gt)}get nickname(){return E(this,yt)}set message(t){if(this.connected)return this.postChat(t)}async connect(){if(this.connected)return this.connected;let t;E(this,q)||(t=await this.createAccessToken()),E(this,U).call(this,"access_token",E(this,q)),E(this,U).call(this,"refresh_token",E(this,st)),E(this,U).call(this,"token_type",E(this,G)),E(this,U).call(this,"expires_in",E(this,rt)),E(this,U).call(this,"scope",E(this,it)),await this.getUser(),t=await this.createSessionUrl();const r=t.url,o={reconnection:!1,"force new connection":!0,"connect timeout":3e3};return typeof window>"u"&&(o.transports=["websocket"]),E(this,U).call(this,"socket_option",o),P(this,Y,ae()(r,o)),E(this,Y).on("connect",async()=>{E(this,U).call(this,"[SUCCESS] socket.io connection established")}),E(this,Y).on(tt.SYSTEM,async s=>{const{type:a,data:c}=JSON.parse(s),{sessionKey:u,eventType:f,channelId:p}=c;switch(a){case"connected":E(this,U).call(this,`[SUCCESS] connected sessionKey: ${u}`),P(this,ot,u),await this.createChatEventSubscription(),await this.createDonationEventSubscription();break;case"subscribed":E(this,U).call(this,`[SUCCESS] subscribed eventType: ${f}, channelId: ${p}`),P(this,at,p);break;case"unsubscribed":E(this,U).call(this,`[SUCCESS] unsubscribed eventType: ${f}, channelId: ${p}`);break;case"revoked":E(this,U).call(this,`[SUCCESS] revoked eventType: ${f}, channelId: ${p}`)}this.emit(tt.SYSTEM,{sessionKey:u,eventType:f,channelId:p})}),E(this,Y).on(tt.CHAT,s=>{const a=JSON.parse(s);E(this,U).call(this,tt.CHAT,a),this.emit(tt.CHAT,a)}),E(this,Y).on(tt.DONATION,s=>{const a=JSON.parse(s);E(this,U).call(this,tt.CHAT,a),this.emit(tt.DONATION,a)}),this.connected}async destroy(){this.connected&&(E(this,Y).close(),P(this,Y,null),P(this,ot,null),P(this,at,null),await this.deleteToken())}async updateToken(){this.connected&&await this.updateAccessToken()}async fetchRequest(t,r){const o=Z()("chzzk-proxy:fetchRequest");o("api_url",t),o("options",r);const s=r.method||"GET",a=new URL(t);for(const h in r.param)r.param[h]&&a.searchParams.append(h,`${r.param[h]}`);o("url",a);const c=new Headers;for(const h in r.headers)r.headers[h]&&c.append(h,`${r.headers[h]}`);o("headers",c);const u=new Request(a,{method:s,headers:c,body:JSON.stringify(r.body)});o("request",u);const f=await fetch(u);o("response",f);const p=await f.json();return o("result",p),p.content}async createAccessToken(){const t=Z()("chzzk-proxy:createAccessToken"),r=await this.fetchRequest(E(this,V),{method:"POST",headers:{"Content-Type":"application/json",path:E(this,X).createAccessToken},body:{grantType:"authorization_code",code:E(this,lt),state:E(this,ht)}});return t("result",r),P(this,q,r.accessToken),P(this,st,r.refreshToken),P(this,G,r.tokenType),P(this,rt,r.expiresIn),P(this,it,r.scope),r}async updateAccessToken(){const t=Z()("chzzk-proxy:updateAccessToken"),r=await this.fetchRequest(E(this,V),{method:"POST",headers:{"Content-Type":"application/json",path:E(this,X).updateAccessToken},body:{grantType:"refresh_token",refreshToken:E(this,st)}});return t("result",r),r}async deleteToken(){const t=Z()("chzzk-proxy:deleteToken"),r=await this.fetchRequest(E(this,V),{method:"POST",headers:{Authorization:`${E(this,G)} ${E(this,q)}`,"Content-Type":"application/json",path:E(this,X).deleteToken},body:{token:E(this,q)}});return t("result",r),r}async createSessionUrl(){const t=Z()("chzzk-proxy:createSessionUrl"),r=await this.fetchRequest(E(this,V),{method:"GET",headers:{Authorization:`${E(this,G)} ${E(this,q)}`,"Content-Type":"application/json",path:E(this,X).createSessionUrl}});return t("result",r),r}async createChatEventSubscription(){const t=Z()("chzzk-proxy:createChatEventSubscription"),r=await this.fetchRequest(E(this,V),{method:"POST",param:{sessionKey:E(this,ot)},headers:{Authorization:`${E(this,G)} ${E(this,q)}`,"Content-Type":"application/json",path:E(this,X).createChatEventSubscription}});return t("result",r),r}async createDonationEventSubscription(){const t=Z()("chzzk-proxy:createDonationEventSubscription"),r=await this.fetchRequest(E(this,V),{method:"POST",param:{sessionKey:E(this,ot)},headers:{Authorization:`${E(this,G)} ${E(this,q)}`,"Content-Type":"application/json",path:E(this,X).createDonationEventSubscription}});return t("result",r),r}async getUser(){const t=Z()("chzzk-proxy:getUser"),r=await this.fetchRequest(E(this,V),{method:"GET",headers:{Authorization:`${E(this,G)} ${E(this,q)}`,"Content-Type":"application/json",path:E(this,X).getUser}});return t("result",r),P(this,at,r.channelId),P(this,gt,r.channelName),P(this,yt,r.nickname),r}async postChat(t){const r=Z()("chzzk-proxy:postChat"),o=await this.fetchRequest(E(this,V),{method:"POST",headers:{Authorization:`${E(this,G)} ${E(this,q)}`,"Content-Type":"application/json",path:E(this,X).postChat},body:{message:t}});return r("result",o),o}}V=new WeakMap,X=new WeakMap,lt=new WeakMap,ht=new WeakMap,q=new WeakMap,st=new WeakMap,G=new WeakMap,rt=new WeakMap,it=new WeakMap,Y=new WeakMap,ot=new WeakMap,at=new WeakMap,gt=new WeakMap,yt=new WeakMap,U=new WeakMap,wt=new WeakMap;const he=Mt.Pr,Wt=Mt.Bx;Mt.F4;class Yt extends H.Events.EventEmitter{}var K=(m=>(m.CHAT="CHAT",m.DONATION="DONATION",m.VOLUME_MASTER="VOLUME_MASTER",m.VOLUME_BGM="VOLUME_BGM",m.VOLUME_EFFECT="VOLUME_EFFECT",m))(K||{});class ue extends Yt{constructor(){super();x(this,"SCALE",4);x(this,"WIDTH",480*this.SCALE);x(this,"HEIGHT",270*this.SCALE);x(this,"DEBUG",!1);x(this,"bgm_map",{});x(this,"_bgm");x(this,"_bgm_key");x(this,"onVolumeMasterChange");x(this,"_volume_master",parseFloat(localStorage.getItem("svsv:volume:master")||"0.5"));x(this,"_volume_bgm",parseFloat(localStorage.getItem("svsv:volume:bgm")||"0.3"));x(this,"_volume_effect",parseFloat(localStorage.getItem("svsv:volume:effect")||"0.5"));x(this,"url");x(this,"style",{color:{grey_0:parseInt(localStorage.getItem("svsv:style:color:grey_0")||"0x000000"),grey_1:parseInt(localStorage.getItem("svsv:style:color:grey_1")||"0x111111"),grey_2:parseInt(localStorage.getItem("svsv:style:color:grey_2")||"0x222222"),grey_3:parseInt(localStorage.getItem("svsv:style:color:grey_3")||"0x333333"),grey_4:parseInt(localStorage.getItem("svsv:style:color:grey_4")||"0x444444"),grey_5:parseInt(localStorage.getItem("svsv:style:color:grey_5")||"0x555555"),grey_6:parseInt(localStorage.getItem("svsv:style:color:grey_6")||"0x666666"),grey_7:parseInt(localStorage.getItem("svsv:style:color:grey_7")||"0x777777"),grey_8:parseInt(localStorage.getItem("svsv:style:color:grey_8")||"0x888888"),grey_9:parseInt(localStorage.getItem("svsv:style:color:grey_9")||"0x999999"),grey_a:parseInt(localStorage.getItem("svsv:style:color:grey_a")||"0xaaaaaa"),grey_b:parseInt(localStorage.getItem("svsv:style:color:grey_b")||"0xbbbbbb"),grey_c:parseInt(localStorage.getItem("svsv:style:color:grey_c")||"0xcccccc"),grey_d:parseInt(localStorage.getItem("svsv:style:color:grey_d")||"0xdddddd"),grey_e:parseInt(localStorage.getItem("svsv:style:color:grey_e")||"0xeeeeee"),grey_f:parseInt(localStorage.getItem("svsv:style:color:grey_f")||"0xffffff"),green_a:parseInt(localStorage.getItem("svsv:style:color:green_a")||"0x00aa6c"),green_f:parseInt(localStorage.getItem("svsv:style:color:green_f")||"0x00ffa3"),purple_a:parseInt(localStorage.getItem("svsv:style:color:purple_a")||"0x6c00aa"),purple_f:parseInt(localStorage.getItem("svsv:style:color:purple_f")||"0xa300ff"),pink_a:parseInt(localStorage.getItem("svsv:style:color:pink_a")||"0xaa006c"),pink_f:parseInt(localStorage.getItem("svsv:style:color:pink_f")||"0xff00a3")},color_code:{grey_0:localStorage.getItem("svsv:style:color_code:grey_0")||"#000000",grey_1:localStorage.getItem("svsv:style:color_code:grey_1")||"#111111",grey_2:localStorage.getItem("svsv:style:color_code:grey_2")||"#222222",grey_3:localStorage.getItem("svsv:style:color_code:grey_3")||"#333333",grey_4:localStorage.getItem("svsv:style:color_code:grey_4")||"#444444",grey_5:localStorage.getItem("svsv:style:color_code:grey_5")||"#555555",grey_6:localStorage.getItem("svsv:style:color_code:grey_6")||"#666666",grey_7:localStorage.getItem("svsv:style:color_code:grey_7")||"#777777",grey_8:localStorage.getItem("svsv:style:color_code:grey_8")||"#888888",grey_9:localStorage.getItem("svsv:style:color_code:grey_9")||"#999999",grey_a:localStorage.getItem("svsv:style:color_code:grey_a")||"#aaaaaa",grey_b:localStorage.getItem("svsv:style:color_code:grey_b")||"#bbbbbb",grey_c:localStorage.getItem("svsv:style:color_code:grey_c")||"#cccccc",grey_d:localStorage.getItem("svsv:style:color_code:grey_d")||"#dddddd",grey_e:localStorage.getItem("svsv:style:color_code:grey_e")||"#eeeeee",grey_f:localStorage.getItem("svsv:style:color_code:grey_f")||"#ffffff",green_a:localStorage.getItem("svsv:style:color_code:grey_a")||"#00aa6c",green_f:localStorage.getItem("svsv:style:color_code:grey_f")||"#00ffa3",purple_a:localStorage.getItem("svsv:style:color_code:purple_a")||"#6c00aa",purple_f:localStorage.getItem("svsv:style:color_code:purple_f")||"#a300ff",pink_a:localStorage.getItem("svsv:style:color:pink_a")||"#aa006c",pink_f:localStorage.getItem("svsv:style:color:pink_f")||"#ff00a3"},font_style:{},font_padding:0});x(this,"proxy");const t=16;this.style.font_style={fontFamily:"DungGeunMo",fontSize:t*this.SCALE,color:this.style.color_code.grey_f,align:"center"},this.style.font_padding=t*this.SCALE/10,this.url=this.DEBUG?"http://localhost:5173":"https://showskillsspark.github.io/svsv",this.proxy=new he({api_url:this.DEBUG?"https://pyrsgagtq5.execute-api.ap-northeast-2.amazonaws.com/default/chzzkProxyTest":"https://uohwcn08lb.execute-api.ap-northeast-2.amazonaws.com/default/chzzkProxy",code:sessionStorage.getItem("svsv:proxy:code")||new URL(window.location.href).searchParams.get("code")||void 0,state:sessionStorage.getItem("svsv:proxy:state")||new URL(window.location.href).searchParams.get("state")||void 0,access_token:sessionStorage.getItem("svsv:proxy:access_token")||void 0,refresh_token:sessionStorage.getItem("svsv:proxy:refresh_token")||void 0,token_type:sessionStorage.getItem("svsv:proxy:token_type")||void 0,expires_in:sessionStorage.getItem("svsv:proxy:expires_in")||void 0,scope:sessionStorage.getItem("svsv:proxy:scope")||void 0}),this.proxy.on(Wt.CHAT,r=>{const{channelId:o,senderChannelId:s,profile:a,content:c,emojis:u,messageTime:f}=r,{nickname:p,badges:h,verifiedMark:n}=a,{key:i,value:l}=u;this.emit("CHAT",{channel_id:s,nickname:p,message:c})}),this.proxy.on(Wt.DONATION,r=>{const{donationType:o,channelId:s,donatorChannelId:a,donatorNickname:c,payAmount:u,donationText:f,emojis:p}=r,{key:h,value:n}=p;this.emit("DONATION",{channel_id:a,nickname:c,message:f,pay:parseInt(u)})})}set bgm(t){var r;this._bgm_key&&(t!=null&&t.key.startsWith(this._bgm_key))||(this._bgm&&this._bgm.stop(),this._bgm=t,this._bgm_key=t==null?void 0:t.key,(r=this._bgm)==null||r.play())}get volume_master(){return this._volume_master}set volume_master(t){this._volume_master=Math.max(0,Math.min(1,Number(t.toFixed(1)))),localStorage.setItem("svsv:volume:master",this._volume_master.toString()),this.emit("VOLUME_MASTER",this._volume_master)}get volume_bgm(){return this._volume_bgm}set volume_bgm(t){var r;this._volume_bgm=Math.max(0,Math.min(1,Number(t.toFixed(1)))),localStorage.setItem("svsv:volume:bgm",t.toString()),(r=this._bgm)==null||r.setVolume(t),this.emit("VOLUME_BGM",this._volume_bgm)}get volume_effect(){return this._volume_effect}set volume_effect(t){this._volume_effect=Math.max(0,Math.min(1,Number(t.toFixed(1)))),localStorage.setItem("svsv:volume:effect",t.toString()),this.emit("VOLUME_EFFECT",this._volume_effect)}}const d=new ue,ut=class ut extends H.GameObjects.Container{constructor(t,r,o,s,a){super(t,r,o);x(this,"game_logo");x(this,"game_logo_animation_key");x(this,"game_name");x(this,"cover");x(this,"_centered",!1);x(this,"_pointerover",!1);t.add.existing(this),this.setSize(s,a)}init(t,r,o){const s=this.height*.8,a=Math.min(this.width,s);this.game_logo=r,this.game_logo.setScale(a/this.game_logo.width).setY((a-this.height)/2),this.game_logo_animation_key=o,this.game_logo.play(this.game_logo_animation_key);const c=this.height*.2;this.game_name=this.scene.add.text(0,s/2,t,{...d.style.font_style,fontSize:c}).setOrigin(.5).setPadding(d.style.font_padding),this.cover=this.scene.add.rectangle(0,0,this.width*1.1,this.height*1.1,d.style.color.grey_0,.5),this.add([this.game_logo,this.game_name,this.cover]),this.onButtonState()}get centered(){return this._centered}get pointerover(){return this._pointerover}set centered(t){this._centered=t,this.onButtonState()}set pointerover(t){var r;if(this._pointerover=t,this.onButtonState(),t){this.game_logo.anims.repeatDelay=0;let o=(r=this.game_logo.anims.currentFrame)!=null&&r.index?this.game_logo.anims.currentFrame.index%this.game_logo.anims.getTotalFrames():void 0;this.game_logo.play({key:this.game_logo_animation_key,startFrame:o,repeatDelay:ut.animation_duration/10,delay:0})}else this.game_logo.anims.repeatDelay=ut.animation_duration,this.game_logo.anims.resume();this.game_logo.anims.reverse()}onButtonState(){this._centered&&this._pointerover?(this.setScale(1.2),this.cover.setAlpha(0)):this._centered&&!this._pointerover?(this.setScale(1),this.cover.setAlpha(0)):!this._centered&&this._pointerover?(this.setScale(1),this.cover.setAlpha(1)):!this._centered&&!this._pointerover&&(this.setScale(.8),this.cover.setAlpha(1))}onpointerup(){console.error(this.game_name.text,"onpointerup is not implemented.")}onpointerdown(){this.game_logo.anims.pause()}};x(ut,"animation_duration",1e3);let Lt=ut;var B=(m=>(m.TEAM1="TEAM1",m.TEAM2="TEAM2",m))(B||{}),Zt=(m=>(m[m.INFINITE=-1]="INFINITE",m[m.SEC_10=10]="SEC_10",m[m.SEC_20=20]="SEC_20",m[m.SEC_30=30]="SEC_30",m[m.SEC_40=40]="SEC_40",m[m.SEC_50=50]="SEC_50",m[m.SEC_60=60]="SEC_60",m[m.SEC_300=300]="SEC_300",m))(Zt||{}),W=(m=>(m.WHITE="하양",m.BLACK="검정",m.NONE="투명",m))(W||{}),J=(m=>(m.CLICK="클릭",m.MOST="최다 득표",m.PROPORTIONAL="득표 비례 확률",m.FIRST="선착순",m))(J||{}),N=(m=>(m.TEAM1="1 팀",m.TEAM2="2 팀",m.NONE="불참",m.DEFAULT="기본값",m))(N||{}),ct=(m=>(m.TEAM1="1 팀",m.TEAM2="2 팀",m.RANDOM="무작위",m))(ct||{});class Vt{constructor({name:e,timeout_index:t,disk_index:r,put_index:o}){x(this,"name");x(this,"timeout_list",[-1,10,20,30,40,50,60,300]);x(this,"timeout_index");x(this,"disk_color_list",["하양","검정"]);x(this,"disk_color_index");x(this,"put_list",["클릭","최다 득표","득표 비례 확률","선착순"]);x(this,"put_index");this.name=e,this.timeout_index=t,this.disk_color_index=r,this.put_index=o}get timeout(){return this.timeout_list[this.timeout_index]}get disk_color(){return this.disk_color_list[this.disk_color_index]}get put(){return this.put_list[this.put_index]}nextTimeout(e){return this.timeout_index=(this.timeout_index+this.timeout_list.length+e)%this.timeout_list.length,this.timeout}nextDisk(e){return this.disk_color_index=(this.disk_color_index+this.disk_color_list.length+e)%this.disk_color_list.length,this.disk_color}nextPut(e){return this.put_index=(this.put_index+this.put_list.length+e)%this.put_list.length,this.put}}var Nt=(m=>(m[m.WALL=0]="WALL",m[m.EMPTY=1]="EMPTY",m[m.BLOCK=2]="BLOCK",m))(Nt||{}),et=(m=>(m.SET="SET",m.PUT="PUT",m.PUT_FAIL="PUT_FAIL",m.PASS="PASS",m.END="END",m))(et||{});class pe{constructor(e,t,r){x(this,"x");x(this,"y");x(this,"disk_color");x(this,"team_tag",null);this.x=e,this.y=t,this.disk_color=r}}class de{constructor(e){x(this,"parent");x(this,"width_index");x(this,"width_list",[8,10]);x(this,"height_index");x(this,"height_list",[8,10]);x(this,"tiles",[]);x(this,"disks",[]);x(this,"counter");this.parent=e,this.width_index=parseInt(localStorage.getItem("svsv:othello:game_board:width_index")||"0"),this.height_index=parseInt(localStorage.getItem("svsv:othello:game_board:height_index")||"0"),this.counter={TEAM1:0,TEAM2:0}}get width(){return this.width_list[this.width_index]}get height(){return this.height_list[this.height_index]}init(e,t){this.counter={TEAM1:0,TEAM2:0};for(let r=0;r<12;r++){this.tiles[r]=[],this.disks[r]=[];for(let o=0;o<12;o++)r>0&&r<=this.width&&o>0&&o<=this.height?this.tiles[r][o]=1:this.tiles[r][o]=0,this.disks[r][o]=new pe(r,o,"투명")}this.setDisk(this.width/2,this.height/2,"TEAM1",e),this.setDisk(this.width/2+1,this.height/2,"TEAM2",t),this.setDisk(this.width/2,this.height/2+1,"TEAM2",t),this.setDisk(this.width/2+1,this.height/2+1,"TEAM1",e)}setDisk(e,t,r,o,s=!0){const a=this.disks[e][t],c=a.team_tag,u=a.disk_color;this.disks[e][t].disk_color=o,this.disks[e][t].team_tag=r,this.counter[r]+=1,c&&(this.counter[c]-=1),s&&this.parent.emit("SET",e,t,u,o)}putDisk(e,t,r,o){const s=this.canPutDisk(e,t,r,o);return s.length===0?(this.parent.emit("PUT_FAIL"),!1):(this.setDisk(e,t,r,o),s.forEach(a=>{this.setDisk(a.x,a.y,r,o)}),this.parent.emit("PUT",e,t),!0)}canPutDisk(e,t,r,o){if(e<1||e>this.width||t<1||t>this.height)return[];if(this.disks[e][t].disk_color!=="투명")return[];const s=this.getFlippingDisk(e,t,0,-1,r,o,!0),a=this.getFlippingDisk(e,t,1,-1,r,o,!0),c=this.getFlippingDisk(e,t,1,0,r,o,!0),u=this.getFlippingDisk(e,t,1,1,r,o,!0),f=this.getFlippingDisk(e,t,0,1,r,o,!0),p=this.getFlippingDisk(e,t,-1,1,r,o,!0),h=this.getFlippingDisk(e,t,-1,0,r,o,!0),n=this.getFlippingDisk(e,t,-1,-1,r,o,!0);return[...s,...a,...c,...u,...f,...p,...h,...n]}getFlippingDisk(e,t,r,o,s,a,c=!1){if(this.tiles[t+o][e+r]!==1)return[];const f=c?[]:[this.disks[e][t]],p=this.disks[e+r][t+o];if(p.disk_color==="투명")return[];if(p.team_tag===s)return[...f];{const h=this.getFlippingDisk(e+r,t+o,r,o,s,a);return h.length>0?[...h,...f]:[]}}canPutDiskSet(e,t){const r=new Set;for(let o=1;o<=this.width;o++)for(let s=1;s<=this.height;s++)this.canPutDisk(o,s,e,t).length>0&&r.add(this.disks[o][s]);return r}}class fe extends Yt{constructor(){super();x(this,"teams");x(this,"_members");x(this,"default_membership_index");x(this,"default_membership_list",["1 팀","2 팀","불참"]);x(this,"start_team_index");x(this,"start_team_list",["1 팀","2 팀","무작위"]);x(this,"game_board");this.teams={},this.teams.TEAM1=new Vt({name:localStorage.getItem("svsv:othello:teams:TEAM1:name")||"1 팀",timeout_index:parseInt(localStorage.getItem("svsv:othello:teams:TEAM1:timeout_index")||"0"),disk_index:parseInt(localStorage.getItem("svsv:othello:teams:TEAM1:disk_index")||"0"),put_index:parseInt(localStorage.getItem("svsv:othello:teams:TEAM1:put_index")||"0")}),this.teams.TEAM2=new Vt({name:localStorage.getItem("svsv:othello:teams:TEAM2:name")||"2 팀",timeout_index:parseInt(localStorage.getItem("svsv:othello:teams:TEAM2:timeout_index")||"2"),disk_index:parseInt(localStorage.getItem("svsv:othello:teams:TEAM2:disk_index")||"1"),put_index:parseInt(localStorage.getItem("svsv:othello:teams:TEAM2:put_index")||"1")}),this._members={},this.default_membership_index=parseInt(localStorage.getItem("svsv:othello:default_membership_index")||"1"),this.start_team_index=parseInt(localStorage.getItem("svsv:othello:start_team_index")||"2"),this.game_board=new de(this)}get members(){return this._members}get default_membership(){return this.default_membership_list[this.default_membership_index]}get start_team(){return this.start_team_list[this.start_team_index]}nextTeamTimeout(t,r){this.teams[t].nextTimeout(r),localStorage.setItem(`svsv:othello:teams:${t}:timeout_index`,this.teams[t].timeout_index.toString()),this.emit("teams:timeout",t,this.teams[t].timeout)}nextTeamDisk(t,r){this.teams[t].nextDisk(r),localStorage.setItem(`svsv:othello:teams:${t}:disk_index`,this.teams[t].disk_color_index.toString()),this.emit("teams:disk",t,this.teams[t].disk_color)}nextTeamPut(t,r){this.teams[t].nextPut(r),localStorage.setItem(`svsv:othello:teams:${t}:put_index`,this.teams[t].put_index.toString()),this.emit("teams:put",t,this.teams[t].put)}nextDefaultMembership(t){this.default_membership_index=(this.default_membership_index+this.default_membership_list.length+t)%this.default_membership_list.length,localStorage.setItem("svsv:othello:default_membership_index",this.default_membership_index.toString()),this.emit("default_membership",this.default_membership)}nextStartTeam(t){this.start_team_index=(this.start_team_index+this.start_team_list.length+t)%this.start_team_list.length,localStorage.setItem("svsv:othello:start_team_index",this.start_team_index.toString()),this.emit("start_team",this.start_team)}setMemberShip(t,r){this._members[t]=r??this._members[t]??"기본값",this.emit("members",t,this._members[t])}clearMemberShip(){this._members={}}}const k=new fe,Rt=(m,e)=>[`${String.fromCharCode(m+65-1)}`,`${e}`],Bt=m=>{let e=-1,t=-1;return/^[a-z]\d+.*/.test(m)?(e=m[0].charCodeAt(0)-97+1,t=parseInt(m.slice(1))):/^[A-Z]\d+.*/.test(m)&&(e=m[0].charCodeAt(0)-65+1,t=parseInt(m.slice(1))),[e,t]},Xt=m=>{switch(m){case N.TEAM1:return B.TEAM1;case N.TEAM2:return B.TEAM2;case N.DEFAULT:case N.NONE:return}};class Gt extends H.GameObjects.Container{constructor(t,r,o,s,a,c){super(t,r,o);x(this,"team_tag");x(this,"disk_set",new Set);x(this,"timer_text");x(this,"timer_event");x(this,"pass_text");x(this,"chat_nickname_list",[]);x(this,"chat_position_list",[]);x(this,"chat_nickname_width");x(this,"chat_font_size");x(this,"cover");x(this,"chat_flag",new Set);x(this,"vote",{});t.add.existing(this),this.team_tag=c;const u=s/50,f=d.style.font_style.fontSize,p=t.add.graphics().lineStyle(u,d.style.color.grey_f).strokeRect(0,0,s,a);this.add(p);const h=f,n=t.add.text(s/2,h,k.teams[c].name,{...d.style.font_style}).setOrigin(.5);this.add(n);const i=h+f*2,g=k.teams[c].disk_color===W.WHITE?0:6,y=t.add.sprite(s*1/4,i,"Othello:assets",g).setScale(d.SCALE).setOrigin(.5),_=k.game_board.counter[c],v=t.add.text(s*2/3,i,_.toString(),{...d.style.font_style,fontSize:f*(.8+1.2*_/64)}).setOrigin(.5);this.add([y,v]);const b=i+f*2,C=t.add.text(s*2/5,b,"남은 시간",{...d.style.font_style,fontSize:f*2/3}).setOrigin(.5),T=k.teams[c].timeout<0?"무제한":`${k.teams[c].timeout} 초`;this.timer_text=t.add.text(s*2/5,b+f,T,{...d.style.font_style,color:d.style.color_code.green_f}).setOrigin(.5),this.pass_text=t.add.text(s*3/4,b,`턴
종
료`,{...d.style.font_style,fontSize:f*2/3,color:d.style.color_code.pink_a}).setOrigin(0,.2).setInteractive().on("pointerup",()=>{this.timer_event.repeatCount=0,this.scene.sound.play("Common:sound:select",{volume:d.volume_effect})}).on("pointerover",()=>{this.pass_text.setColor(d.style.color_code.pink_f)}).on("pointerout",()=>{this.pass_text.setColor(d.style.color_code.pink_a)}),this.add([C,this.timer_text,this.pass_text]),this.timer_event=t.time.addEvent({}),t.events.on("shutdown",()=>{t.time.removeEvent(this.timer_event)});const S=f/4,A=b+f*2,w=s-2*S,F=a-A-S,I=u/2,O=t.add.graphics().lineStyle(I,d.style.color.grey_f).strokeRect(S,A,w,F);this.add([O]);const D=S+f/8,R=11;this.chat_font_size=f/2,this.chat_nickname_width=w-this.chat_font_size*2.5;for(let j=0;j<R;j++){const nt=t.add.text(D,A+this.chat_font_size*j*1.1,"nickname",{...d.style.font_style,fontSize:this.chat_font_size}).setCrop(0,0,this.chat_nickname_width,this.chat_font_size),_t=t.add.text(D+this.chat_nickname_width+this.chat_font_size*2/3,A+this.chat_font_size*j*1.1,"A1",{...d.style.font_style,fontSize:this.chat_font_size});this.chat_nickname_list.push(nt),this.chat_position_list.push(_t)}this.add([...this.chat_nickname_list,...this.chat_position_list]),this.cover=t.add.rectangle(-I,-I,s+2*I,a+2*I,d.style.color.grey_0,.5).setOrigin(0),this.add(this.cover);const L=()=>{const j=k.game_board.counter[c];v.setText(j.toString()).setFontSize(f*(.8+1.2*j/64))};k.on(et.SET,L),t.events.on("shutdown",()=>{k.off(et.SET,L)}),this.clearChat()}onstartturn(t,r){this.cover.visible=!1,this.disk_set=t,this.scene.time.removeEvent(this.timer_event),this.vote={},this.timer_event=this.scene.time.addEvent({delay:(d.DEBUG,1e3),repeat:k.teams[this.team_tag].timeout,callback:()=>{if(this.timer_text.setText(k.teams[this.team_tag].timeout<0?"무제한":`${this.timer_event.repeatCount-1} 초`),this.timer_event.repeatCount>6?this.timer_text.setColor(d.style.color_code.green_f).setScale(1):this.timer_text.setColor(d.style.color_code.pink_f).setScale(1.3),this.timer_event.repeatCount===0){const o=k.teams[this.team_tag].timeout<0?"무제한":`${k.teams[this.team_tag].timeout} 초`;this.timer_text.setText(o).setColor(d.style.color_code.green_f).setScale(1),r(this.team_tag,this.disk_set,this.vote)}}}),this.clearChat()}onendturn(){this.timer_event.paused=!0,this.cover.visible=!0}clearChat(){this.chat_nickname_list.forEach(t=>t.setText("").setVisible(!1)),this.chat_position_list.forEach(t=>t.setText("").setVisible(!1)),this.chat_flag=new Set}addChat(t,r,o,s,a){if(this.chat_flag.has(t))return;this.chat_flag.add(t);const[c,u]=Rt(o,s),f=c+u;this.chat_nickname_list.forEach((p,h)=>{h===this.chat_nickname_list.length-1?p.setText(r).setCrop(0,0,this.chat_nickname_width,this.chat_font_size).setVisible(!0):p.setText(this.chat_nickname_list[h+1].text).setCrop(0,0,this.chat_nickname_width,this.chat_font_size).setVisible(!0)}),this.chat_position_list.forEach((p,h)=>{h===this.chat_position_list.length-1?p.setText(f).setVisible(!0):p.setText(this.chat_position_list[h+1].text).setVisible(!0)}),this.vote[f]?this.vote[f]+=1:this.vote[f]=1,a.setText(`${this.vote[f]}`).setVisible(!0)}endGame(){this.timer_event.paused=!0}}const Tt=class Tt extends H.Scene{constructor(){super(Tt.key);x(this,"tiles",[]);x(this,"disks",[]);x(this,"votes",[]);x(this,"team_panels",{});x(this,"curr_turn",B.TEAM1);x(this,"prev_pass",!1);x(this,"back_text");x(this,"is_end",!1)}static preload(t){t.anims.create({key:`${W.WHITE}-${W.BLACK}`,frames:t.anims.generateFrameNumbers("Othello:assets",{start:0,end:6})}),t.anims.create({key:`${W.BLACK}-${W.WHITE}`,frames:t.anims.generateFrameNumbers("Othello:assets",{start:6,end:12})})}create(){const t=d.WIDTH/(k.game_board.width+2),r=d.HEIGHT/(k.game_board.height+2),o=Math.min(t,r)/32,s=d.HEIGHT/20;this.add.text(d.WIDTH/2,s,"스트리머 vs 시청자",{...d.style.font_style,color:d.style.color_code.green_f}).setOrigin(.5,0);const a=0,c=d.HEIGHT/20;this.back_text=this.add.text(a,c,`종
료`,{...d.style.font_style,color:d.style.color_code.pink_a}).setOrigin(.5,0).setInteractive().on("pointerup",()=>{this.sound.play("Common:sound:exit",{volume:d.volume_effect}),this.scene.start(ft.key)}).on("pointerover",()=>{this.back_text.setColor(d.style.color_code.pink_f),this.back_text.setOrigin(0,0)}).on("pointerout",()=>{this.is_end||(this.back_text.setColor(d.style.color_code.pink_a),this.back_text.setOrigin(.5,0))});const u=32*o,f=32*o,p=(d.WIDTH-u*(k.game_board.width+2))/2,h=f/2+d.style.font_style.fontSize-32*o/2,n=d.style.color.green_a,i=d.style.color.green_f;for(let w=0;w<k.game_board.width+2;w++){this.tiles[w]=[],this.disks[w]=[],this.votes[w]=[];for(let F=0;F<k.game_board.height+2;F++){const I=p+w*u,O=h+F*f;switch(k.game_board.tiles[w][F]){case Nt.EMPTY:this.tiles[w][F]=this.add.sprite(I,O,"Othello:assets",16).setOrigin(0).setScale(o).setTint(n).setToBack();const Pt=this.add.graphics().lineStyle(2*o,i).strokeRoundedRect(I,O,u,f,2*o);Pt.visible=!1,this.tiles[w][F].setInteractive().on("pointerup",()=>{k.teams[this.curr_turn].put===J.CLICK&&k.game_board.putDisk(w,F,this.curr_turn,k.teams[this.curr_turn].disk_color)}).on("pointerover",()=>{Pt.visible=!0}).on("pointerout",()=>{Pt.visible=!1});break;case Nt.WALL:let Q;if(w==0)F==0?Q=21:F==k.game_board.height+1?Q=23:Q=17;else if(w==k.game_board.width+1)F==0?Q=22:F==k.game_board.height+1?Q=24:Q=18;else if(F==0)Q=19;else if(F==k.game_board.height+1)Q=20;else break;this.tiles[w][F]=this.add.sprite(I,O,"Othello:assets",Q).setOrigin(0).setScale(o).setTint(n).setToBack();break}const R=k.game_board.disks[w][F];let L=13;switch(R.disk_color){case W.WHITE:L=0;break;case W.BLACK:L=6;break;case W.NONE:L=13;break}this.disks[w][F]=this.add.sprite(I,O,"Othello:assets",L).setOrigin(0).setScale(o),this.votes[w][F]=this.add.text(I+u/2,O+f/2,"0",{...d.style.font_style,fontSize:d.style.font_style.fontSize*2/3,backgroundColor:d.style.color_code.green_a}).setOrigin(.5).setVisible(!1);const j={...d.style.font_style,fontSize:d.style.font_style.fontSize*2/3,color:d.style.color_code.green_a},[nt,_t]=Rt(w,F);w===0&&F>0&&F<k.game_board.height+1&&this.add.text(I+u*3/4,O+f/2,_t,j).setOrigin(.5),F===0&&w>0&&w<k.game_board.width+1&&this.add.text(I+u/2,O+f*3/4,nt,j).setOrigin(.5),w===k.game_board.width+1&&F>0&&F<k.game_board.height+1&&this.add.text(I+u*1/4,O+f/2,_t,j).setOrigin(.5),F===k.game_board.height+1&&w>0&&w<k.game_board.width+1&&this.add.text(I+u/2,O+f*1/4,nt,j).setOrigin(.5)}}const l=u/2,g=h+f,y=(d.WIDTH-u*(k.game_board.width+3))/2,_=d.HEIGHT-(g+f/2);this.team_panels[B.TEAM1]=new Gt(this,l,g,y,_,B.TEAM1),this.team_panels[B.TEAM2]=new Gt(this,d.WIDTH-y-l,g,y,_,B.TEAM2);const v=(w,F,I,O)=>{if(I===W.NONE||I===O){const D=O===W.WHITE?0:6;this.disks[w][F].setFrame(D).setTint(d.style.color.grey_f)}else this.disks[w][F].anims.play(`${I}-${O}`)},b=(w,F)=>{if(this.curr_turn===B.TEAM1&&k.members[d.proxy.channel_id]===N.TEAM1||this.curr_turn===B.TEAM2&&k.members[d.proxy.channel_id]===N.TEAM2){const[I,O]=Rt(w,F);d.proxy.message=I+O}this.sound.play("Common:sound:open_menu",{volume:d.volume_effect}),this.nextTurn()},C=()=>{this.sound.play("Common:sound:close_menu",{volume:d.volume_effect})};k.on(et.SET,v),k.on(et.PUT,b),k.on(et.PUT_FAIL,C),this.events.on("shutdown",()=>{k.off(et.SET,v),k.off(et.PUT,b),k.off(et.PUT_FAIL,C)});const T=({channel_id:w,nickname:F,message:I})=>{const[O,D]=Bt(I);k.setMemberShip(w);const R=k.members[w]===N.DEFAULT?k.default_membership:k.members[w],L=Xt(R);if(L===void 0||this.curr_turn!==L)return;const j=this.team_panels[L].disk_set;for(const nt of j)if(nt.x===O&&nt.y===D){this.team_panels[L].addChat(w,F,O,D,this.votes[O][D]),k.teams[L].put===J.FIRST&&this.putDisk(L,j,this.team_panels[L].vote);break}};d.on(K.CHAT,T),d.on(K.DONATION,T),this.events.on("shutdown",()=>{d.off(K.CHAT,T),d.off(K.DONATION,T)});const S=["battle1","battle2","battle3"],A=S[Math.floor(Math.random()*S.length)];switch(d.bgm=d.bgm_map["bgm:"+A+":intro"],k.start_team){case ct.TEAM1:this.setTurn(B.TEAM1);break;case ct.TEAM2:this.setTurn(B.TEAM2);break;case ct.RANDOM:const w=[B.TEAM1,B.TEAM2];this.setTurn(w[Math.round(Math.random())]);break}}putDisk(t,r,o){const s=k.teams[t].put;let a=!1;if(s===J.MOST||s===J.FIRST&&Object.keys(o).length>0){let c=0,u="";for(const h in o){const n=o[h];c<n?(c=n,u=h):n===c&&Math.random()<.5&&(u=h)}const[f,p]=Bt(u);a=k.game_board.putDisk(f,p,t,k.teams[t].disk_color)}else if(s===J.PROPORTIONAL&&Object.keys(o).length>0){const c=[];for(const h in o)for(let n=0;n<o[h];n++)c.push(h);const u=c[Math.floor(Math.random()*c.length)],[f,p]=Bt(u);a=k.game_board.putDisk(f,p,t,k.teams[t].disk_color)}if(s===J.CLICK||Object.keys(o).length===0||!a){const c=[...r][Math.floor(Math.random()*r.size)];k.game_board.putDisk(c.x,c.y,t,k.teams[t].disk_color)}}setTurn(t){const r=k.teams[t].disk_color,o=k.game_board.canPutDiskSet(t,r);if(o.size>0){this.team_panels[this.curr_turn].onendturn(),this.team_panels[t].onstartturn(o,(s,a,c)=>{this.putDisk(s,a,c)}),this.curr_turn=t,this.prev_pass=!1;for(let s=1;s<=k.game_board.width;s++)for(let a=1;a<=k.game_board.height;a++)o.has(k.game_board.disks[s][a])?this.disks[s][a].setFrame(14).setTint(d.style.color.green_a):k.game_board.disks[s][a].disk_color===W.NONE&&this.disks[s][a].setFrame(13),this.votes[s][a].setVisible(!1)}else this.prev_pass?this.endGame():(this.prev_pass=!0,this.setTurn(this.curr_turn))}nextTurn(){const t=this.curr_turn===B.TEAM1?B.TEAM2:B.TEAM1;this.setTurn(t)}endGame(){for(let o=1;o<=k.game_board.width;o++)for(let s=1;s<=k.game_board.height;s++)k.game_board.disks[o][s].disk_color===W.NONE&&this.disks[o][s].setFrame(13);const t=Xt(k.members[d.proxy.channel_id]),r=t===B.TEAM1?B.TEAM2:B.TEAM1;if(!t)d.bgm=d.bgm_map["bgm:victory:intro"];else{const o=k.game_board.counter[t],s=k.game_board.counter[r];o/2>s?d.bgm=d.bgm_map["bgm:victory2:intro"]:o>s?d.bgm=d.bgm_map["bgm:victory:intro"]:o===s?d.bgm=d.bgm_map["bgm:draw:intro"]:o*2>s?d.bgm=d.bgm_map["bgm:defeat:intro"]:d.bgm=d.bgm_map["bgm:defeat2:intro"]}this.team_panels[B.TEAM1].endGame(),this.team_panels[B.TEAM2].endGame(),this.is_end=!0,this.back_text.setColor(d.style.color_code.pink_f),this.back_text.setOrigin(0,0)}};x(Tt,"key","OthelloGameScene");let dt=Tt;class zt extends H.GameObjects.Container{constructor(e,t,r){super(e,t,r),e.add.existing(this)}}class me extends zt{constructor(t,r,o,s,{label:a="label",value:c="value"}){super(t,r,o);x(this,"value_text");const u=s*1/10,f=this.scene.add.text(u,0,a,{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5,0).setPadding(d.style.font_padding);this.add(f);const p=s*6/10;this.value_text=this.scene.add.text(p,0,c,{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5,0).setPadding(d.style.font_padding),this.add(this.value_text),this.scene.add.graphics()}}class ge extends zt{constructor(t,r,o,s,{label:a="label",value:c="value",on_left_button_click:u,on_right_button_click:f}){super(t,r,o);x(this,"value_text");const p=s*1/10,h=this.scene.add.text(p,0,a,{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5,0).setPadding(d.style.font_padding);this.add(h);const n=s*6/10;this.value_text=this.scene.add.text(n,0,c,{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5,0).setPadding(d.style.font_padding),this.add(this.value_text);const i=s*3/10,l=this.scene.add.sprite(i,0,"Common:button_header").setOrigin(.5,.25).setScale(d.SCALE).setFlipX(!0).setTint(d.style.color.grey_a).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),u==null||u()}).on("pointerover",()=>{l.setTint(d.style.color.grey_4)}).on("pointerout",()=>{l.setTint(d.style.color.grey_a)}),g=s*9/10,y=this.scene.add.sprite(g,0,"Common:button_header").setOrigin(.5,.25).setScale(d.SCALE).setTint(d.style.color.grey_a).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),f==null||f()}).on("pointerover",()=>{y.setTint(d.style.color.grey_4)}).on("pointerout",()=>{y.setTint(d.style.color.grey_a)});this.add([l,y])}setValueText(t){this.value_text.setText(t)}}class ye extends zt{constructor(t,r,o,s,a,{height:c}){super(t,r,o);x(this,"page_index",0);x(this,"page_count",1);x(this,"users",[]);x(this,"nicknames",[]);x(this,"users_flag",new Set);x(this,"per_page",16);x(this,"font_size");x(this,"nickname_text",[]);x(this,"nickname_text_width");x(this,"team_text",[]);x(this,"page_text");x(this,"left_button");x(this,"right_button");const u=s/200,f=t.add.graphics().lineStyle(u*2,8947848).strokeRect(-u,-u,s+2*u,a+2*u);this.add(f);const p=n=>{switch(n){case N.DEFAULT:return N.TEAM1;case N.TEAM1:return N.TEAM2;case N.TEAM2:return N.NONE;case N.NONE:return N.DEFAULT}};this.font_size=d.style.font_style.fontSize,this.nickname_text_width=s*8/20;for(let n=0;n<this.per_page/2;n++)for(let i=0;i<2;i++){(n+i)%2&&this.add(t.add.graphics().fillStyle(d.style.color.grey_f).fillRect(s*i/2,this.font_size*n,s/2,this.font_size));const l=t.add.text((s*i+s*1/20)/2,this.font_size*(n+.5),"nickname",{...d.style.font_style,color:d.style.color_code.grey_0}).setScale(.8).setOrigin(0,.5).setCrop(0,0,this.nickname_text_width,this.font_size);this.nickname_text.push(l);const g=t.add.text((s*i+s*15/20)/2+this.font_size,this.font_size*(n+.5),N.TEAM1,{...d.style.font_style,color:d.style.color_code.green_f}).setScale(.8).setOrigin(.5,.5).setTint(d.style.color.grey_a);g.setInteractive().on("pointerup",()=>{const y=this.page_index*this.per_page+2*n+i,_=this.users[y];this.nicknames[y];const v=k.members[_],b=p(v);k.setMemberShip(_,b),this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),g.setText(b)}).on("pointerover",()=>{g.setTint(d.style.color.grey_4)}).on("pointerout",()=>{g.setTint(d.style.color.grey_a)}),this.team_text.push(g)}this.add(this.nickname_text),this.add(this.team_text);const h=a+d.style.font_style.fontSize/2;this.page_text=t.add.text(s/2,h,` ${this.page_index} / ${this.page_count} `,{...d.style.font_style,backgroundColor:d.style.color_code.grey_0}).setOrigin(.5,0),this.add(this.page_text),this.left_button=t.add.sprite(s*2/6,h,"Common:button_header").setTint(d.style.color.grey_a).setOrigin(.5,.25).setScale(d.SCALE).setFlipX(!0),this.left_button.setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),this.movePage(-1)}).on("pointerover",()=>{this.left_button.setTint(d.style.color.grey_4)}).on("pointerout",()=>{this.left_button.setTint(d.style.color.grey_a)}),this.right_button=t.add.sprite(s*4/6,h,"Common:button_header").setTint(d.style.color.grey_a).setOrigin(.5,.25).setScale(d.SCALE),this.right_button.setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),this.movePage(1)}).on("pointerover",()=>{this.right_button.setTint(d.style.color.grey_4)}).on("pointerout",()=>{this.right_button.setTint(d.style.color.grey_a)}),this.add([this.left_button,this.right_button]),this.addUser(d.proxy.channel_id,d.proxy.nickname??"방장")}addUser(t,r){this.users_flag.has(t)||(this.users.push(t),this.nicknames.push(r),this.users_flag.add(t),k.setMemberShip(t,d.proxy.channel_id===t?N.TEAM1:N.DEFAULT),this.page_count=Math.ceil(this.users.length/this.per_page),this.page_text.setText(` ${this.page_index+1} / ${this.page_count} `),this.updateTable())}movePage(t){this.page_index=Math.max(0,Math.min(this.page_count-1,this.page_index+t)),this.page_text.setText(` ${this.page_index+1} / ${this.page_count} `),this.updateTable()}updateTable(){for(let t=0;t<this.per_page;t++){const r=this.nickname_text[t],o=this.team_text[t],s=this.per_page*this.page_index+t,a=this.users[s],c=this.nicknames[s],u=k.members[a];c?(r.setText(c).setCrop(0,0,this.nickname_text_width,this.font_size).setVisible(!0),o.setText(u).setVisible(!0)):(r.setVisible(!1),o.setVisible(!1))}}}class Ht extends H.GameObjects.Container{constructor(t,r,o){super(t);x(this,"tag_background");x(this,"tag_text");x(this,"panel_background");x(this,"tag_x_offset");x(this,"tag_y_offset");x(this,"tag_width");x(this,"tag_height");x(this,"round");x(this,"tag_text_x_offset");x(this,"tag_text_y_offset");x(this,"panel_x_offset");x(this,"panel_y_offset");x(this,"panel_width");x(this,"panel_height");x(this,"option_count",0);x(this,"_selected",!1);x(this,"onselect",()=>{});x(this,"onunselect",()=>{});this.scene.add.existing(this);const s=d.WIDTH/20,a=d.HEIGHT/20;this.round=d.WIDTH/100,this.tag_width=d.WIDTH*9/10/5,this.tag_height=d.style.font_style.fontSize*2,this.tag_x_offset=s+o*this.tag_width,this.tag_y_offset=a,this.tag_background=t.add.graphics(),this.add(this.tag_background);const c=t.add.zone(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height).setOrigin(0).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),this.select=!0}).on("pointerover",()=>{this._selected||this.tag_background.fillStyle(d.style.color.grey_a).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round)}).on("pointerout",()=>{this._selected||this.tag_background.fillStyle(d.style.color.grey_6).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round)});this.add(c),this.tag_text_x_offset=s+this.tag_width/2+o*this.tag_width,this.tag_text_y_offset=this.tag_y_offset+this.tag_height/2,this.tag_text=t.add.text(this.tag_text_x_offset,this.tag_text_y_offset,r,d.style.font_style).setOrigin(.5).setPadding(d.style.font_padding),this.add(this.tag_text),this.panel_x_offset=s,this.panel_y_offset=this.tag_y_offset+this.tag_height,this.panel_width=d.WIDTH*9/10,this.panel_height=d.HEIGHT*9/10-this.panel_y_offset+a,this.panel_background=t.add.graphics().fillStyle(d.style.color.grey_e).fillRoundedRect(this.panel_x_offset,this.panel_y_offset,this.panel_width,this.panel_height,this.round),this.add(this.panel_background);const u=t.add.zone(this.panel_x_offset,this.panel_y_offset,this.panel_width,this.panel_height).setOrigin(0).setInteractive();this.add(u),this.select=!1}getOptionPosition(t=1){const r=this.panel_x_offset+this.panel_width/20,o=this.panel_y_offset+this.panel_height/20+this.option_count*d.style.font_style.fontSize*2,s=d.WIDTH-2*r,a=t*d.style.font_style.fontSize*2;return{option_x_offset:r,option_y_offset:o,option_width:s,option_height:a}}addTextOption({label:t,value:r}){const{option_x_offset:o,option_y_offset:s,option_width:a}=this.getOptionPosition();this.option_count+=1;const c=new me(this.scene,o,s,a,{label:t,value:r});return this.add(c),c}addListOption({label:t,value:r,on_left_button_click:o,on_right_button_click:s}){const{option_x_offset:a,option_y_offset:c,option_width:u}=this.getOptionPosition();this.option_count+=1;const f=new ge(this.scene,a,c,u,{label:t,value:r,on_left_button_click:o,on_right_button_click:s});return this.add(f),f}addPageOption({height:t=1}){const{option_x_offset:r,option_y_offset:o,option_width:s,option_height:a}=this.getOptionPosition(t);this.option_count+=t;const c=new ye(this.scene,r,o,s,a,{height:t});return this.add(c),c}addText({height:t=1,value:r}){const{option_x_offset:o,option_y_offset:s,option_width:a,option_height:c}=this.getOptionPosition(t);this.option_count+=t;const u=this.scene.add.text(o,s,r??"[ERROR] empty text",{...d.style.font_style,color:d.style.color_code.grey_0,wordWrap:{width:a},align:"left"}).setOrigin(0,0);return this.add(u),u}set select(t){t?(this.tag_background.fillStyle(d.style.color.grey_e).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round),this.tag_text.setTint(d.style.color.grey_0),this.setToTop(),this.onselect()):(this.tag_background.fillStyle(d.style.color.grey_6).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round),this.tag_text.setTint(d.style.color.grey_f),this.onunselect()),this._selected=t}}class Jt extends Ht{constructor(e,t,r,o){super(e,o,r);const s=k.teams[t].timeout<0?"무제한":`${k.teams[t].timeout} 초`,a=this.addListOption({label:"제한시간",value:s,on_left_button_click:()=>{k.nextTeamTimeout(t,-1)},on_right_button_click:()=>{k.nextTeamTimeout(t,1)}}),c=this.addListOption({label:"색깔",value:k.teams[t].disk_color,on_left_button_click:()=>{k.nextTeamDisk(t,-1)},on_right_button_click:()=>{k.nextTeamDisk(t,1)}}),u=this.addListOption({label:"놓는방식",value:k.teams[t].put,on_left_button_click:()=>{k.nextTeamPut(t,-1)},on_right_button_click:()=>{k.nextTeamPut(t,1)}}),f=()=>{let l="※ ";switch(k.teams[t].timeout){case Zt.INFINITE:l+="시간 제한 없이 ";break;default:const g=k.teams[t].put;l+=`${k.teams[t].timeout} 초`,l+=g===J.CLICK||g===J.FIRST?" 안에 ":"가 지나면 자동으로 ";break}switch(k.teams[t].put){case J.CLICK:l+="클릭한 곳에 ";break;case J.MOST:l+="가장 많이 투표된 곳에 ";break;case J.PROPORTIONAL:l+="투표 수에 비례하여 확률적으로 ";break;case J.FIRST:l+="가장 먼저 투표된 곳에 ";break}return l+=`${k.teams[t].disk_color} 말을 `,l+="놓습니다.",l},p=this.addText({value:f()});k.on("teams:timeout",()=>{p.setText(f())}),k.on("teams:disk",()=>{p.setText(f())}),k.on("teams:put",()=>{p.setText(f())});const h=(l,g)=>{if(t===l){const y=g<0?"무제한":`${g} 초`;a.setValueText(y)}},n=(l,g)=>{t===l&&c.setValueText(g)},i=(l,g)=>{t===l&&u.setValueText(g)};k.on("teams:timeout",h),k.on("teams:disk",n),k.on("teams:put",i),this.scene.events.on("shutdown",()=>{k.off("teams:timeout",h),k.off("teams:disk",n),k.off("teams:put",i)})}}class _e extends Ht{constructor(e,t){super(e,"팀원",t);const r=this.addListOption({label:"기본값",value:k.default_membership,on_left_button_click:()=>k.nextDefaultMembership(-1),on_right_button_click:()=>k.nextDefaultMembership(1)}),o=this.addPageOption({height:4}),s=c=>{r.setValueText(c)};k.on("default_membership",s);const a=({channel_id:c,nickname:u,message:f})=>{o.addUser(c,u)};d.on(K.CHAT,a),d.on(K.DONATION,a),e.events.on("shutdown",()=>{k.off("default_membership",s),d.off(K.CHAT,a),d.off(K.DONATION,a)})}}class ve extends Ht{constructor(e,t,r){super(e,"리버시",t),this.tag_text.setColor(d.style.color_code.green_f);const o=this.addListOption({label:"누구부터",value:k.start_team,on_left_button_click:()=>k.nextStartTeam(-1),on_right_button_click:()=>k.nextStartTeam(1)}),s=()=>{let f="";switch(k.start_team){case ct.TEAM1:case ct.TEAM2:f+=`※ ${k.start_team}부터 시작합니다.

`;case ct.RANDOM:f+=`※ 랜덤으로 시작 팀을 정합니다.

`}return f+=`※ 시청자는 채팅으로 참여할 수 있습니다.
※ 영어+숫자로 시작되는 채팅을 입력합니다
예시) 'D3', 'e6에 한 표!'`,f},a=this.addText({value:s()}),c=this.scene.add.text(this.panel_x_offset+this.panel_width/2,this.panel_y_offset+this.panel_height*3/4,"드가자!",{...d.style.font_style,fontSize:d.style.font_style.fontSize*2,color:d.style.color_code.green_a}).setOrigin(.5).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:shop",{volume:d.volume_effect}),r()}).on("pointerover",()=>{c.setColor(d.style.color_code.grey_4)}).on("pointerout",()=>{c.setColor(d.style.color_code.green_a)});this.add(c);const u=f=>{o.setValueText(f),a.setText(s())};k.on("start_team",u),this.scene.events.on("shutdown",()=>{k.off("start_team",u)})}}const St=class St extends H.Scene{constructor(){super(St.key);x(this,"startGameScene",()=>{k.game_board.init(k.teams[B.TEAM1].disk_color,k.teams[B.TEAM2].disk_color),this.scene.start(dt.key)})}create(){d.bgm=d.bgm_map["bgm:login:intro"],k.clearMemberShip();const t=new Jt(this,B.TEAM1,0,N.TEAM1),r=new Jt(this,B.TEAM2,1,N.TEAM2),o=new _e(this,2.5),s=new ve(this,4,this.startGameScene),a=0,c=d.HEIGHT/20,u=this.add.text(a,c,`뒤
로`,{...d.style.font_style,color:d.style.color_code.pink_a,backgroundColor:d.style.color_code.grey_0}).setOrigin(.5,0).setInteractive().on("pointerup",()=>{this.sound.play("Common:sound:exit",{volume:d.volume_effect}),this.scene.start(mt.key)}).on("pointerover",()=>{u.setColor(d.style.color_code.pink_f),u.setOrigin(0,0)}).on("pointerout",()=>{u.setColor(d.style.color_code.pink_a),u.setOrigin(.5,0)});t.onselect=()=>{r.select=!1,o.select=!1,s.select=!1},r.onselect=()=>{t.select=!1,o.select=!1,s.select=!1},o.onselect=()=>{t.select=!1,r.select=!1,s.select=!1},s.onselect=()=>{t.select=!1,r.select=!1,o.select=!1},t.select=!0}};x(St,"key","OthelloSettingScene");let ft=St;const pt=class pt extends Lt{constructor(t,r,o,s,a){super(t,r,o,s,a);x(this,"scene");this.scene=t;const c=this.scene.add.sprite(0,0,"Othello:assets",32);super.init("오델로",c,pt.game_logo_animation_key)}static preload(t){t.anims.create({key:pt.game_logo_animation_key,frames:t.anims.generateFrameNumbers("Othello:assets",{start:32,end:44}),duration:this.animation_duration,repeat:-1,repeatDelay:this.animation_duration*2,delay:this.animation_duration*Math.random()*2})}onpointerup(){this.scene.sound.play("Common:sound:pause",{volume:d.volume_effect}),this.scene.scene.start(ft.key)}};x(pt,"game_logo_animation_key","OthelloSelectGameButton:animation");let bt=pt;const Dt="2025.06.24.1110",At=class At extends H.Scene{constructor(){super(At.key)}create(){this.add.text(0,d.HEIGHT,Dt,{...d.style.font_style}).setOrigin(0,1);const e=d.HEIGHT/20;this.add.text(d.WIDTH/2,e,"스트리머 vs 시청자",{...d.style.font_style,color:d.style.color_code.green_f}).setOrigin(.5,0);const t=d.WIDTH*.2,r=d.HEIGHT*.5,o=[bt].map((l,g)=>new l(this,d.WIDTH*(1/2+g*3/10),d.HEIGHT/2,t,r)),s=t,a=r,c=d.WIDTH*.3,u=this.add.zone(d.WIDTH/2-c,d.HEIGHT/2,s,a).setOrigin(.5),f=this.add.zone(d.WIDTH/2,d.HEIGHT/2,s,a).setOrigin(.5),p=this.add.zone(d.WIDTH/2+c,d.HEIGHT/2,s,a).setOrigin(.5),h=(l,g,y)=>{l<0||l>=o.length||(o[l].centered=g,o[l].pointerover=y)},n=(l,g,y)=>{l<0||l>=o.length||(o[l].centered=g,o[l].pointerover=y)};let i=0;u.setInteractive().on("pointerup",()=>{i!==0&&o.forEach((l,g)=>{l.setPosition(l.x+c,l.y),l.centered=i-1==g,l.pointerover=i-2==g}),i=Math.max(i-1,0)}).on("pointerdown",()=>{}).on("pointerover",()=>{i>0&&this.sound.play("Common:sound:cancel",{volume:d.volume_effect}),h(i-1,!1,!0)}).on("pointerout",()=>{n(i-1,!1,!1)}),f.setInteractive().on("pointerup",()=>{o[i].onpointerup()}).on("pointerdown",()=>{o[i].onpointerdown()}).on("pointerover",()=>{this.sound.play("Common:sound:cancel",{volume:d.volume_effect}),h(i,!0,!0)}).on("pointerout",()=>{n(i,!0,!1)}),p.setInteractive().on("pointerup",()=>{i!==o.length-1&&o.forEach((l,g)=>{l.setPosition(l.x-c,l.y),l.centered=i+1==g,l.pointerover=i+2==g}),i=Math.min(i+1,o.length-1)}).on("pointerdown",()=>{}).on("pointerover",()=>{i<o.length-1&&this.sound.play("Common:sound:cancel",{volume:d.volume_effect}),h(i+1,!1,!0)}).on("pointerout",()=>{n(i+1,!1,!1)}),o[i].centered=!0}};x(At,"key","SelectGameScene");let mt=At;const Et=class Et extends H.Scene{constructor(){super(Et.key)}init(){this.add.text(0,d.HEIGHT,Dt,{...d.style.font_style}).setOrigin(0,1),this.add.text(d.WIDTH/2,d.HEIGHT/2,"Loading...",{...d.style.font_style}).setOrigin(.5)}preload(){this.load.spritesheet("Othello:assets","assets/Games/Othello/Othello.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("Common:button_header","assets/Common/button_header.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("Common:button_close","assets/Common/button_close.png",{frameWidth:32,frameHeight:32}),this.load.setPath("assets/Common/"),this.load.audio("bgm:battle1:intro","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/And The Journey Begins/xDeviruchi - And The Journey Begins (Intro).wav"),this.load.audio("bgm:battle1","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/And The Journey Begins/xDeviruchi - And The Journey Begins (Loop).wav"),this.load.audio("bgm:battle2:intro","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Exploring The Unknown/xDeviruchi - Exploring The Unknown (Intro).wav"),this.load.audio("bgm:battle2","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Exploring The Unknown/xDeviruchi - Exploring The Unknown (Loop).wav"),this.load.audio("bgm:battle3:intro","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Prepare for Battle!/xDeviruchi - Prepare for Battle! (Intro).wav"),this.load.audio("bgm:battle3","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Prepare for Battle!/xDeviruchi - Prepare for Battle! (Loop).wav"),this.load.audio("bgm:victory:intro","xDeviruchi - 16 bit Fantasy & Adventure (2025)/06 - Victory!.mp3"),this.load.audio("bgm:victory2:intro","xDeviruchi - 16 bit Fantasy & Adventure (2025)/11 - The Mighty Kingdom.mp3"),this.load.audio("bgm:draw:intro","xDeviruchi - 16 bit Fantasy & Adventure (2025)/16 - The Calm Before The Storm.mp3"),this.load.audio("bgm:defeat:intro","xDeviruchi - 16 bit Fantasy & Adventure (2025)/18 - Never Give Up.mp3"),this.load.audio("bgm:defeat2:intro","xDeviruchi - 16 bit Fantasy & Adventure (2025)/10 - Lost Shrine.mp3")}create(){bt.preload(this),dt.preload(this);for(const e of["battle1","battle2","battle3"]){const t=this.sound.add(`bgm:${e}:intro`,{volume:d.volume_bgm});t.on("complete",()=>{d.bgm=this.sound.add(`bgm:${e}`,{loop:!0,volume:d.volume_bgm})}),d.bgm_map[`bgm:${e}:intro`]=t}for(const e of["victory","victory2","draw","defeat","defeat2"]){const t=this.sound.add(`bgm:${e}:intro`,{volume:d.volume_bgm});d.bgm_map[`bgm:${e}:intro`]=t}this.scene.start(mt.key)}};x(Et,"key","PreloadScene");let Ct=Et;const Ft=class Ft extends H.Scene{constructor(){super(Ft.key)}preload(){this.load.audio("select","assets/Common/SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_MenuSelections.mp3"),this.load.audio("confirm","assets/Common/SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Confirm.mp3"),this.load.audio("bgm:login:intro","assets/Common/xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Take some rest and eat some food!/xDeviruchi - Take some rest and eat some food! (Intro).wav"),this.load.audio("bgm:login","assets/Common/xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Take some rest and eat some food!/xDeviruchi - Take some rest and eat some food! (Loop).wav")}async create(){this.add.text(0,d.HEIGHT,Dt,{...d.style.font_style}).setOrigin(0,1);const e=this.sound.add("bgm:login:intro",{volume:d.volume_bgm});e.on("complete",()=>{d.bgm=this.sound.add("bgm:login",{loop:!0,volume:d.volume_bgm})}),d.bgm_map["bgm:login:intro"]=e,d.bgm=d.bgm_map["bgm:login:intro"];const t=d.proxy,r=this.add.text(d.WIDTH/2,d.HEIGHT*1/2,"",d.style.font_style).setOrigin(.5).setPadding(d.style.font_padding),o=this.add.text(d.WIDTH/2,d.HEIGHT*2/3,"",d.style.font_style).setOrigin(.5).setPadding(d.style.font_padding).setTint(d.style.color.green_a);t.access_token||t.code?t.connect().then(()=>{window.history.replaceState({},"","/svsv/"),sessionStorage.setItem("svsv:proxy:access_token",t.access_token),sessionStorage.setItem("svsv:proxy:refresh_token",t.refresh_token),sessionStorage.setItem("svsv:proxy:token_type",t.token_type),sessionStorage.setItem("svsv:proxy:expires_in",t.expires_in.toString()),sessionStorage.setItem("svsv:proxy:scope",t.scope),this.scene.start(Ct.key)}).catch(()=>{this.clearSession(),window.history.replaceState({},"","/"),r.setText(`[에러] 서비스 연결에 실패했습니다.

잠시 후 재시도합니다.
문제가 반복되면 새 탭에서 열어주세요.
`);let s=60;o.setText(`${s}초`),this.time.addEvent({delay:1e3,callback:()=>{s-=1,s==0&&window.open(d.url,"_self"),o.setText(`${s}초`)},repeat:s})}):(r.setText(`[안내] 치지직 API 사용 권한이 필요합니다.

아래 버튼을 눌러 동의해주세요.
`),o.setText("오케이!"),o.setInteractive({cursor:"pointer"}).on("pointerover",()=>{o.setTint(d.style.color.green_f),this.sound.play("select",{volume:d.volume_effect})}).on("pointerout",()=>{o.setTint(d.style.color.green_a)}).on("pointerup",()=>{const s=d.DEBUG?"e6865229-3d57-4a2a-9cbf-98b47198a3c9":"e04f347f-43a8-4efe-a75c-48fc210f174d",a=d.url,u=`https://chzzk.naver.com/account-interlock?clientId=${s}&redirectUri=${a}&state=skills`;sessionStorage.setItem("svsv:proxy:client_id",s),sessionStorage.setItem("svsv:proxy:redirect_uri",a),this.sound.play("confirm",{volume:d.volume_effect}),window.open(u,"_self")}))}clearSession(){sessionStorage.getItem("svsv:proxy:code"),sessionStorage.getItem("svsv:proxy:state"),sessionStorage.getItem("svsv:proxy:access_token"),sessionStorage.getItem("svsv:proxy:refresh_token"),sessionStorage.getItem("svsv:proxy:token_type"),sessionStorage.getItem("svsv:proxy:expires_in"),sessionStorage.getItem("svsv:proxy:scope")}};x(Ft,"key","LoginScene");let xt=Ft;class Qt extends H.GameObjects.Container{constructor(t,r,o,s,a,c){super(t,r,o);x(this,"tag");x(this,"tag_label");x(this,"ontoggle");t.add.existing(this),this.setSize(s,a).setVisible(!1),this.tag=c,this.tag_label=c.text;const u=d.WIDTH/100,f=t.add.graphics().fillStyle(d.style.color.grey_e).fillRoundedRect(0,0,s,a,u);this.add(f),this.tag.setInteractive().on("pointerup",()=>{this.toggle()}).on("pointerover",()=>{this.tag.setOrigin(1,0)}).on("pointerout",()=>{this.visible||this.tag.setOrigin(.5,0)})}toggle(t){var o;const r=t??!this.visible;this.visible!==r&&(this.setVisible(r),this.visible?(this.scene.sound.play("Common:sound:shop",{volume:d.volume_effect}),this.tag.setText(`닫
기`).setColor(d.style.color_code.pink_f)):(this.scene.sound.play("Common:sound:exit",{volume:d.volume_effect}),this.tag.setText(this.tag_label).setColor(d.style.color_code.grey_f)),(o=this.ontoggle)==null||o.call(this,this.visible))}}class be extends Qt{constructor(e,t,r,o,s,a){super(e,t,r,o,s,a);const c=this.addRow(this.height*3/8,"마스터",d.volume_master,()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),d.volume_master-=.1},()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),d.volume_master+=.1}),u=this.addRow(this.height*4/8,"배경음악",d.volume_bgm,()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),d.volume_bgm-=.1},()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),d.volume_bgm+=.1}),f=this.addRow(this.height*5/8,"효과음",d.volume_effect,()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),d.volume_effect-=.1},()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),d.volume_effect+=.1});d.on(K.VOLUME_MASTER,()=>{c.setText((d.volume_master*10).toFixed(0))}),d.on(K.VOLUME_BGM,()=>{u.setText((d.volume_bgm*10).toFixed(0))}),d.on(K.VOLUME_EFFECT,()=>{f.setText((d.volume_effect*10).toFixed(0))})}addRow(e,t,r,o,s){const a=this.width*1/3,c=this.width*2/3,u=c-this.width/10,f=c+this.width/10,p=this.scene.add.text(a,e,t,{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5),h=this.scene.add.text(u,e,"-",{...d.style.font_style,color:d.style.color_code.green_a}).setOrigin(.5).setInteractive().on("pointerup",()=>{o()}).on("pointerover",()=>{h.setColor(d.style.color_code.grey_4)}).on("pointerout",()=>{h.setColor(d.style.color_code.green_a)}),n=this.scene.add.text(f,e,"+",{...d.style.font_style,color:d.style.color_code.green_a}).setOrigin(.5).setInteractive().on("pointerup",()=>{s()}).on("pointerover",()=>{n.setColor(d.style.color_code.grey_4)}).on("pointerout",()=>{n.setColor(d.style.color_code.green_a)}),i=this.scene.add.text(c,e,(r*10).toFixed(0),{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5);return this.add([p,h,n,i]),i}}class Ce extends Qt{constructor(e,t,r,o,s,a){super(e,t,r,o,s,a);const c=this.width*1/4,u=this.width*2/4,f=this.width*3/4,p=o/7,h=s/7;let n=0;this.addText(c,p+n*h,"기획/개발/그림",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addText(u,p+n*h,"실력발휘",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addLogo(f,p+n*h,"credit:logo:github","https://github.com/ShowSkillsSpark"),this.addLogo(f+90,p+n*h,"credit:logo:youtube","https://www.youtube.com/@%EC%8B%A4%EB%A0%A5%EB%B0%9C%ED%9C%98"),this.addLogo(f+240,p+n*h,"credit:logo:toon","https://toon.at/donate/skill"),n+=1,this.addText(c,p+n*h,"배경음악",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addText(u,p+n*h,"xDeviruchi",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addLogo(f,p+n*h,"credit:logo:itch","https://itch.io/profile/xdeviruchi"),this.addLogo(f+90,p+n*h,"credit:logo:youtube","https://www.youtube.com/channel/UC-co0iNy2WkUNHCtQZUHQIg"),n+=1,this.addText(c,p+n*h,"효과음",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addText(u,p+n*h,"SoupTonic",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addLogo(f,p+n*h,"credit:logo:itch","https://itch.io/profile/souptonic"),n+=1,this.addText(c,p+n*h,"폰트",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addText(u,p+n*h,"둥근모꼴+ Fixedsys",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addLogo(f,p+n*h,"credit:logo:link","https://cactus.tistory.com/193")}addText(e,t,r,o){const s=this.scene.add.text(e,t,r,o).setOrigin(.5);return this.add(s),s}addLogo(e,t,r,o){const s=this.scene.add.image(e,t,r).setOrigin(.5),c=d.style.font_style.fontSize/s.height;return s.setScale(c).setInteractive({cursor:"pointer"}).on("pointerup",()=>{window.open(o,"_blank")}),this.add([s]),s}}const It=class It extends H.Scene{constructor(){super(It.key)}preload(){this.load.setPath("assets/Common/Sidebar/"),this.load.image("credit:logo:github","github-mark.svg"),this.load.image("credit:logo:itch","itchio-textless-black.svg"),this.load.image("credit:logo:link","link_32dp.svg"),this.load.image("credit:logo:toon","toonation-symbol.png"),this.load.image("credit:logo:youtube","yt_logo_mono_light.png")}create(){const e=d.WIDTH/20,t=d.HEIGHT/20,r=d.WIDTH*9/10,o=d.HEIGHT*9/10,s=this.add.zone(0,0,d.WIDTH,d.HEIGHT).setOrigin(0).setVisible(!1).setInteractive().on("pointerup",()=>{}),a=this.add.text(d.WIDTH,t,`소
리`,{...d.style.font_style,backgroundColor:d.style.color_code.grey_0}).setOrigin(.5,0),c=new be(this,e,t,r,o,a),u=this.add.text(d.WIDTH,t+a.height,`제
공`,{...d.style.font_style,backgroundColor:d.style.color_code.grey_0}).setOrigin(.5,0),f=new Ce(this,e,t,r,o,u),p=[c,f];c.ontoggle=h=>{if(h)f.toggle(!1),s.visible=!0;else{for(const n of p)n.visible&&(s.visible=!0);s.visible=!1}},f.ontoggle=h=>{if(h)c.toggle(!1),s.visible=!0;else{for(const n of p)n.visible&&(s.visible=!0);s.visible=!1}}}};x(It,"key","SidebarScene");let kt=It;const Ot=class Ot extends H.Scene{constructor(){super(Ot.key)}preload(){this.load.font("DungGeunMo","https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/DungGeunMo.woff"),this.load.setPath("assets/Common/"),this.load.audio("Common:sound:cancel","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Cancel.mp3"),this.load.audio("Common:sound:confirm","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Confirm.mp3"),this.load.audio("Common:sound:select","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_MenuSelections.mp3"),this.load.audio("Common:sound:open_menu","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_OpenMenu.mp3"),this.load.audio("Common:sound:close_menu","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_CloseMenu.mp3"),this.load.audio("Common:sound:exit","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Exit.mp3"),this.load.audio("Common:sound:pause","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Pause.mp3"),this.load.audio("Common:sound:resume","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Resume.mp3"),this.load.audio("Common:sound:shop","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Shop.mp3"),this.load.audio("Common:sound:equip","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Equip.mp3")}create(){this.add.text(0,d.HEIGHT,Dt,{...d.style.font_style}).setOrigin(0,1),this.sound.setVolume(d.volume_master),d.on(K.VOLUME_MASTER,e=>{this.sound.setVolume(e)}),this.scene.launch(kt.key),this.scene.start(xt.key)}};x(Ot,"key","BootScene");let Ut=Ot;const xe={type:H.AUTO,parent:"game-container",width:d.WIDTH,height:d.HEIGHT,transparent:!0,pixelArt:!0,roundPixels:!1,antialias:!1,scale:{mode:H.Scale.FIT,autoCenter:H.Scale.CENTER_BOTH},fullscreenTarget:"game-container",preserveDrawingBuffer:!0,scene:[Ut,xt,Ct,mt,ft,dt,kt]};document.addEventListener("DOMContentLoaded",()=>{new H.Game(xe)});
