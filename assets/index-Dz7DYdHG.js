var Qt=Object.defineProperty;var Ht=m=>{throw TypeError(m)};var te=(m,t,s)=>t in m?Qt(m,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):m[t]=s;var yt=(m,t,s)=>te(m,typeof t!="symbol"?t+"":t,s),jt=(m,t,s)=>t.has(m)||Ht("Cannot "+s);var A=(m,t,s)=>(jt(m,t,"read from private field"),s?s.call(m):t.get(m)),U=(m,t,s)=>t.has(m)?Ht("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(m):t.set(m,s),P=(m,t,s,r)=>(jt(m,t,"write to private field"),r?r.call(m,s):t.set(m,s),s);import{r as ee}from"./phaser-BA8NYTic.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}})();var z=ee(),I={},_t={};/*! For license information please see index.js.LICENSE.txt */var se={218:m=>{var t=1e3,s=60*t,r=60*s,e=24*r;function n(a,c,u){if(!(a<c))return a<1.5*c?Math.floor(a/c)+" "+u:Math.ceil(a/c)+" "+u+"s"}m.exports=function(a,c){c=c||{};var u,f=typeof a;if(f==="string"&&a.length>0)return function(p){if(!((p=String(p)).length>100)){var h=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(h){var o=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*e;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*s;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(a);if(f==="number"&&isNaN(a)===!1)return c.long?n(u=a,e,"day")||n(u,r,"hour")||n(u,s,"minute")||n(u,t,"second")||u+" ms":function(p){return p>=e?Math.round(p/e)+"d":p>=r?Math.round(p/r)+"h":p>=s?Math.round(p/s)+"m":p>=t?Math.round(p/t)+"s":p+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},736:(m,t,s)=>{m.exports=function(r){function e(c){let u,f,p,h=null;function o(...i){if(!o.enabled)return;const l=o,g=Number(new Date),y=g-(u||g);l.diff=y,l.prev=u,l.curr=g,u=g,i[0]=e.coerce(i[0]),typeof i[0]!="string"&&i.unshift("%O");let _=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(v,C)=>{if(v==="%%")return"%";_++;const b=e.formatters[C];if(typeof b=="function"){const T=i[_];v=b.call(l,T),i.splice(_,1),_--}return v}),e.formatArgs.call(l,i),(l.log||e.log).apply(l,i)}return o.namespace=c,o.useColors=e.useColors(),o.color=e.selectColor(c),o.extend=n,o.destroy=e.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(f!==e.namespaces&&(f=e.namespaces,p=e.enabled(c)),p),set:i=>{h=i}}),typeof e.init=="function"&&e.init(o),o}function n(c,u){const f=e(this.namespace+(u===void 0?":":u)+c);return f.log=this.log,f}function a(c,u){let f=0,p=0,h=-1,o=0;for(;f<c.length;)if(p<u.length&&(u[p]===c[f]||u[p]==="*"))u[p]==="*"?(h=p,o=f,p++):(f++,p++);else{if(h===-1)return!1;p=h+1,o++,f=o}for(;p<u.length&&u[p]==="*";)p++;return p===u.length}return e.debug=e,e.default=e,e.coerce=function(c){return c instanceof Error?c.stack||c.message:c},e.disable=function(){const c=[...e.names,...e.skips.map(u=>"-"+u)].join(",");return e.enable(""),c},e.enable=function(c){e.save(c),e.namespaces=c,e.names=[],e.skips=[];const u=(typeof c=="string"?c:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const f of u)f[0]==="-"?e.skips.push(f.slice(1)):e.names.push(f)},e.enabled=function(c){for(const u of e.skips)if(a(c,u))return!1;for(const u of e.names)if(a(c,u))return!0;return!1},e.humanize=s(6585),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(r).forEach(c=>{e[c]=r[c]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(c){let u=0;for(let f=0;f<c.length;f++)u=(u<<5)-u+c.charCodeAt(f),u|=0;return e.colors[Math.abs(u)%e.colors.length]},e.enable(e.load()),e}},852:(m,t,s)=>{function r(){var e;try{e=t.storage.debug}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=_t.DEBUG),e}(t=m.exports=s(1175)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var a="color: "+this.color;e.splice(1,0,a,"color: inherit");var c=0,u=0;e[0].replace(/%[a-zA-Z%]/g,function(f){f!=="%%"&&(c++,f==="%c"&&(u=c))}),e.splice(u,0,a)}},t.save=function(e){try{e==null?t.storage.removeItem("debug"):t.storage.debug=e}catch{}},t.load=r,t.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}},t.enable(r())},969:m=>{function t(){}m.exports=function(s,r,e){var n=!1;return e=e||t,a.count=s,s===0?r():a;function a(c,u){if(a.count<=0)throw new Error("after called too many times");--a.count,c?(n=!0,r(c),r=e):a.count!==0||n||r(null,u)}}},1175:(m,t,s)=>{function r(n){var a;function c(){if(c.enabled){var u=c,f=+new Date,p=f-(a||f);u.diff=p,u.prev=a,u.curr=f,a=f;for(var h=new Array(arguments.length),o=0;o<h.length;o++)h[o]=arguments[o];h[0]=t.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");var i=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,function(l,g){if(l==="%%")return l;i++;var y=t.formatters[g];if(typeof y=="function"){var _=h[i];l=y.call(u,_),h.splice(i,1),i--}return l}),t.formatArgs.call(u,h),(c.log||t.log||console.log.bind(console)).apply(u,h)}}return c.namespace=n,c.enabled=t.enabled(n),c.useColors=t.useColors(),c.color=function(u){var f,p=0;for(f in u)p=(p<<5)-p+u.charCodeAt(f),p|=0;return t.colors[Math.abs(p)%t.colors.length]}(n),c.destroy=e,typeof t.init=="function"&&t.init(c),t.instances.push(c),c}function e(){var n=t.instances.indexOf(this);return n!==-1&&(t.instances.splice(n,1),!0)}(t=m.exports=r.debug=r.default=r).coerce=function(n){return n instanceof Error?n.stack||n.message:n},t.disable=function(){t.enable("")},t.enable=function(n){var a;t.save(n),t.names=[],t.skips=[];var c=(typeof n=="string"?n:"").split(/[\s,]+/),u=c.length;for(a=0;a<u;a++)c[a]&&((n=c[a].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+n.substr(1)+"$")):t.names.push(new RegExp("^"+n+"$")));for(a=0;a<t.instances.length;a++){var f=t.instances[a];f.enabled=t.enabled(f.namespace)}},t.enabled=function(n){if(n[n.length-1]==="*")return!0;var a,c;for(a=0,c=t.skips.length;a<c;a++)if(t.skips[a].test(n))return!1;for(a=0,c=t.names.length;a<c;a++)if(t.names[a].test(n))return!0;return!1},t.humanize=s(218),t.instances=[],t.names=[],t.skips=[],t.formatters={}},2121:m=>{var t,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={},e=0,n=0;function a(u){var f="";do f=s[u%64]+f,u=Math.floor(u/64);while(u>0);return f}function c(){var u=a(+new Date);return u!==t?(e=0,t=u):u+"."+a(e++)}for(;n<64;n++)r[s[n]]=n;c.encode=a,c.decode=function(u){var f=0;for(n=0;n<u.length;n++)f=64*f+r[u.charAt(n)];return f},m.exports=c},2225:(m,t,s)=>{var r=s(4634),e=s(8247),n=Object.prototype.toString,a=typeof I.Blob=="function"||n.call(I.Blob)==="[object BlobConstructor]",c=typeof I.File=="function"||n.call(I.File)==="[object FileConstructor]";function u(p,h){if(!p)return p;if(e(p)){var o={_placeholder:!0,num:h.length};return h.push(p),o}if(r(p)){for(var i=new Array(p.length),l=0;l<p.length;l++)i[l]=u(p[l],h);return i}if(typeof p=="object"&&!(p instanceof Date)){for(var g in i={},p)i[g]=u(p[g],h);return i}return p}function f(p,h){if(!p)return p;if(p&&p._placeholder)return h[p.num];if(r(p))for(var o=0;o<p.length;o++)p[o]=f(p[o],h);else if(typeof p=="object")for(var i in p)p[i]=f(p[i],h);return p}t.deconstructPacket=function(p){var h=[],o=p.data,i=p;return i.data=u(o,h),i.attachments=h.length,{packet:i,buffers:h}},t.reconstructPacket=function(p,h){return p.data=f(p.data,h),p.attachments=void 0,p},t.removeBlobs=function(p,h){var o=0,i=p;(function l(g,y,_){if(!g)return g;if(a&&g instanceof Blob||c&&g instanceof File){o++;var v=new FileReader;v.onload=function(){_?_[y]=this.result:i=this.result,--o||h(i)},v.readAsArrayBuffer(g)}else if(r(g))for(var C=0;C<g.length;C++)l(g[C],C,g);else if(typeof g=="object"&&!e(g))for(var b in g)l(g[b],b,g)})(i),o||h(i)}},2252:(m,t,s)=>{var r=s(5911),e=s(2370);m.exports=f;var n,a=/\n/g,c=/\\n/g;function u(){}function f(p){r.call(this,p),this.query=this.query||{},n||(I.___eio||(I.___eio=[]),n=I.___eio),this.index=n.length;var h=this;n.push(function(o){h.onData(o)}),this.query.j=this.index,I.document&&I.addEventListener&&I.addEventListener("beforeunload",function(){h.script&&(h.script.onerror=u)},!1)}e(f,r),f.prototype.supportsBinary=!1,f.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},f.prototype.doPoll=function(){var p=this,h=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),h.async=!0,h.src=this.uri(),h.onerror=function(i){p.onError("jsonp poll error",i)};var o=document.getElementsByTagName("script")[0];o?o.parentNode.insertBefore(h,o):(document.head||document.body).appendChild(h),this.script=h,typeof navigator<"u"&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var i=document.createElement("iframe");document.body.appendChild(i),document.body.removeChild(i)},100)},f.prototype.doWrite=function(p,h){var o=this;if(!this.form){var i,l=document.createElement("form"),g=document.createElement("textarea"),y=this.iframeId="eio_iframe_"+this.index;l.className="socketio",l.style.position="absolute",l.style.top="-1000px",l.style.left="-1000px",l.target=y,l.method="POST",l.setAttribute("accept-charset","utf-8"),g.name="d",l.appendChild(g),document.body.appendChild(l),this.form=l,this.area=g}function _(){v(),h()}function v(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(b){o.onError("jsonp polling iframe removal error",b)}try{var C='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(C)}catch{(i=document.createElement("iframe")).name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}this.form.action=this.uri(),v(),p=p.replace(c,`\\
`),this.area.value=p.replace(a,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){o.iframe.readyState==="complete"&&_()}:this.iframe.onload=_}},2370:m=>{m.exports=function(t,s){var r=function(){};r.prototype=s.prototype,t.prototype=new r,t.prototype.constructor=t}},2505:m=>{m.exports=Object.keys||function(t){var s=[],r=Object.prototype.hasOwnProperty;for(var e in t)r.call(t,e)&&s.push(e);return s}},2672:(m,t,s)=>{var r=s(3401),e=s(5971);function n(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.forceNode=a.forceNode,this.extraHeaders=a.extraHeaders,this.localAddress=a.localAddress}m.exports=n,e(n.prototype),n.prototype.onError=function(a,c){var u=new Error(a);return u.type="TransportError",u.description=c,this.emit("error",u),this},n.prototype.open=function(){return this.readyState!=="closed"&&this.readyState!==""||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this},n.prototype.send=function(a){if(this.readyState!=="open")throw new Error("Transport not open");this.write(a)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(a){var c=r.decodePacket(a,this.socket.binaryType);this.onPacket(c)},n.prototype.onPacket=function(a){this.emit("packet",a)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},2902:m=>{var t=1e3,s=60*t,r=60*s,e=24*r;function n(a,c,u){if(!(a<c))return a<1.5*c?Math.floor(a/c)+" "+u:Math.ceil(a/c)+" "+u+"s"}m.exports=function(a,c){c=c||{};var u,f=typeof a;if(f==="string"&&a.length>0)return function(p){if(!((p=String(p)).length>100)){var h=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(h){var o=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*e;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*s;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(a);if(f==="number"&&isNaN(a)===!1)return c.long?n(u=a,e,"day")||n(u,r,"hour")||n(u,s,"minute")||n(u,t,"second")||u+" ms":function(p){return p>=e?Math.round(p/e)+"d":p>=r?Math.round(p/r)+"h":p>=s?Math.round(p/s)+"m":p>=t?Math.round(p/t)+"s":p+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},3051:(m,t,s)=>{var r=s(8383);m.exports=function(e){var n=e.xdomain,a=e.xscheme,c=e.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!n||r))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!a&&c)return new XDomainRequest}catch{}if(!n)try{return new I[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}},3059:m=>{function t(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}m.exports=t,t.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var r=Math.random(),e=Math.floor(r*this.jitter*s);s=1&Math.floor(10*r)?s+e:s-e}return 0|Math.min(s,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(s){this.ms=s},t.prototype.setMax=function(s){this.max=s},t.prototype.setJitter=function(s){this.jitter=s}},3097:m=>{var t=1e3,s=60*t,r=60*s,e=24*r;function n(a,c,u){if(!(a<c))return a<1.5*c?Math.floor(a/c)+" "+u:Math.ceil(a/c)+" "+u+"s"}m.exports=function(a,c){c=c||{};var u,f=typeof a;if(f==="string"&&a.length>0)return function(p){if(!((p=String(p)).length>100)){var h=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(h){var o=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*e;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*s;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(a);if(f==="number"&&isNaN(a)===!1)return c.long?n(u=a,e,"day")||n(u,r,"hour")||n(u,s,"minute")||n(u,t,"second")||u+" ms":function(p){return p>=e?Math.round(p/e)+"d":p>=r?Math.round(p/r)+"h":p>=s?Math.round(p/s)+"m":p>=t?Math.round(p/t)+"s":p+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},3118:m=>{var t=t!==void 0?t:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"&&MozBlobBuilder,s=function(){try{return new Blob(["hi"]).size===2}catch{return!1}}(),r=s&&function(){try{return new Blob([new Uint8Array([1,2])]).size===2}catch{return!1}}(),e=t&&t.prototype.append&&t.prototype.getBlob;function n(u){return u.map(function(f){if(f.buffer instanceof ArrayBuffer){var p=f.buffer;if(f.byteLength!==p.byteLength){var h=new Uint8Array(f.byteLength);h.set(new Uint8Array(p,f.byteOffset,f.byteLength)),p=h.buffer}return p}return f})}function a(u,f){f=f||{};var p=new t;return n(u).forEach(function(h){p.append(h)}),f.type?p.getBlob(f.type):p.getBlob()}function c(u,f){return new Blob(n(u),f||{})}typeof Blob<"u"&&(a.prototype=Blob.prototype,c.prototype=Blob.prototype),m.exports=s?r?Blob:c:e?a:void 0},3344:m=>{m.exports=function(t,s,r){var e=t.byteLength;if(s=s||0,r=r||e,t.slice)return t.slice(s,r);if(s<0&&(s+=e),r<0&&(r+=e),r>e&&(r=e),s>=e||s>=r||e===0)return new ArrayBuffer(0);for(var n=new Uint8Array(t),a=new Uint8Array(r-s),c=s,u=0;c<r;c++,u++)a[u]=n[c];return a.buffer}},3357:(m,t,s)=>{m.exports=s(7292),m.exports.parser=s(3401)},3371:(m,t)=>{(function(){for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),e=0;e<64;e++)r[s.charCodeAt(e)]=e;t.encode=function(n){var a,c=new Uint8Array(n),u=c.length,f="";for(a=0;a<u;a+=3)f+=s[c[a]>>2],f+=s[(3&c[a])<<4|c[a+1]>>4],f+=s[(15&c[a+1])<<2|c[a+2]>>6],f+=s[63&c[a+2]];return u%3==2?f=f.substring(0,f.length-1)+"=":u%3==1&&(f=f.substring(0,f.length-2)+"=="),f},t.decode=function(n){var a,c,u,f,p,h=.75*n.length,o=n.length,i=0;n[n.length-1]==="="&&(h--,n[n.length-2]==="="&&h--);var l=new ArrayBuffer(h),g=new Uint8Array(l);for(a=0;a<o;a+=4)c=r[n.charCodeAt(a)],u=r[n.charCodeAt(a+1)],f=r[n.charCodeAt(a+2)],p=r[n.charCodeAt(a+3)],g[i++]=c<<2|u>>4,g[i++]=(15&u)<<4|f>>2,g[i++]=(3&f)<<6|63&p;return l}})()},3401:(m,t,s)=>{var r,e=s(2505),n=s(8839),a=s(3344),c=s(969),u=s(8758);typeof ArrayBuffer<"u"&&(r=s(3371));var f=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),p=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),h=f||p;t.protocol=3;var o=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},i=e(o),l={type:"error",data:"parser error"},g=s(3118);function y(_,v,C){for(var b=new Array(_.length),T=c(_.length,C),S=function(w,E,F){v(E,function(O,M){b[w]=M,F(O,b)})},x=0;x<_.length;x++)S(x,_[x],T)}t.encodePacket=function(_,v,C,b){typeof v=="function"&&(b=v,v=!1),typeof C=="function"&&(b=C,C=null);var T=_.data===void 0?void 0:_.data.buffer||_.data;if(typeof ArrayBuffer<"u"&&T instanceof ArrayBuffer)return function(x,w,E){if(!w)return t.encodeBase64Packet(x,E);var F=x.data,O=new Uint8Array(F),M=new Uint8Array(1+F.byteLength);M[0]=o[x.type];for(var D=0;D<O.length;D++)M[D+1]=O[D];return E(M.buffer)}(_,v,b);if(g!==void 0&&T instanceof g)return function(x,w,E){if(!w)return t.encodeBase64Packet(x,E);if(h)return function(O,M,D){if(!M)return t.encodeBase64Packet(O,D);var L=new FileReader;return L.onload=function(){t.encodePacket({type:O.type,data:L.result},M,!0,D)},L.readAsArrayBuffer(O.data)}(x,w,E);var F=new Uint8Array(1);return F[0]=o[x.type],E(new g([F.buffer,x.data]))}(_,v,b);if(T&&T.base64)return function(x,w){return w("b"+t.packets[x.type]+x.data.data)}(_,b);var S=o[_.type];return _.data!==void 0&&(S+=C?u.encode(String(_.data),{strict:!1}):String(_.data)),b(""+S)},t.encodeBase64Packet=function(_,v){var C,b="b"+t.packets[_.type];if(g!==void 0&&_.data instanceof g){var T=new FileReader;return T.onload=function(){var E=T.result.split(",")[1];v(b+E)},T.readAsDataURL(_.data)}try{C=String.fromCharCode.apply(null,new Uint8Array(_.data))}catch{for(var S=new Uint8Array(_.data),x=new Array(S.length),w=0;w<S.length;w++)x[w]=S[w];C=String.fromCharCode.apply(null,x)}return b+=btoa(C),v(b)},t.decodePacket=function(_,v,C){if(_===void 0)return l;if(typeof _=="string"){if(_.charAt(0)==="b")return t.decodeBase64Packet(_.substr(1),v);if(C&&(_=function(S){try{S=u.decode(S,{strict:!1})}catch{return!1}return S}(_))===!1)return l;var b=_.charAt(0);return Number(b)==b&&i[b]?_.length>1?{type:i[b],data:_.substring(1)}:{type:i[b]}:l}b=new Uint8Array(_)[0];var T=a(_,1);return g&&v==="blob"&&(T=new g([T])),{type:i[b],data:T}},t.decodeBase64Packet=function(_,v){var C=i[_.charAt(0)];if(!r)return{type:C,data:{base64:!0,data:_.substr(1)}};var b=r.decode(_.substr(1));return v==="blob"&&g&&(b=new g([b])),{type:C,data:b}},t.encodePayload=function(_,v,C){typeof v=="function"&&(C=v,v=null);var b=n(_);return v&&b?g&&!h?t.encodePayloadAsBlob(_,C):t.encodePayloadAsArrayBuffer(_,C):_.length?void y(_,function(T,S){t.encodePacket(T,!!b&&v,!1,function(x){S(null,function(w){return w.length+":"+w}(x))})},function(T,S){return C(S.join(""))}):C("0:")},t.decodePayload=function(_,v,C){if(typeof _!="string")return t.decodePayloadAsBinary(_,v,C);var b;if(typeof v=="function"&&(C=v,v=null),_==="")return C(l,0,1);for(var T,S,x="",w=0,E=_.length;w<E;w++){var F=_.charAt(w);if(F===":"){if(x===""||x!=(T=Number(x))||x!=(S=_.substr(w+1,T)).length)return C(l,0,1);if(S.length){if(b=t.decodePacket(S,v,!1),l.type===b.type&&l.data===b.data)return C(l,0,1);if(C(b,w+T,E)===!1)return}w+=T,x=""}else x+=F}return x!==""?C(l,0,1):void 0},t.encodePayloadAsArrayBuffer=function(_,v){if(!_.length)return v(new ArrayBuffer(0));y(_,function(C,b){t.encodePacket(C,!0,!0,function(T){return b(null,T)})},function(C,b){var T=b.reduce(function(w,E){var F;return w+(F=typeof E=="string"?E.length:E.byteLength).toString().length+F+2},0),S=new Uint8Array(T),x=0;return b.forEach(function(w){var E=typeof w=="string",F=w;if(E){for(var O=new Uint8Array(w.length),M=0;M<w.length;M++)O[M]=w.charCodeAt(M);F=O.buffer}S[x++]=E?0:1;var D=F.byteLength.toString();for(M=0;M<D.length;M++)S[x++]=parseInt(D[M]);for(S[x++]=255,O=new Uint8Array(F),M=0;M<O.length;M++)S[x++]=O[M]}),v(S.buffer)})},t.encodePayloadAsBlob=function(_,v){y(_,function(C,b){t.encodePacket(C,!0,!0,function(T){var S=new Uint8Array(1);if(S[0]=1,typeof T=="string"){for(var x=new Uint8Array(T.length),w=0;w<T.length;w++)x[w]=T.charCodeAt(w);T=x.buffer,S[0]=0}var E=(T instanceof ArrayBuffer?T.byteLength:T.size).toString(),F=new Uint8Array(E.length+1);for(w=0;w<E.length;w++)F[w]=parseInt(E[w]);if(F[E.length]=255,g){var O=new g([S.buffer,F.buffer,T]);b(null,O)}})},function(C,b){return v(new g(b))})},t.decodePayloadAsBinary=function(_,v,C){typeof v=="function"&&(C=v,v=null);for(var b=_,T=[];b.byteLength>0;){for(var S=new Uint8Array(b),x=S[0]===0,w="",E=1;S[E]!==255;E++){if(w.length>310)return C(l,0,1);w+=S[E]}b=a(b,2+w.length),w=parseInt(w);var F=a(b,0,w);if(x)try{F=String.fromCharCode.apply(null,new Uint8Array(F))}catch{var O=new Uint8Array(F);for(F="",E=0;E<O.length;E++)F+=String.fromCharCode(O[E])}T.push(F),b=a(b,w)}var M=T.length;T.forEach(function(D,L){C(t.decodePacket(D,v,!0),L,M)})}},4258:m=>{var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];m.exports=function(r){var e=r,n=r.indexOf("["),a=r.indexOf("]");n!=-1&&a!=-1&&(r=r.substring(0,n)+r.substring(n,a).replace(/:/g,";")+r.substring(a,r.length));for(var c=t.exec(r||""),u={},f=14;f--;)u[s[f]]=c[f]||"";return n!=-1&&a!=-1&&(u.source=e,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u}},4634:m=>{var t={}.toString;m.exports=Array.isArray||function(s){return t.call(s)=="[object Array]"}},4745:m=>{m.exports=function(t,s,r){return t.on(s,r),{destroy:function(){t.removeListener(s,r)}}}},5074:(m,t,s)=>{var r=s(852)("socket.io-parser"),e=s(5971),n=s(8839),a=s(2225),c=s(4634),u=s(8247);function f(){}function p(l){var g=""+l.type;return t.BINARY_EVENT!==l.type&&t.BINARY_ACK!==l.type||(g+=l.attachments+"-"),l.nsp&&l.nsp!=="/"&&(g+=l.nsp+","),l.id!=null&&(g+=l.id),l.data!=null&&(g+=JSON.stringify(l.data)),r("encoded %j as %s",l,g),g}function h(){this.reconstructor=null}function o(l){this.reconPack=l,this.buffers=[]}function i(l){return{type:t.ERROR,data:"parser error: "+l}}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=f,t.Decoder=h,f.prototype.encode=function(l,g){l.type!==t.EVENT&&l.type!==t.ACK||!n(l.data)||(l.type=l.type===t.EVENT?t.BINARY_EVENT:t.BINARY_ACK),r("encoding packet %j",l),t.BINARY_EVENT===l.type||t.BINARY_ACK===l.type?function(y,_){a.removeBlobs(y,function(v){var C=a.deconstructPacket(v),b=p(C.packet),T=C.buffers;T.unshift(b),_(T)})}(l,g):g([p(l)])},e(h.prototype),h.prototype.add=function(l){var g;if(typeof l=="string")g=function(y){var _=0,v={type:Number(y.charAt(0))};if(t.types[v.type]==null)return i("unknown packet type "+v.type);if(t.BINARY_EVENT===v.type||t.BINARY_ACK===v.type){for(var C="";y.charAt(++_)!=="-"&&(C+=y.charAt(_),_!=y.length););if(C!=Number(C)||y.charAt(_)!=="-")throw new Error("Illegal attachments");v.attachments=Number(C)}if(y.charAt(_+1)==="/")for(v.nsp="";++_&&(T=y.charAt(_))!==","&&(v.nsp+=T,_!==y.length););else v.nsp="/";var b=y.charAt(_+1);if(b!==""&&Number(b)==b){for(v.id="";++_;){var T;if((T=y.charAt(_))==null||Number(T)!=T){--_;break}if(v.id+=y.charAt(_),_===y.length)break}v.id=Number(v.id)}if(y.charAt(++_)){var S=function(x){try{return JSON.parse(x)}catch{return!1}}(y.substr(_));if(S===!1||v.type!==t.ERROR&&!c(S))return i("invalid payload");v.data=S}return r("decoded %s as %j",y,v),v}(l),t.BINARY_EVENT===g.type||t.BINARY_ACK===g.type?(this.reconstructor=new o(g),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",g)):this.emit("decoded",g);else{if(!u(l)&&!l.base64)throw new Error("Unknown type: "+l);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(g=this.reconstructor.takeBinaryData(l))&&(this.reconstructor=null,this.emit("decoded",g))}},h.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},o.prototype.takeBinaryData=function(l){if(this.buffers.push(l),this.buffers.length===this.reconPack.attachments){var g=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),g}return null},o.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},5660:()=>{},5911:(m,t,s)=>{var r=s(2672),e=s(9140),n=s(3401),a=s(2370),c=s(2121),u=s(6617)("engine.io-client:polling");m.exports=p;var f=new(s(3051))({xdomain:!1}).responseType!=null;function p(h){var o=h&&h.forceBase64;f&&!o||(this.supportsBinary=!1),r.call(this,h)}a(p,r),p.prototype.name="polling",p.prototype.doOpen=function(){this.poll()},p.prototype.pause=function(h){var o=this;function i(){u("paused"),o.readyState="paused",h()}if(this.readyState="pausing",this.polling||!this.writable){var l=0;this.polling&&(u("we are currently polling - waiting to pause"),l++,this.once("pollComplete",function(){u("pre-pause polling complete"),--l||i()})),this.writable||(u("we are currently writing - waiting to pause"),l++,this.once("drain",function(){u("pre-pause writing complete"),--l||i()}))}else i()},p.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},p.prototype.onData=function(h){var o=this;u("polling got data %s",h),n.decodePayload(h,this.socket.binaryType,function(i,l,g){if(o.readyState==="opening"&&o.onOpen(),i.type==="close")return o.onClose(),!1;o.onPacket(i)}),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},p.prototype.doClose=function(){var h=this;function o(){u("writing close packet"),h.write([{type:"close"}])}this.readyState==="open"?(u("transport open - closing"),o()):(u("transport not open - deferring close"),this.once("open",o))},p.prototype.write=function(h){var o=this;this.writable=!1;var i=function(){o.writable=!0,o.emit("drain")};n.encodePayload(h,this.supportsBinary,function(l){o.doWrite(l,i)})},p.prototype.uri=function(){var h=this.query||{},o=this.secure?"https":"http",i="";return this.timestampRequests!==!1&&(h[this.timestampParam]=c()),this.supportsBinary||h.sid||(h.b64=1),h=e.encode(h),this.port&&(o==="https"&&Number(this.port)!==443||o==="http"&&Number(this.port)!==80)&&(i=":"+this.port),h.length&&(h="?"+h),o+"://"+(this.hostname.indexOf(":")!==-1?"["+this.hostname+"]":this.hostname)+i+this.path+h}},5971:m=>{function t(s){if(s)return function(r){for(var e in t.prototype)r[e]=t.prototype[e];return r}(s)}m.exports=t,t.prototype.on=t.prototype.addEventListener=function(s,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(r),this},t.prototype.once=function(s,r){function e(){this.off(s,e),r.apply(this,arguments)}return e.fn=r,this.on(s,e),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(s,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e,n=this._callbacks["$"+s];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var a=0;a<n.length;a++)if((e=n[a])===r||e.fn===r){n.splice(a,1);break}return this},t.prototype.emit=function(s){this._callbacks=this._callbacks||{};var r=[].slice.call(arguments,1),e=this._callbacks["$"+s];if(e)for(var n=0,a=(e=e.slice(0)).length;n<a;++n)e[n].apply(this,r);return this},t.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]},t.prototype.hasListeners=function(s){return!!this.listeners(s).length}},6585:m=>{var t=1e3,s=60*t,r=60*s,e=24*r,n=7*e;function a(c,u,f,p){var h=u>=1.5*f;return Math.round(c/f)+" "+p+(h?"s":"")}m.exports=function(c,u){u=u||{};var f,p,h=typeof c;if(h==="string"&&c.length>0)return function(o){if(!((o=String(o)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(o);if(i){var l=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*l;case"weeks":case"week":case"w":return l*n;case"days":case"day":case"d":return l*e;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*s;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}(c);if(h==="number"&&isFinite(c))return u.long?(f=c,(p=Math.abs(f))>=e?a(f,p,e,"day"):p>=r?a(f,p,r,"hour"):p>=s?a(f,p,s,"minute"):p>=t?a(f,p,t,"second"):f+" ms"):function(o){var i=Math.abs(o);return i>=e?Math.round(o/e)+"d":i>=r?Math.round(o/r)+"h":i>=s?Math.round(o/s)+"m":i>=t?Math.round(o/t)+"s":o+"ms"}(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))}},6617:(m,t,s)=>{function r(){var e;try{e=t.storage.debug}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=_t.DEBUG),e}(t=m.exports=s(9110)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var a="color: "+this.color;e.splice(1,0,a,"color: inherit");var c=0,u=0;e[0].replace(/%[a-zA-Z%]/g,function(f){f!=="%%"&&(c++,f==="%c"&&(u=c))}),e.splice(u,0,a)}},t.save=function(e){try{e==null?t.storage.removeItem("debug"):t.storage.debug=e}catch{}},t.load=r,t.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}},t.enable(r())},6855:(m,t,s)=>{var r,e=s(2672),n=s(3401),a=s(9140),c=s(2370),u=s(2121),f=s(6617)("engine.io-client:websocket"),p=I.WebSocket||I.MozWebSocket;if(typeof window>"u")try{r=s(5660)}catch{}var h=p;function o(i){i&&i.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=i.perMessageDeflate,this.usingBrowserWebSocket=p&&!i.forceNode,this.protocols=i.protocols,this.usingBrowserWebSocket||(h=r),e.call(this,i)}h||typeof window<"u"||(h=r),m.exports=o,c(o,e),o.prototype.name="websocket",o.prototype.supportsBinary=!0,o.prototype.doOpen=function(){if(this.check()){var i=this.uri(),l=this.protocols,g={agent:this.agent,perMessageDeflate:this.perMessageDeflate};g.pfx=this.pfx,g.key=this.key,g.passphrase=this.passphrase,g.cert=this.cert,g.ca=this.ca,g.ciphers=this.ciphers,g.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(g.headers=this.extraHeaders),this.localAddress&&(g.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?l?new h(i,l):new h(i):new h(i,l,g)}catch(y){return this.emit("error",y)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},o.prototype.addEventListeners=function(){var i=this;this.ws.onopen=function(){i.onOpen()},this.ws.onclose=function(){i.onClose()},this.ws.onmessage=function(l){i.onData(l.data)},this.ws.onerror=function(l){i.onError("websocket error",l)}},o.prototype.write=function(i){var l=this;this.writable=!1;for(var g=i.length,y=0,_=g;y<_;y++)(function(v){n.encodePacket(v,l.supportsBinary,function(C){if(!l.usingBrowserWebSocket){var b={};v.options&&(b.compress=v.options.compress),l.perMessageDeflate&&(typeof C=="string"?I.Buffer.byteLength(C):C.length)<l.perMessageDeflate.threshold&&(b.compress=!1)}try{l.usingBrowserWebSocket?l.ws.send(C):l.ws.send(C,b)}catch{f("websocket closed before onclose event")}--g||(l.emit("flush"),setTimeout(function(){l.writable=!0,l.emit("drain")},0))})})(i[y])},o.prototype.onClose=function(){e.prototype.onClose.call(this)},o.prototype.doClose=function(){this.ws!==void 0&&this.ws.close()},o.prototype.uri=function(){var i=this.query||{},l=this.secure?"wss":"ws",g="";return this.port&&(l==="wss"&&Number(this.port)!==443||l==="ws"&&Number(this.port)!==80)&&(g=":"+this.port),this.timestampRequests&&(i[this.timestampParam]=u()),this.supportsBinary||(i.b64=1),(i=a.encode(i)).length&&(i="?"+i),l+"://"+(this.hostname.indexOf(":")!==-1?"["+this.hostname+"]":this.hostname)+g+this.path+i},o.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===o.prototype.name)}},6938:m=>{var t=[].indexOf;m.exports=function(s,r){if(t)return s.indexOf(r);for(var e=0;e<s.length;++e)if(s[e]===r)return e;return-1}},7007:m=>{var t,s=typeof Reflect=="object"?Reflect:null,r=s&&typeof s.apply=="function"?s.apply:function(y,_,v){return Function.prototype.apply.call(y,_,v)};t=s&&typeof s.ownKeys=="function"?s.ownKeys:Object.getOwnPropertySymbols?function(y){return Object.getOwnPropertyNames(y).concat(Object.getOwnPropertySymbols(y))}:function(y){return Object.getOwnPropertyNames(y)};var e=Number.isNaN||function(y){return y!=y};function n(){n.init.call(this)}m.exports=n,m.exports.once=function(y,_){return new Promise(function(v,C){function b(S){y.removeListener(_,T),C(S)}function T(){typeof y.removeListener=="function"&&y.removeListener("error",b),v([].slice.call(arguments))}g(y,_,T,{once:!0}),_!=="error"&&function(S,x){typeof S.on=="function"&&g(S,"error",x,{once:!0})}(y,b)})},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var a=10;function c(y){if(typeof y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof y)}function u(y){return y._maxListeners===void 0?n.defaultMaxListeners:y._maxListeners}function f(y,_,v,C){var b,T,S,x;if(c(v),(T=y._events)===void 0?(T=y._events=Object.create(null),y._eventsCount=0):(T.newListener!==void 0&&(y.emit("newListener",_,v.listener?v.listener:v),T=y._events),S=T[_]),S===void 0)S=T[_]=v,++y._eventsCount;else if(typeof S=="function"?S=T[_]=C?[v,S]:[S,v]:C?S.unshift(v):S.push(v),(b=u(y))>0&&S.length>b&&!S.warned){S.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+S.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=y,w.type=_,w.count=S.length,x=w,console&&console.warn&&console.warn(x)}return y}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(y,_,v){var C={fired:!1,wrapFn:void 0,target:y,type:_,listener:v},b=p.bind(C);return b.listener=v,C.wrapFn=b,b}function o(y,_,v){var C=y._events;if(C===void 0)return[];var b=C[_];return b===void 0?[]:typeof b=="function"?v?[b.listener||b]:[b]:v?function(T){for(var S=new Array(T.length),x=0;x<S.length;++x)S[x]=T[x].listener||T[x];return S}(b):l(b,b.length)}function i(y){var _=this._events;if(_!==void 0){var v=_[y];if(typeof v=="function")return 1;if(v!==void 0)return v.length}return 0}function l(y,_){for(var v=new Array(_),C=0;C<_;++C)v[C]=y[C];return v}function g(y,_,v,C){if(typeof y.on=="function")C.once?y.once(_,v):y.on(_,v);else{if(typeof y.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof y);y.addEventListener(_,function b(T){C.once&&y.removeEventListener(_,b),v(T)})}}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(y){if(typeof y!="number"||y<0||e(y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+y+".");a=y}}),n.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(y){if(typeof y!="number"||y<0||e(y))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+y+".");return this._maxListeners=y,this},n.prototype.getMaxListeners=function(){return u(this)},n.prototype.emit=function(y){for(var _=[],v=1;v<arguments.length;v++)_.push(arguments[v]);var C=y==="error",b=this._events;if(b!==void 0)C=C&&b.error===void 0;else if(!C)return!1;if(C){var T;if(_.length>0&&(T=_[0]),T instanceof Error)throw T;var S=new Error("Unhandled error."+(T?" ("+T.message+")":""));throw S.context=T,S}var x=b[y];if(x===void 0)return!1;if(typeof x=="function")r(x,this,_);else{var w=x.length,E=l(x,w);for(v=0;v<w;++v)r(E[v],this,_)}return!0},n.prototype.addListener=function(y,_){return f(this,y,_,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(y,_){return f(this,y,_,!0)},n.prototype.once=function(y,_){return c(_),this.on(y,h(this,y,_)),this},n.prototype.prependOnceListener=function(y,_){return c(_),this.prependListener(y,h(this,y,_)),this},n.prototype.removeListener=function(y,_){var v,C,b,T,S;if(c(_),(C=this._events)===void 0)return this;if((v=C[y])===void 0)return this;if(v===_||v.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete C[y],C.removeListener&&this.emit("removeListener",y,v.listener||_));else if(typeof v!="function"){for(b=-1,T=v.length-1;T>=0;T--)if(v[T]===_||v[T].listener===_){S=v[T].listener,b=T;break}if(b<0)return this;b===0?v.shift():function(x,w){for(;w+1<x.length;w++)x[w]=x[w+1];x.pop()}(v,b),v.length===1&&(C[y]=v[0]),C.removeListener!==void 0&&this.emit("removeListener",y,S||_)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(y){var _,v,C;if((v=this._events)===void 0)return this;if(v.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):v[y]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete v[y]),this;if(arguments.length===0){var b,T=Object.keys(v);for(C=0;C<T.length;++C)(b=T[C])!=="removeListener"&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(_=v[y])=="function")this.removeListener(y,_);else if(_!==void 0)for(C=_.length-1;C>=0;C--)this.removeListener(y,_[C]);return this},n.prototype.listeners=function(y){return o(this,y,!0)},n.prototype.rawListeners=function(y){return o(this,y,!1)},n.listenerCount=function(y,_){return typeof y.listenerCount=="function"?y.listenerCount(_):i.call(y,_)},n.prototype.listenerCount=i,n.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7292:(m,t,s)=>{var r=s(8520),e=s(5971),n=s(6617)("engine.io-client:socket"),a=s(6938),c=s(3401),u=s(4258),f=s(9140);function p(h,o){if(!(this instanceof p))return new p(h,o);o=o||{},h&&typeof h=="object"&&(o=h,h=null),h?(h=u(h),o.hostname=h.host,o.secure=h.protocol==="https"||h.protocol==="wss",o.port=h.port,h.query&&(o.query=h.query)):o.host&&(o.hostname=u(o.host).host),this.secure=o.secure!=null?o.secure:I.location&&location.protocol==="https:",o.hostname&&!o.port&&(o.port=this.secure?"443":"80"),this.agent=o.agent||!1,this.hostname=o.hostname||(I.location?location.hostname:"localhost"),this.port=o.port||(I.location&&location.port?location.port:this.secure?443:80),this.query=o.query||{},typeof this.query=="string"&&(this.query=f.decode(this.query)),this.upgrade=o.upgrade!==!1,this.path=(o.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!o.forceJSONP,this.jsonp=o.jsonp!==!1,this.forceBase64=!!o.forceBase64,this.enablesXDR=!!o.enablesXDR,this.timestampParam=o.timestampParam||"t",this.timestampRequests=o.timestampRequests,this.transports=o.transports||["polling","websocket"],this.transportOptions=o.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=o.policyPort||843,this.rememberUpgrade=o.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=o.onlyBinaryUpgrades,this.perMessageDeflate=o.perMessageDeflate!==!1&&(o.perMessageDeflate||{}),this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=o.pfx||null,this.key=o.key||null,this.passphrase=o.passphrase||null,this.cert=o.cert||null,this.ca=o.ca||null,this.ciphers=o.ciphers||null,this.rejectUnauthorized=o.rejectUnauthorized===void 0||o.rejectUnauthorized,this.forceNode=!!o.forceNode;var i=typeof I=="object"&&I;i.global===i&&(o.extraHeaders&&Object.keys(o.extraHeaders).length>0&&(this.extraHeaders=o.extraHeaders),o.localAddress&&(this.localAddress=o.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}m.exports=p,p.priorWebsocketSuccess=!1,e(p.prototype),p.protocol=c.protocol,p.Socket=p,p.Transport=s(2672),p.transports=s(8520),p.parser=s(3401),p.prototype.createTransport=function(h){n('creating transport "%s"',h);var o=function(l){var g={};for(var y in l)l.hasOwnProperty(y)&&(g[y]=l[y]);return g}(this.query);o.EIO=c.protocol,o.transport=h;var i=this.transportOptions[h]||{};return this.id&&(o.sid=this.id),new r[h]({query:o,socket:this,agent:i.agent||this.agent,hostname:i.hostname||this.hostname,port:i.port||this.port,secure:i.secure||this.secure,path:i.path||this.path,forceJSONP:i.forceJSONP||this.forceJSONP,jsonp:i.jsonp||this.jsonp,forceBase64:i.forceBase64||this.forceBase64,enablesXDR:i.enablesXDR||this.enablesXDR,timestampRequests:i.timestampRequests||this.timestampRequests,timestampParam:i.timestampParam||this.timestampParam,policyPort:i.policyPort||this.policyPort,pfx:i.pfx||this.pfx,key:i.key||this.key,passphrase:i.passphrase||this.passphrase,cert:i.cert||this.cert,ca:i.ca||this.ca,ciphers:i.ciphers||this.ciphers,rejectUnauthorized:i.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:i.perMessageDeflate||this.perMessageDeflate,extraHeaders:i.extraHeaders||this.extraHeaders,forceNode:i.forceNode||this.forceNode,localAddress:i.localAddress||this.localAddress,requestTimeout:i.requestTimeout||this.requestTimeout,protocols:i.protocols||void 0})},p.prototype.open=function(){var h;if(this.rememberUpgrade&&p.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)h="websocket";else{if(this.transports.length===0){var o=this;return void setTimeout(function(){o.emit("error","No transports available")},0)}h=this.transports[0]}this.readyState="opening";try{h=this.createTransport(h)}catch{return this.transports.shift(),void this.open()}h.open(),this.setTransport(h)},p.prototype.setTransport=function(h){n("setting transport %s",h.name);var o=this;this.transport&&(n("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=h,h.on("drain",function(){o.onDrain()}).on("packet",function(i){o.onPacket(i)}).on("error",function(i){o.onError(i)}).on("close",function(){o.onClose("transport close")})},p.prototype.probe=function(h){n('probing transport "%s"',h);var o=this.createTransport(h,{probe:1}),i=!1,l=this;function g(){if(l.onlyBinaryUpgrades){var S=!this.supportsBinary&&l.transport.supportsBinary;i=i||S}i||(n('probe transport "%s" opened',h),o.send([{type:"ping",data:"probe"}]),o.once("packet",function(x){if(!i)if(x.type==="pong"&&x.data==="probe"){if(n('probe transport "%s" pong',h),l.upgrading=!0,l.emit("upgrading",o),!o)return;p.priorWebsocketSuccess=o.name==="websocket",n('pausing current transport "%s"',l.transport.name),l.transport.pause(function(){i||l.readyState!=="closed"&&(n("changing transport and sending upgrade packet"),T(),l.setTransport(o),o.send([{type:"upgrade"}]),l.emit("upgrade",o),o=null,l.upgrading=!1,l.flush())})}else{n('probe transport "%s" failed',h);var w=new Error("probe error");w.transport=o.name,l.emit("upgradeError",w)}}))}function y(){i||(i=!0,T(),o.close(),o=null)}function _(S){var x=new Error("probe error: "+S);x.transport=o.name,y(),n('probe transport "%s" failed because of error: %s',h,S),l.emit("upgradeError",x)}function v(){_("transport closed")}function C(){_("socket closed")}function b(S){o&&S.name!==o.name&&(n('"%s" works - aborting "%s"',S.name,o.name),y())}function T(){o.removeListener("open",g),o.removeListener("error",_),o.removeListener("close",v),l.removeListener("close",C),l.removeListener("upgrading",b)}p.priorWebsocketSuccess=!1,o.once("open",g),o.once("error",_),o.once("close",v),this.once("close",C),this.once("upgrading",b),o.open()},p.prototype.onOpen=function(){if(n("socket open"),this.readyState="open",p.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){n("starting upgrade probes");for(var h=0,o=this.upgrades.length;h<o;h++)this.probe(this.upgrades[h])}},p.prototype.onPacket=function(h){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(n('socket receive: type "%s", data "%s"',h.type,h.data),this.emit("packet",h),this.emit("heartbeat"),h.type){case"open":this.onHandshake(JSON.parse(h.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var o=new Error("server error");o.code=h.data,this.onError(o);break;case"message":this.emit("data",h.data),this.emit("message",h.data)}else n('packet received with socket readyState "%s"',this.readyState)},p.prototype.onHandshake=function(h){this.emit("handshake",h),this.id=h.sid,this.transport.query.sid=h.sid,this.upgrades=this.filterUpgrades(h.upgrades),this.pingInterval=h.pingInterval,this.pingTimeout=h.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},p.prototype.onHeartbeat=function(h){clearTimeout(this.pingTimeoutTimer);var o=this;o.pingTimeoutTimer=setTimeout(function(){o.readyState!=="closed"&&o.onClose("ping timeout")},h||o.pingInterval+o.pingTimeout)},p.prototype.setPing=function(){var h=this;clearTimeout(h.pingIntervalTimer),h.pingIntervalTimer=setTimeout(function(){n("writing ping packet - expecting pong within %sms",h.pingTimeout),h.ping(),h.onHeartbeat(h.pingTimeout)},h.pingInterval)},p.prototype.ping=function(){var h=this;this.sendPacket("ping",function(){h.emit("ping")})},p.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()},p.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(n("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},p.prototype.write=p.prototype.send=function(h,o,i){return this.sendPacket("message",h,o,i),this},p.prototype.sendPacket=function(h,o,i,l){if(typeof o=="function"&&(l=o,o=void 0),typeof i=="function"&&(l=i,i=null),this.readyState!=="closing"&&this.readyState!=="closed"){(i=i||{}).compress=i.compress!==!1;var g={type:h,data:o,options:i};this.emit("packetCreate",g),this.writeBuffer.push(g),l&&this.once("flush",l),this.flush()}},p.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var h=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?l():o()}):this.upgrading?l():o()}function o(){h.onClose("forced close"),n("socket closing - telling transport to close"),h.transport.close()}function i(){h.removeListener("upgrade",i),h.removeListener("upgradeError",i),o()}function l(){h.once("upgrade",i),h.once("upgradeError",i)}return this},p.prototype.onError=function(h){n("socket error %j",h),p.priorWebsocketSuccess=!1,this.emit("error",h),this.onClose("transport error",h)},p.prototype.onClose=function(h,o){this.readyState!=="opening"&&this.readyState!=="open"&&this.readyState!=="closing"||(n('socket close with reason: "%s"',h),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",h,o),this.writeBuffer=[],this.prevBufferLen=0)},p.prototype.filterUpgrades=function(h){for(var o=[],i=0,l=h.length;i<l;i++)~a(this.transports,h[i])&&o.push(h[i]);return o}},7698:(m,t,s)=>{var r=s(9331),e=s(5074),n=s(9725),a=s(9368)("socket.io-client");m.exports=t=u;var c=t.managers={};function u(f,p){typeof f=="object"&&(p=f,f=void 0),p=p||{};var h,o=r(f),i=o.source,l=o.id,g=o.path,y=c[l]&&g in c[l].nsps;return p.forceNew||p["force new connection"]||p.multiplex===!1||y?(a("ignoring socket cache for %s",i),h=n(i,p)):(c[l]||(a("new io instance for %s",i),c[l]=n(i,p)),h=c[l]),o.query&&!p.query&&(p.query=o.query),h.socket(o.path,p)}t.protocol=e.protocol,t.connect=u,t.Manager=s(9725),t.Socket=s(7773)},7773:(m,t,s)=>{var r=s(5074),e=s(5971),n=s(8104),a=s(4745),c=s(8144),u=s(9368)("socket.io-client:socket"),f=s(9140);m.exports=o;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=e.prototype.emit;function o(i,l,g){this.io=i,this.nsp=l,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,g&&g.query&&(this.query=g.query),this.io.autoConnect&&this.open()}e(o.prototype),o.prototype.subEvents=function(){if(!this.subs){var i=this.io;this.subs=[a(i,"open",c(this,"onopen")),a(i,"packet",c(this,"onpacket")),a(i,"close",c(this,"onclose"))]}},o.prototype.open=o.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting")),this},o.prototype.send=function(){var i=n(arguments);return i.unshift("message"),this.emit.apply(this,i),this},o.prototype.emit=function(i){if(p.hasOwnProperty(i))return h.apply(this,arguments),this;var l=n(arguments),g={type:r.EVENT,data:l,options:{}};return g.options.compress=!this.flags||this.flags.compress!==!1,typeof l[l.length-1]=="function"&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=l.pop(),g.id=this.ids++),this.connected?this.packet(g):this.sendBuffer.push(g),delete this.flags,this},o.prototype.packet=function(i){i.nsp=this.nsp,this.io.packet(i)},o.prototype.onopen=function(){if(u("transport is open - connecting"),this.nsp!=="/")if(this.query){var i=typeof this.query=="object"?f.encode(this.query):this.query;u("sending connect packet with query %s",i),this.packet({type:r.CONNECT,query:i})}else this.packet({type:r.CONNECT})},o.prototype.onclose=function(i){u("close (%s)",i),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",i)},o.prototype.onpacket=function(i){if(i.nsp===this.nsp)switch(i.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(i);break;case r.ACK:case r.BINARY_ACK:this.onack(i);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",i.data)}},o.prototype.onevent=function(i){var l=i.data||[];u("emitting event %j",l),i.id!=null&&(u("attaching ack callback to event"),l.push(this.ack(i.id))),this.connected?h.apply(this,l):this.receiveBuffer.push(l)},o.prototype.ack=function(i){var l=this,g=!1;return function(){if(!g){g=!0;var y=n(arguments);u("sending ack %j",y),l.packet({type:r.ACK,id:i,data:y})}}},o.prototype.onack=function(i){var l=this.acks[i.id];typeof l=="function"?(u("calling ack %s with %j",i.id,i.data),l.apply(this,i.data),delete this.acks[i.id]):u("bad ack %s",i.id)},o.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},o.prototype.emitBuffered=function(){var i;for(i=0;i<this.receiveBuffer.length;i++)h.apply(this,this.receiveBuffer[i]);for(this.receiveBuffer=[],i=0;i<this.sendBuffer.length;i++)this.packet(this.sendBuffer[i]);this.sendBuffer=[]},o.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},o.prototype.destroy=function(){if(this.subs){for(var i=0;i<this.subs.length;i++)this.subs[i].destroy();this.subs=null}this.io.destroy(this)},o.prototype.close=o.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},o.prototype.compress=function(i){return this.flags=this.flags||{},this.flags.compress=i,this}},7833:(m,t,s)=>{t.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+m.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let a=0,c=0;e[0].replace(/%[a-zA-Z%]/g,u=>{u!=="%%"&&(a++,u==="%c"&&(c=a))}),e.splice(c,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch{}},t.load=function(){let e;try{e=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=_t.DEBUG),e},t.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch{}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),m.exports=s(736)(t);const{formatters:r}=m.exports;r.j=function(e){try{return JSON.stringify(e)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}},8104:m=>{m.exports=function(t,s){for(var r=[],e=(s=s||0)||0;e<t.length;e++)r[e-s]=t[e];return r}},8144:m=>{var t=[].slice;m.exports=function(s,r){if(typeof r=="string"&&(r=s[r]),typeof r!="function")throw new Error("bind() requires a function");var e=t.call(arguments,2);return function(){return r.apply(s,e.concat(t.call(arguments)))}}},8247:m=>{m.exports=function(t){return I.Buffer&&I.Buffer.isBuffer(t)||I.ArrayBuffer&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))}},8383:m=>{try{m.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{m.exports=!1}},8520:(m,t,s)=>{var r=s(3051),e=s(9332),n=s(2252),a=s(6855);t.polling=function(c){var u=!1,f=!1,p=c.jsonp!==!1;if(I.location){var h=location.protocol==="https:",o=location.port;o||(o=h?443:80),u=c.hostname!==location.hostname||o!==c.port,f=c.secure!==h}if(c.xdomain=u,c.xscheme=f,"open"in new r(c)&&!c.forceJSONP)return new e(c);if(!p)throw new Error("JSONP disabled");return new n(c)},t.websocket=a},8758:m=>{var t,s,r,e=String.fromCharCode;function n(h){for(var o,i,l=[],g=0,y=h.length;g<y;)(o=h.charCodeAt(g++))>=55296&&o<=56319&&g<y?(64512&(i=h.charCodeAt(g++)))==56320?l.push(((1023&o)<<10)+(1023&i)+65536):(l.push(o),g--):l.push(o);return l}function a(h,o){if(h>=55296&&h<=57343){if(o)throw Error("Lone surrogate U+"+h.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(h,o){return e(h>>o&63|128)}function u(h,o){if(!(4294967168&h))return e(h);var i="";return 4294965248&h?4294901760&h?4292870144&h||(i=e(h>>18&7|240),i+=c(h,12),i+=c(h,6)):(a(h,o)||(h=65533),i=e(h>>12&15|224),i+=c(h,6)):i=e(h>>6&31|192),i+e(63&h|128)}function f(){if(r>=s)throw Error("Invalid byte index");var h=255&t[r];if(r++,(192&h)==128)return 63&h;throw Error("Invalid continuation byte")}function p(h){var o,i;if(r>s)throw Error("Invalid byte index");if(r==s)return!1;if(o=255&t[r],r++,!(128&o))return o;if((224&o)==192){if((i=(31&o)<<6|f())>=128)return i;throw Error("Invalid continuation byte")}if((240&o)==224){if((i=(15&o)<<12|f()<<6|f())>=2048)return a(i,h)?i:65533;throw Error("Invalid continuation byte")}if((248&o)==240&&(i=(7&o)<<18|f()<<12|f()<<6|f())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}m.exports={version:"2.1.2",encode:function(h,o){for(var i=(o=o||{}).strict!==!1,l=n(h),g=l.length,y=-1,_="";++y<g;)_+=u(l[y],i);return _},decode:function(h,o){var i=(o=o||{}).strict!==!1;t=n(h),s=t.length,r=0;for(var l,g=[];(l=p(i))!==!1;)g.push(l);return function(y){for(var _,v=y.length,C=-1,b="";++C<v;)(_=y[C])>65535&&(b+=e((_-=65536)>>>10&1023|55296),_=56320|1023&_),b+=e(_);return b}(g)}}},8839:(m,t,s)=>{var r=s(4634),e=Object.prototype.toString,n=typeof Blob=="function"||typeof Blob<"u"&&e.call(Blob)==="[object BlobConstructor]",a=typeof File=="function"||typeof File<"u"&&e.call(File)==="[object FileConstructor]";m.exports=function c(u){if(!u||typeof u!="object")return!1;if(r(u)){for(var f=0,p=u.length;f<p;f++)if(c(u[f]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(u)||typeof ArrayBuffer=="function"&&u instanceof ArrayBuffer||n&&u instanceof Blob||a&&u instanceof File)return!0;if(u.toJSON&&typeof u.toJSON=="function"&&arguments.length===1)return c(u.toJSON(),!0);for(var h in u)if(Object.prototype.hasOwnProperty.call(u,h)&&c(u[h]))return!0;return!1}},9110:(m,t,s)=>{function r(n){var a;function c(){if(c.enabled){var u=c,f=+new Date,p=f-(a||f);u.diff=p,u.prev=a,u.curr=f,a=f;for(var h=new Array(arguments.length),o=0;o<h.length;o++)h[o]=arguments[o];h[0]=t.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");var i=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,function(l,g){if(l==="%%")return l;i++;var y=t.formatters[g];if(typeof y=="function"){var _=h[i];l=y.call(u,_),h.splice(i,1),i--}return l}),t.formatArgs.call(u,h),(c.log||t.log||console.log.bind(console)).apply(u,h)}}return c.namespace=n,c.enabled=t.enabled(n),c.useColors=t.useColors(),c.color=function(u){var f,p=0;for(f in u)p=(p<<5)-p+u.charCodeAt(f),p|=0;return t.colors[Math.abs(p)%t.colors.length]}(n),c.destroy=e,typeof t.init=="function"&&t.init(c),t.instances.push(c),c}function e(){var n=t.instances.indexOf(this);return n!==-1&&(t.instances.splice(n,1),!0)}(t=m.exports=r.debug=r.default=r).coerce=function(n){return n instanceof Error?n.stack||n.message:n},t.disable=function(){t.enable("")},t.enable=function(n){var a;t.save(n),t.names=[],t.skips=[];var c=(typeof n=="string"?n:"").split(/[\s,]+/),u=c.length;for(a=0;a<u;a++)c[a]&&((n=c[a].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+n.substr(1)+"$")):t.names.push(new RegExp("^"+n+"$")));for(a=0;a<t.instances.length;a++){var f=t.instances[a];f.enabled=t.enabled(f.namespace)}},t.enabled=function(n){if(n[n.length-1]==="*")return!0;var a,c;for(a=0,c=t.skips.length;a<c;a++)if(t.skips[a].test(n))return!1;for(a=0,c=t.names.length;a<c;a++)if(t.names[a].test(n))return!0;return!1},t.humanize=s(3097),t.instances=[],t.names=[],t.skips=[],t.formatters={}},9140:(m,t)=>{t.encode=function(s){var r="";for(var e in s)s.hasOwnProperty(e)&&(r.length&&(r+="&"),r+=encodeURIComponent(e)+"="+encodeURIComponent(s[e]));return r},t.decode=function(s){for(var r={},e=s.split("&"),n=0,a=e.length;n<a;n++){var c=e[n].split("=");r[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return r}},9331:(m,t,s)=>{var r=s(4258),e=s(9368)("socket.io-client:url");m.exports=function(n,a){var c=n;a=a||I.location,n==null&&(n=a.protocol+"//"+a.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n=n.charAt(1)==="/"?a.protocol+n:a.host+n),/^(https?|wss?):\/\//.test(n)||(e("protocol-less url %s",n),n=a!==void 0?a.protocol+"//"+n:"https://"+n),e("parse %s",n),c=r(n)),c.port||(/^(http|ws)$/.test(c.protocol)?c.port="80":/^(http|ws)s$/.test(c.protocol)&&(c.port="443")),c.path=c.path||"/";var u=c.host.indexOf(":")!==-1?"["+c.host+"]":c.host;return c.id=c.protocol+"://"+u+":"+c.port,c.href=c.protocol+"://"+u+(a&&a.port===c.port?"":":"+c.port),c}},9332:(m,t,s)=>{var r=s(3051),e=s(5911),n=s(5971),a=s(2370),c=s(6617)("engine.io-client:polling-xhr");function u(){}function f(o){if(e.call(this,o),this.requestTimeout=o.requestTimeout,this.extraHeaders=o.extraHeaders,I.location){var i=location.protocol==="https:",l=location.port;l||(l=i?443:80),this.xd=o.hostname!==I.location.hostname||l!==o.port,this.xs=o.secure!==i}}function p(o){this.method=o.method||"GET",this.uri=o.uri,this.xd=!!o.xd,this.xs=!!o.xs,this.async=o.async!==!1,this.data=o.data!==void 0?o.data:null,this.agent=o.agent,this.isBinary=o.isBinary,this.supportsBinary=o.supportsBinary,this.enablesXDR=o.enablesXDR,this.requestTimeout=o.requestTimeout,this.pfx=o.pfx,this.key=o.key,this.passphrase=o.passphrase,this.cert=o.cert,this.ca=o.ca,this.ciphers=o.ciphers,this.rejectUnauthorized=o.rejectUnauthorized,this.extraHeaders=o.extraHeaders,this.create()}function h(){for(var o in p.requests)p.requests.hasOwnProperty(o)&&p.requests[o].abort()}m.exports=f,m.exports.Request=p,a(f,e),f.prototype.supportsBinary=!0,f.prototype.request=function(o){return(o=o||{}).uri=this.uri(),o.xd=this.xd,o.xs=this.xs,o.agent=this.agent||!1,o.supportsBinary=this.supportsBinary,o.enablesXDR=this.enablesXDR,o.pfx=this.pfx,o.key=this.key,o.passphrase=this.passphrase,o.cert=this.cert,o.ca=this.ca,o.ciphers=this.ciphers,o.rejectUnauthorized=this.rejectUnauthorized,o.requestTimeout=this.requestTimeout,o.extraHeaders=this.extraHeaders,new p(o)},f.prototype.doWrite=function(o,i){var l=typeof o!="string"&&o!==void 0,g=this.request({method:"POST",data:o,isBinary:l}),y=this;g.on("success",i),g.on("error",function(_){y.onError("xhr post error",_)}),this.sendXhr=g},f.prototype.doPoll=function(){c("xhr poll");var o=this.request(),i=this;o.on("data",function(l){i.onData(l)}),o.on("error",function(l){i.onError("xhr poll error",l)}),this.pollXhr=o},n(p.prototype),p.prototype.create=function(){var o={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};o.pfx=this.pfx,o.key=this.key,o.passphrase=this.passphrase,o.cert=this.cert,o.ca=this.ca,o.ciphers=this.ciphers,o.rejectUnauthorized=this.rejectUnauthorized;var i=this.xhr=new r(o),l=this;try{c("xhr open %s: %s",this.method,this.uri),i.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var g in i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(g)&&i.setRequestHeader(g,this.extraHeaders[g])}catch{}if(this.method==="POST")try{this.isBinary?i.setRequestHeader("Content-type","application/octet-stream"):i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in i&&(i.withCredentials=!0),this.requestTimeout&&(i.timeout=this.requestTimeout),this.hasXDR()?(i.onload=function(){l.onLoad()},i.onerror=function(){l.onError(i.responseText)}):i.onreadystatechange=function(){if(i.readyState===2)try{var y=i.getResponseHeader("Content-Type");l.supportsBinary&&y==="application/octet-stream"&&(i.responseType="arraybuffer")}catch{}i.readyState===4&&(i.status===200||i.status===1223?l.onLoad():setTimeout(function(){l.onError(i.status)},0))},c("xhr data %s",this.data),i.send(this.data)}catch(y){return void setTimeout(function(){l.onError(y)},0)}I.document&&(this.index=p.requestsCount++,p.requests[this.index]=this)},p.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},p.prototype.onData=function(o){this.emit("data",o),this.onSuccess()},p.prototype.onError=function(o){this.emit("error",o),this.cleanup(!0)},p.prototype.cleanup=function(o){if(this.xhr!==void 0&&this.xhr!==null){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,o)try{this.xhr.abort()}catch{}I.document&&delete p.requests[this.index],this.xhr=null}},p.prototype.onLoad=function(){var o;try{var i;try{i=this.xhr.getResponseHeader("Content-Type")}catch{}o=i==="application/octet-stream"&&this.xhr.response||this.xhr.responseText}catch(l){this.onError(l)}o!=null&&this.onData(o)},p.prototype.hasXDR=function(){return I.XDomainRequest!==void 0&&!this.xs&&this.enablesXDR},p.prototype.abort=function(){this.cleanup()},p.requestsCount=0,p.requests={},I.document&&(I.attachEvent?I.attachEvent("onunload",h):I.addEventListener&&I.addEventListener("beforeunload",h,!1))},9368:(m,t,s)=>{function r(){var e;try{e=t.storage.debug}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=_t.DEBUG),e}(t=m.exports=s(9939)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var a="color: "+this.color;e.splice(1,0,a,"color: inherit");var c=0,u=0;e[0].replace(/%[a-zA-Z%]/g,function(f){f!=="%%"&&(c++,f==="%c"&&(u=c))}),e.splice(u,0,a)}},t.save=function(e){try{e==null?t.storage.removeItem("debug"):t.storage.debug=e}catch{}},t.load=r,t.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}},t.enable(r())},9725:(m,t,s)=>{var r=s(3357),e=s(7773),n=s(5971),a=s(5074),c=s(4745),u=s(8144),f=s(9368)("socket.io-client:manager"),p=s(6938),h=s(3059),o=Object.prototype.hasOwnProperty;function i(l,g){if(!(this instanceof i))return new i(l,g);l&&typeof l=="object"&&(g=l,l=void 0),(g=g||{}).path=g.path||"/socket.io",this.nsps={},this.subs=[],this.opts=g,this.reconnection(g.reconnection!==!1),this.reconnectionAttempts(g.reconnectionAttempts||1/0),this.reconnectionDelay(g.reconnectionDelay||1e3),this.reconnectionDelayMax(g.reconnectionDelayMax||5e3),this.randomizationFactor(g.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(g.timeout==null?2e4:g.timeout),this.readyState="closed",this.uri=l,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var y=g.parser||a;this.encoder=new y.Encoder,this.decoder=new y.Decoder,this.autoConnect=g.autoConnect!==!1,this.autoConnect&&this.open()}m.exports=i,i.prototype.emitAll=function(){for(var l in this.emit.apply(this,arguments),this.nsps)o.call(this.nsps,l)&&this.nsps[l].emit.apply(this.nsps[l],arguments)},i.prototype.updateSocketIds=function(){for(var l in this.nsps)o.call(this.nsps,l)&&(this.nsps[l].id=this.generateId(l))},i.prototype.generateId=function(l){return(l==="/"?"":l+"#")+this.engine.id},n(i.prototype),i.prototype.reconnection=function(l){return arguments.length?(this._reconnection=!!l,this):this._reconnection},i.prototype.reconnectionAttempts=function(l){return arguments.length?(this._reconnectionAttempts=l,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(l){return arguments.length?(this._reconnectionDelay=l,this.backoff&&this.backoff.setMin(l),this):this._reconnectionDelay},i.prototype.randomizationFactor=function(l){return arguments.length?(this._randomizationFactor=l,this.backoff&&this.backoff.setJitter(l),this):this._randomizationFactor},i.prototype.reconnectionDelayMax=function(l){return arguments.length?(this._reconnectionDelayMax=l,this.backoff&&this.backoff.setMax(l),this):this._reconnectionDelayMax},i.prototype.timeout=function(l){return arguments.length?(this._timeout=l,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()},i.prototype.open=i.prototype.connect=function(l,g){if(f("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=r(this.uri,this.opts);var y=this.engine,_=this;this.readyState="opening",this.skipReconnect=!1;var v=c(y,"open",function(){_.onopen(),l&&l()}),C=c(y,"error",function(S){if(f("connect_error"),_.cleanup(),_.readyState="closed",_.emitAll("connect_error",S),l){var x=new Error("Connection error");x.data=S,l(x)}else _.maybeReconnectOnOpen()});if(this._timeout!==!1){var b=this._timeout;f("connect attempt will timeout after %d",b);var T=setTimeout(function(){f("connect attempt timed out after %d",b),v.destroy(),y.close(),y.emit("error","timeout"),_.emitAll("connect_timeout",b)},b);this.subs.push({destroy:function(){clearTimeout(T)}})}return this.subs.push(v),this.subs.push(C),this},i.prototype.onopen=function(){f("open"),this.cleanup(),this.readyState="open",this.emit("open");var l=this.engine;this.subs.push(c(l,"data",u(this,"ondata"))),this.subs.push(c(l,"ping",u(this,"onping"))),this.subs.push(c(l,"pong",u(this,"onpong"))),this.subs.push(c(l,"error",u(this,"onerror"))),this.subs.push(c(l,"close",u(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",u(this,"ondecoded")))},i.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},i.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},i.prototype.ondata=function(l){this.decoder.add(l)},i.prototype.ondecoded=function(l){this.emit("packet",l)},i.prototype.onerror=function(l){f("error",l),this.emitAll("error",l)},i.prototype.socket=function(l,g){var y=this.nsps[l];if(!y){y=new e(this,l,g),this.nsps[l]=y;var _=this;y.on("connecting",v),y.on("connect",function(){y.id=_.generateId(l)}),this.autoConnect&&v()}function v(){~p(_.connecting,y)||_.connecting.push(y)}return y},i.prototype.destroy=function(l){var g=p(this.connecting,l);~g&&this.connecting.splice(g,1),this.connecting.length||this.close()},i.prototype.packet=function(l){f("writing packet %j",l);var g=this;l.query&&l.type===0&&(l.nsp+="?"+l.query),g.encoding?g.packetBuffer.push(l):(g.encoding=!0,this.encoder.encode(l,function(y){for(var _=0;_<y.length;_++)g.engine.write(y[_],l.options);g.encoding=!1,g.processPacketQueue()}))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var l=this.packetBuffer.shift();this.packet(l)}},i.prototype.cleanup=function(){f("cleanup");for(var l=this.subs.length,g=0;g<l;g++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){f("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},i.prototype.onclose=function(l){f("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",l),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var l=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var g=this.backoff.duration();f("will wait %dms before reconnect attempt",g),this.reconnecting=!0;var y=setTimeout(function(){l.skipReconnect||(f("attempting reconnect"),l.emitAll("reconnect_attempt",l.backoff.attempts),l.emitAll("reconnecting",l.backoff.attempts),l.skipReconnect||l.open(function(_){_?(f("reconnect attempt error"),l.reconnecting=!1,l.reconnect(),l.emitAll("reconnect_error",_.data)):(f("reconnect success"),l.onreconnect())}))},g);this.subs.push({destroy:function(){clearTimeout(y)}})}},i.prototype.onreconnect=function(){var l=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",l)}},9939:(m,t,s)=>{var r;function e(n){function a(){if(a.enabled){var c=a,u=+new Date,f=u-(r||u);c.diff=f,c.prev=r,c.curr=u,r=u;for(var p=new Array(arguments.length),h=0;h<p.length;h++)p[h]=arguments[h];p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var o=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(i,l){if(i==="%%")return i;o++;var g=t.formatters[l];if(typeof g=="function"){var y=p[o];i=g.call(c,y),p.splice(o,1),o--}return i}),t.formatArgs.call(c,p),(a.log||t.log||console.log.bind(console)).apply(c,p)}}return a.namespace=n,a.enabled=t.enabled(n),a.useColors=t.useColors(),a.color=function(c){var u,f=0;for(u in c)f=(f<<5)-f+c.charCodeAt(u),f|=0;return t.colors[Math.abs(f)%t.colors.length]}(n),typeof t.init=="function"&&t.init(a),a}(t=m.exports=e.debug=e.default=e).coerce=function(n){return n instanceof Error?n.stack||n.message:n},t.disable=function(){t.enable("")},t.enable=function(n){t.save(n),t.names=[],t.skips=[];for(var a=(typeof n=="string"?n:"").split(/[\s,]+/),c=a.length,u=0;u<c;u++)a[u]&&((n=a[u].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+n.substr(1)+"$")):t.names.push(new RegExp("^"+n+"$")))},t.enabled=function(n){var a,c;for(a=0,c=t.skips.length;a<c;a++)if(t.skips[a].test(n))return!1;for(a=0,c=t.names.length;a<c;a++)if(t.names[a].test(n))return!0;return!1},t.humanize=s(2902),t.names=[],t.skips=[],t.formatters={}}},$t={};function j(m){var t=$t[m];if(t!==void 0)return t.exports;var s=$t[m]={exports:{}};return se[m](s,s.exports,j),s.exports}j.n=m=>{var t=m&&m.__esModule?()=>m.default:()=>m;return j.d(t,{a:t}),t},j.d=(m,t)=>{for(var s in t)j.o(t,s)&&!j.o(m,s)&&Object.defineProperty(m,s,{enumerable:!0,get:t[s]})},j.o=(m,t)=>Object.prototype.hasOwnProperty.call(m,t);var Ot={};j.d(Ot,{Bx:()=>Y,F4:()=>Jt,Pr:()=>ce});var oe=j(7007),ne=j.n(oe),re=j(7698),ie=j.n(re),ae=j(7833),J=j.n(ae);const Jt=Object.freeze({createAccessToken:"/auth/v1/token",updateAccessToken:"/auth/v1/token",deleteToken:"/auth/v1/token/revoke",createSessionUrl:"/open/v1/sessions/auth",createChatEventSubscription:"/open/v1/sessions/events/subscribe/chat",createDonationEventSubscription:"/open/v1/sessions/events/subscribe/donation",getUser:"/open/v1/users/me",postChat:"/open/v1/chats/send"}),Y=Object.freeze({SYSTEM:"SYSTEM",CHAT:"CHAT",DONATION:"DONATION"});var q,W,it,at,H,Q,V,st,ot,G,tt,nt,dt,ft,R,kt;class ce extends ne(){constructor({api_url:s,code:r,state:e,access_token:n,refresh_token:a,token_type:c,expires_in:u,scope:f,paths:p={}}){super();U(this,q);U(this,W);U(this,it);U(this,at);U(this,H);U(this,Q);U(this,V);U(this,st);U(this,ot);U(this,G);U(this,tt);U(this,nt);U(this,dt);U(this,ft);U(this,R);U(this,kt);yt(this,"on",super.on);yt(this,"off",super.off);yt(this,"emit",super.emit);P(this,q,s),P(this,W,{...Jt,...p}),P(this,it,r),P(this,at,e),P(this,H,n),P(this,Q,a),P(this,V,c),P(this,st,parseInt(u)),P(this,ot,f),P(this,R,J()("chzzk-proxy")),P(this,kt,J()("chzzk-proxy:error")),A(this,R).call(this,`constructor(${s}, ${r}, ${e}, ${p}, ${n}, ${a}, ${c}, ${u}, ${f})`)}get connected(){return!!A(this,G)&&A(this,G).connected}get api_url(){return A(this,q)}get paths(){return A(this,W)}get code(){return A(this,it)}get state(){return A(this,at)}get access_token(){return A(this,H)}get refresh_token(){return A(this,Q)}get token_type(){return A(this,V)}get expires_in(){return A(this,st)}get scope(){return A(this,ot)}get session_key(){return A(this,tt)}get channel_id(){return A(this,nt)}get channel_name(){return A(this,dt)}get nickname(){return A(this,ft)}set message(s){if(this.connected)return this.postChat(s)}async connect(){if(this.connected)return this.connected;let s;A(this,H)||(s=await this.createAccessToken()),A(this,R).call(this,"access_token",A(this,H)),A(this,R).call(this,"refresh_token",A(this,Q)),A(this,R).call(this,"token_type",A(this,V)),A(this,R).call(this,"expires_in",A(this,st)),A(this,R).call(this,"scope",A(this,ot)),await this.getUser(),s=await this.createSessionUrl();const r=s.url,e={reconnection:!1,"force new connection":!0,"connect timeout":3e3};return typeof window>"u"&&(e.transports=["websocket"]),A(this,R).call(this,"socket_option",e),P(this,G,ie()(r,e)),A(this,G).on("connect",async()=>{A(this,R).call(this,"[SUCCESS] socket.io connection established")}),A(this,G).on(Y.SYSTEM,async n=>{const{type:a,data:c}=JSON.parse(n),{sessionKey:u,eventType:f,channelId:p}=c;switch(a){case"connected":A(this,R).call(this,`[SUCCESS] connected sessionKey: ${u}`),P(this,tt,u),await this.createChatEventSubscription(),await this.createDonationEventSubscription();break;case"subscribed":A(this,R).call(this,`[SUCCESS] subscribed eventType: ${f}, channelId: ${p}`),P(this,nt,p);break;case"unsubscribed":A(this,R).call(this,`[SUCCESS] unsubscribed eventType: ${f}, channelId: ${p}`);break;case"revoked":A(this,R).call(this,`[SUCCESS] revoked eventType: ${f}, channelId: ${p}`)}this.emit(Y.SYSTEM,{sessionKey:u,eventType:f,channelId:p})}),A(this,G).on(Y.CHAT,n=>{const a=JSON.parse(n);A(this,R).call(this,Y.CHAT,a),this.emit(Y.CHAT,a)}),A(this,G).on(Y.DONATION,n=>{const a=JSON.parse(n);A(this,R).call(this,Y.CHAT,a),this.emit(Y.DONATION,a)}),this.connected}async destroy(){this.connected&&(A(this,G).close(),P(this,G,null),P(this,tt,null),P(this,nt,null),await this.deleteToken())}async updateToken(){this.connected&&await this.updateAccessToken()}async fetchRequest(s,r){const e=J()("chzzk-proxy:fetchRequest");e("api_url",s),e("options",r);const n=r.method||"GET",a=new URL(s);for(const h in r.param)r.param[h]&&a.searchParams.append(h,`${r.param[h]}`);e("url",a);const c=new Headers;for(const h in r.headers)r.headers[h]&&c.append(h,`${r.headers[h]}`);e("headers",c);const u=new Request(a,{method:n,headers:c,body:JSON.stringify(r.body)});e("request",u);const f=await fetch(u);e("response",f);const p=await f.json();return e("result",p),p.content}async createAccessToken(){const s=J()("chzzk-proxy:createAccessToken"),r=await this.fetchRequest(A(this,q),{method:"POST",headers:{"Content-Type":"application/json",path:A(this,W).createAccessToken},body:{grantType:"authorization_code",code:A(this,it),state:A(this,at)}});return s("result",r),P(this,H,r.accessToken),P(this,Q,r.refreshToken),P(this,V,r.tokenType),P(this,st,r.expiresIn),P(this,ot,r.scope),r}async updateAccessToken(){const s=J()("chzzk-proxy:updateAccessToken"),r=await this.fetchRequest(A(this,q),{method:"POST",headers:{"Content-Type":"application/json",path:A(this,W).updateAccessToken},body:{grantType:"refresh_token",refreshToken:A(this,Q)}});return s("result",r),r}async deleteToken(){const s=J()("chzzk-proxy:deleteToken"),r=await this.fetchRequest(A(this,q),{method:"POST",headers:{Authorization:`${A(this,V)} ${A(this,H)}`,"Content-Type":"application/json",path:A(this,W).deleteToken},body:{token:A(this,H)}});return s("result",r),r}async createSessionUrl(){const s=J()("chzzk-proxy:createSessionUrl"),r=await this.fetchRequest(A(this,q),{method:"GET",headers:{Authorization:`${A(this,V)} ${A(this,H)}`,"Content-Type":"application/json",path:A(this,W).createSessionUrl}});return s("result",r),r}async createChatEventSubscription(){const s=J()("chzzk-proxy:createChatEventSubscription"),r=await this.fetchRequest(A(this,q),{method:"POST",param:{sessionKey:A(this,tt)},headers:{Authorization:`${A(this,V)} ${A(this,H)}`,"Content-Type":"application/json",path:A(this,W).createChatEventSubscription}});return s("result",r),r}async createDonationEventSubscription(){const s=J()("chzzk-proxy:createDonationEventSubscription"),r=await this.fetchRequest(A(this,q),{method:"POST",param:{sessionKey:A(this,tt)},headers:{Authorization:`${A(this,V)} ${A(this,H)}`,"Content-Type":"application/json",path:A(this,W).createDonationEventSubscription}});return s("result",r),r}async getUser(){const s=J()("chzzk-proxy:getUser"),r=await this.fetchRequest(A(this,q),{method:"GET",headers:{Authorization:`${A(this,V)} ${A(this,H)}`,"Content-Type":"application/json",path:A(this,W).getUser}});return s("result",r),P(this,nt,r.channelId),P(this,dt,r.channelName),P(this,ft,r.nickname),r}async postChat(s){const r=J()("chzzk-proxy:postChat"),e=await this.fetchRequest(A(this,q),{method:"POST",headers:{Authorization:`${A(this,V)} ${A(this,H)}`,"Content-Type":"application/json",path:A(this,W).postChat},body:{message:s}});return r("result",e),e}}q=new WeakMap,W=new WeakMap,it=new WeakMap,at=new WeakMap,H=new WeakMap,Q=new WeakMap,V=new WeakMap,st=new WeakMap,ot=new WeakMap,G=new WeakMap,tt=new WeakMap,nt=new WeakMap,dt=new WeakMap,ft=new WeakMap,R=new WeakMap,kt=new WeakMap;const le=Ot.Pr,qt=Ot.Bx;Ot.F4;class Kt extends z.Events.EventEmitter{}var X=(m=>(m.CHAT="CHAT",m.DONATION="DONATION",m.VOLUME_MASTER="VOLUME_MASTER",m.VOLUME_BGM="VOLUME_BGM",m.VOLUME_EFFECT="VOLUME_EFFECT",m))(X||{});class he extends Kt{constructor(){super(),this.SCALE=4,this.WIDTH=480*this.SCALE,this.HEIGHT=270*this.SCALE,this.DEBUG=!1,this.bgm_map={},this._volume_master=parseFloat(localStorage.getItem("svsv:volume:master")||"0.5"),this._volume_bgm=parseFloat(localStorage.getItem("svsv:volume:bgm")||"0.3"),this._volume_effect=parseFloat(localStorage.getItem("svsv:volume:effect")||"0.5"),this.style={color:{grey_0:parseInt(localStorage.getItem("svsv:style:color:grey_0")||"0x000000"),grey_1:parseInt(localStorage.getItem("svsv:style:color:grey_1")||"0x111111"),grey_2:parseInt(localStorage.getItem("svsv:style:color:grey_2")||"0x222222"),grey_3:parseInt(localStorage.getItem("svsv:style:color:grey_3")||"0x333333"),grey_4:parseInt(localStorage.getItem("svsv:style:color:grey_4")||"0x444444"),grey_5:parseInt(localStorage.getItem("svsv:style:color:grey_5")||"0x555555"),grey_6:parseInt(localStorage.getItem("svsv:style:color:grey_6")||"0x666666"),grey_7:parseInt(localStorage.getItem("svsv:style:color:grey_7")||"0x777777"),grey_8:parseInt(localStorage.getItem("svsv:style:color:grey_8")||"0x888888"),grey_9:parseInt(localStorage.getItem("svsv:style:color:grey_9")||"0x999999"),grey_a:parseInt(localStorage.getItem("svsv:style:color:grey_a")||"0xaaaaaa"),grey_b:parseInt(localStorage.getItem("svsv:style:color:grey_b")||"0xbbbbbb"),grey_c:parseInt(localStorage.getItem("svsv:style:color:grey_c")||"0xcccccc"),grey_d:parseInt(localStorage.getItem("svsv:style:color:grey_d")||"0xdddddd"),grey_e:parseInt(localStorage.getItem("svsv:style:color:grey_e")||"0xeeeeee"),grey_f:parseInt(localStorage.getItem("svsv:style:color:grey_f")||"0xffffff"),green_a:parseInt(localStorage.getItem("svsv:style:color:green_a")||"0x00aa6c"),green_f:parseInt(localStorage.getItem("svsv:style:color:green_f")||"0x00ffa3"),purple_a:parseInt(localStorage.getItem("svsv:style:color:purple_a")||"0x6c00aa"),purple_f:parseInt(localStorage.getItem("svsv:style:color:purple_f")||"0xa300ff"),pink_a:parseInt(localStorage.getItem("svsv:style:color:pink_a")||"0xaa006c"),pink_f:parseInt(localStorage.getItem("svsv:style:color:pink_f")||"0xff00a3")},color_code:{grey_0:localStorage.getItem("svsv:style:color_code:grey_0")||"#000000",grey_1:localStorage.getItem("svsv:style:color_code:grey_1")||"#111111",grey_2:localStorage.getItem("svsv:style:color_code:grey_2")||"#222222",grey_3:localStorage.getItem("svsv:style:color_code:grey_3")||"#333333",grey_4:localStorage.getItem("svsv:style:color_code:grey_4")||"#444444",grey_5:localStorage.getItem("svsv:style:color_code:grey_5")||"#555555",grey_6:localStorage.getItem("svsv:style:color_code:grey_6")||"#666666",grey_7:localStorage.getItem("svsv:style:color_code:grey_7")||"#777777",grey_8:localStorage.getItem("svsv:style:color_code:grey_8")||"#888888",grey_9:localStorage.getItem("svsv:style:color_code:grey_9")||"#999999",grey_a:localStorage.getItem("svsv:style:color_code:grey_a")||"#aaaaaa",grey_b:localStorage.getItem("svsv:style:color_code:grey_b")||"#bbbbbb",grey_c:localStorage.getItem("svsv:style:color_code:grey_c")||"#cccccc",grey_d:localStorage.getItem("svsv:style:color_code:grey_d")||"#dddddd",grey_e:localStorage.getItem("svsv:style:color_code:grey_e")||"#eeeeee",grey_f:localStorage.getItem("svsv:style:color_code:grey_f")||"#ffffff",green_a:localStorage.getItem("svsv:style:color_code:grey_a")||"#00aa6c",green_f:localStorage.getItem("svsv:style:color_code:grey_f")||"#00ffa3",purple_a:localStorage.getItem("svsv:style:color_code:purple_a")||"#6c00aa",purple_f:localStorage.getItem("svsv:style:color_code:purple_f")||"#a300ff",pink_a:localStorage.getItem("svsv:style:color:pink_a")||"#aa006c",pink_f:localStorage.getItem("svsv:style:color:pink_f")||"#ff00a3"},font_style:{},font_padding:0};const t=16;this.style.font_style={fontFamily:"DungGeunMo",fontSize:t*this.SCALE,color:this.style.color_code.grey_f,align:"center"},this.style.font_padding=t*this.SCALE/10,this.url=this.DEBUG?"http://localhost:5173":"https://showskillsspark.github.io/svsv",this.proxy=new le({api_url:this.DEBUG?"https://pyrsgagtq5.execute-api.ap-northeast-2.amazonaws.com/default/chzzkProxyTest":"https://uohwcn08lb.execute-api.ap-northeast-2.amazonaws.com/default/chzzkProxy",code:sessionStorage.getItem("svsv:proxy:code")||new URL(window.location.href).searchParams.get("code")||void 0,state:sessionStorage.getItem("svsv:proxy:state")||new URL(window.location.href).searchParams.get("state")||void 0,access_token:sessionStorage.getItem("svsv:proxy:access_token")||void 0,refresh_token:sessionStorage.getItem("svsv:proxy:refresh_token")||void 0,token_type:sessionStorage.getItem("svsv:proxy:token_type")||void 0,expires_in:sessionStorage.getItem("svsv:proxy:expires_in")||void 0,scope:sessionStorage.getItem("svsv:proxy:scope")||void 0}),this.proxy.on(qt.CHAT,s=>{const{channelId:r,senderChannelId:e,profile:n,content:a,emojis:c,messageTime:u}=s,{nickname:f,badges:p,verifiedMark:h}=n,{key:o,value:i}=c;this.emit("CHAT",{channel_id:e,nickname:f,message:a})}),this.proxy.on(qt.DONATION,s=>{const{donationType:r,channelId:e,donatorChannelId:n,donatorNickname:a,payAmount:c,donationText:u,emojis:f}=s,{key:p,value:h}=f;this.emit("DONATION",{channel_id:n,nickname:a,message:u,pay:parseInt(c)})})}set bgm(t){var s;this._bgm_key&&(t!=null&&t.key.startsWith(this._bgm_key))||(this._bgm&&this._bgm.stop(),this._bgm=t,this._bgm_key=t==null?void 0:t.key,(s=this._bgm)==null||s.play())}get volume_master(){return this._volume_master}set volume_master(t){this._volume_master=Math.max(0,Math.min(1,Number(t.toFixed(1)))),localStorage.setItem("svsv:volume:master",this._volume_master.toString()),this.emit("VOLUME_MASTER",this._volume_master)}get volume_bgm(){return this._volume_bgm}set volume_bgm(t){var s;this._volume_bgm=Math.max(0,Math.min(1,Number(t.toFixed(1)))),localStorage.setItem("svsv:volume:bgm",t.toString()),(s=this._bgm)==null||s.setVolume(t),this.emit("VOLUME_BGM",this._volume_bgm)}get volume_effect(){return this._volume_effect}set volume_effect(t){this._volume_effect=Math.max(0,Math.min(1,Number(t.toFixed(1)))),localStorage.setItem("svsv:volume:effect",t.toString()),this.emit("VOLUME_EFFECT",this._volume_effect)}}const d=new he,ct=class ct extends z.GameObjects.Container{constructor(t,s,r,e,n){super(t,s,r),this._centered=!1,this._pointerover=!1,t.add.existing(this),this.setSize(e,n)}init(t,s,r){const e=this.height*.8,n=Math.min(this.width,e);this.game_logo=s,this.game_logo.setScale(n/this.game_logo.width).setY((n-this.height)/2),this.game_logo_animation_key=r,this.game_logo.play(this.game_logo_animation_key);const a=this.height*.2;this.game_name=this.scene.add.text(0,e/2,t,{...d.style.font_style,fontSize:a}).setOrigin(.5).setPadding(d.style.font_padding),this.cover=this.scene.add.rectangle(0,0,this.width*1.1,this.height*1.1,d.style.color.grey_0,.5),this.add([this.game_logo,this.game_name,this.cover]),this.onButtonState()}get centered(){return this._centered}get pointerover(){return this._pointerover}set centered(t){this._centered=t,this.onButtonState()}set pointerover(t){var s;if(this._pointerover=t,this.onButtonState(),t){this.game_logo.anims.repeatDelay=0;let r=(s=this.game_logo.anims.currentFrame)!=null&&s.index?this.game_logo.anims.currentFrame.index%this.game_logo.anims.getTotalFrames():void 0;this.game_logo.play({key:this.game_logo_animation_key,startFrame:r,repeatDelay:ct.animation_duration/10,delay:0})}else this.game_logo.anims.repeatDelay=ct.animation_duration,this.game_logo.anims.resume();this.game_logo.anims.reverse()}onButtonState(){this._centered&&this._pointerover?(this.setScale(1.2),this.cover.setAlpha(0)):this._centered&&!this._pointerover?(this.setScale(1),this.cover.setAlpha(0)):!this._centered&&this._pointerover?(this.setScale(1),this.cover.setAlpha(1)):!this._centered&&!this._pointerover&&(this.setScale(.8),this.cover.setAlpha(1))}onpointerup(){console.error(this.game_name.text,"onpointerup is not implemented.")}onpointerdown(){this.game_logo.anims.pause()}};ct.animation_duration=1e3;let Bt=ct;var B=(m=>(m.TEAM1="TEAM1",m.TEAM2="TEAM2",m))(B||{}),Yt=(m=>(m[m.INFINITE=-1]="INFINITE",m[m.SEC_10=10]="SEC_10",m[m.SEC_20=20]="SEC_20",m[m.SEC_30=30]="SEC_30",m[m.SEC_40=40]="SEC_40",m[m.SEC_50=50]="SEC_50",m[m.SEC_60=60]="SEC_60",m[m.SEC_300=300]="SEC_300",m))(Yt||{}),$=(m=>(m.WHITE="하양",m.BLACK="검정",m.NONE="투명",m))($||{}),et=(m=>(m.CLICK="클릭",m.MOST="최다 득표",m.PROPORTIONAL="득표 비례 확률",m))(et||{}),N=(m=>(m.TEAM1="1 팀",m.TEAM2="2 팀",m.NONE="불참",m.DEFAULT="기본값",m))(N||{}),rt=(m=>(m.TEAM1="1 팀",m.TEAM2="2 팀",m.RANDOM="무작위",m))(rt||{});class Wt{constructor({name:t,timeout_index:s,disk_index:r,put_index:e}){this.timeout_list=[-1,10,20,30,40,50,60,300],this.disk_color_list=["하양","검정"],this.put_list=["클릭","최다 득표","득표 비례 확률"],this.name=t,this.timeout_index=s,this.disk_color_index=r,this.put_index=e}get timeout(){return this.timeout_list[this.timeout_index]}get disk_color(){return this.disk_color_list[this.disk_color_index]}get put(){return this.put_list[this.put_index]}nextTimeout(t){return this.timeout_index=(this.timeout_index+this.timeout_list.length+t)%this.timeout_list.length,this.timeout}nextDisk(t){return this.disk_color_index=(this.disk_color_index+this.disk_color_list.length+t)%this.disk_color_list.length,this.disk_color}nextPut(t){return this.put_index=(this.put_index+this.put_list.length+t)%this.put_list.length,this.put}}var Lt=(m=>(m[m.WALL=0]="WALL",m[m.EMPTY=1]="EMPTY",m[m.BLOCK=2]="BLOCK",m))(Lt||{}),Z=(m=>(m.SET="SET",m.PUT="PUT",m.PUT_FAIL="PUT_FAIL",m.PASS="PASS",m.END="END",m))(Z||{});class ue{constructor(t,s,r){this.team_tag=null,this.x=t,this.y=s,this.disk_color=r}}class pe{constructor(t){this.width_list=[8,10],this.height_list=[8,10],this.tiles=[],this.disks=[],this.parent=t,this.width_index=parseInt(localStorage.getItem("svsv:othello:game_board:width_index")||"0"),this.height_index=parseInt(localStorage.getItem("svsv:othello:game_board:height_index")||"0"),this.counter={TEAM1:0,TEAM2:0}}get width(){return this.width_list[this.width_index]}get height(){return this.height_list[this.height_index]}init(t,s){this.counter={TEAM1:0,TEAM2:0};for(let r=0;r<12;r++){this.tiles[r]=[],this.disks[r]=[];for(let e=0;e<12;e++)r>0&&r<=this.width&&e>0&&e<=this.height?this.tiles[r][e]=1:this.tiles[r][e]=0,this.disks[r][e]=new ue(r,e,"투명")}this.setDisk(this.width/2,this.height/2,"TEAM1",t),this.setDisk(this.width/2+1,this.height/2,"TEAM2",s),this.setDisk(this.width/2,this.height/2+1,"TEAM2",s),this.setDisk(this.width/2+1,this.height/2+1,"TEAM1",t)}setDisk(t,s,r,e,n=!0){const a=this.disks[t][s],c=a.team_tag,u=a.disk_color;this.disks[t][s].disk_color=e,this.disks[t][s].team_tag=r,this.counter[r]+=1,c&&(this.counter[c]-=1),n&&this.parent.emit("SET",t,s,u,e)}putDisk(t,s,r,e){const n=this.canPutDisk(t,s,r,e);return n.length===0?(this.parent.emit("PUT_FAIL"),!1):(this.setDisk(t,s,r,e),n.forEach(a=>{this.setDisk(a.x,a.y,r,e)}),this.parent.emit("PUT",t,s),!0)}canPutDisk(t,s,r,e){if(t<1||t>this.width||s<1||s>this.height)return[];if(this.disks[t][s].disk_color!=="투명")return[];const n=this.getFlippingDisk(t,s,0,-1,r,e,!0),a=this.getFlippingDisk(t,s,1,-1,r,e,!0),c=this.getFlippingDisk(t,s,1,0,r,e,!0),u=this.getFlippingDisk(t,s,1,1,r,e,!0),f=this.getFlippingDisk(t,s,0,1,r,e,!0),p=this.getFlippingDisk(t,s,-1,1,r,e,!0),h=this.getFlippingDisk(t,s,-1,0,r,e,!0),o=this.getFlippingDisk(t,s,-1,-1,r,e,!0);return[...n,...a,...c,...u,...f,...p,...h,...o]}getFlippingDisk(t,s,r,e,n,a,c=!1){if(this.tiles[s+e][t+r]!==1)return[];const f=c?[]:[this.disks[t][s]],p=this.disks[t+r][s+e];if(p.disk_color==="투명")return[];if(p.team_tag===n)return[...f];{const h=this.getFlippingDisk(t+r,s+e,r,e,n,a);return h.length>0?[...h,...f]:[]}}canPutDiskSet(t,s){const r=new Set;for(let e=1;e<=this.width;e++)for(let n=1;n<=this.height;n++)this.canPutDisk(e,n,t,s).length>0&&r.add(this.disks[e][n]);return r}}class de extends Kt{constructor(){super(),this.default_membership_list=["1 팀","2 팀","불참"],this.start_team_list=["1 팀","2 팀","무작위"],this.teams={},this.teams.TEAM1=new Wt({name:localStorage.getItem("svsv:othello:teams:TEAM1:name")||"1 팀",timeout_index:parseInt(localStorage.getItem("svsv:othello:teams:TEAM1:timeout_index")||"0"),disk_index:parseInt(localStorage.getItem("svsv:othello:teams:TEAM1:disk_index")||"0"),put_index:parseInt(localStorage.getItem("svsv:othello:teams:TEAM1:put_index")||"0")}),this.teams.TEAM2=new Wt({name:localStorage.getItem("svsv:othello:teams:TEAM2:name")||"2 팀",timeout_index:parseInt(localStorage.getItem("svsv:othello:teams:TEAM2:timeout_index")||"2"),disk_index:parseInt(localStorage.getItem("svsv:othello:teams:TEAM2:disk_index")||"1"),put_index:parseInt(localStorage.getItem("svsv:othello:teams:TEAM2:put_index")||"1")}),this._members={},this.default_membership_index=parseInt(localStorage.getItem("svsv:othello:default_membership_index")||"1"),this.start_team_index=parseInt(localStorage.getItem("svsv:othello:start_team_index")||"2"),this.game_board=new pe(this)}get members(){return this._members}get default_membership(){return this.default_membership_list[this.default_membership_index]}get start_team(){return this.start_team_list[this.start_team_index]}nextTeamTimeout(t,s){this.teams[t].nextTimeout(s),localStorage.setItem(`svsv:othello:teams:${t}:timeout_index`,this.teams[t].timeout_index.toString()),this.emit("teams:timeout",t,this.teams[t].timeout)}nextTeamDisk(t,s){this.teams[t].nextDisk(s),localStorage.setItem(`svsv:othello:teams:${t}:disk_index`,this.teams[t].disk_color_index.toString()),this.emit("teams:disk",t,this.teams[t].disk_color)}nextTeamPut(t,s){this.teams[t].nextPut(s),localStorage.setItem(`svsv:othello:teams:${t}:put_index`,this.teams[t].put_index.toString()),this.emit("teams:put",t,this.teams[t].put)}nextDefaultMembership(t){this.default_membership_index=(this.default_membership_index+this.default_membership_list.length+t)%this.default_membership_list.length,localStorage.setItem("svsv:othello:default_membership_index",this.default_membership_index.toString()),this.emit("default_membership",this.default_membership)}nextStartTeam(t){this.start_team_index=(this.start_team_index+this.start_team_list.length+t)%this.start_team_list.length,localStorage.setItem("svsv:othello:start_team_index",this.start_team_index.toString()),this.emit("start_team",this.start_team)}setMemberShip(t,s){this._members[t]=s??this._members[t]??"기본값",this.emit("members",t,this._members[t])}clearMemberShip(){this._members={}}}const k=new de,Nt=(m,t)=>[`${String.fromCharCode(m+65-1)}`,`${t}`],Pt=m=>{let t=-1,s=-1;return/^[a-z]\d+.*/.test(m)?(t=m[0].charCodeAt(0)-97+1,s=parseInt(m.slice(1))):/^[A-Z]\d+.*/.test(m)&&(t=m[0].charCodeAt(0)-65+1,s=parseInt(m.slice(1))),[t,s]},Vt=m=>{switch(m){case N.TEAM1:return B.TEAM1;case N.TEAM2:return B.TEAM2;case N.DEFAULT:case N.NONE:return}};class Xt extends z.GameObjects.Container{constructor(t,s,r,e,n,a){super(t,s,r),this.disk_set=new Set,this.chat_nickname_list=[],this.chat_position_list=[],this.chat_flag=new Set,this.vote={},t.add.existing(this),this.team_tag=a;const c=e/50,u=d.style.font_style.fontSize,f=t.add.graphics().lineStyle(c,d.style.color.grey_f).strokeRect(0,0,e,n);this.add(f);const p=u,h=t.add.text(e/2,p,k.teams[a].name,{...d.style.font_style}).setOrigin(.5);this.add(h);const o=p+u*2,l=k.teams[a].disk_color===$.WHITE?0:6,g=t.add.sprite(e*1/4,o,"Othello:assets",l).setScale(d.SCALE).setOrigin(.5),y=k.game_board.counter[a],_=t.add.text(e*2/3,o,y.toString(),{...d.style.font_style,fontSize:u*(.8+1.2*y/64)}).setOrigin(.5);this.add([g,_]);const v=o+u*2,C=t.add.text(e*2/5,v,"남은 시간",{...d.style.font_style,fontSize:u*2/3}).setOrigin(.5),b=k.teams[a].timeout<0?"무제한":`${k.teams[a].timeout} 초`;this.timer_text=t.add.text(e*2/5,v+u,b,{...d.style.font_style,color:d.style.color_code.green_f}).setOrigin(.5),this.pass_text=t.add.text(e*3/4,v,`턴
종
료`,{...d.style.font_style,fontSize:u*2/3,color:d.style.color_code.pink_a}).setOrigin(0,.2).setInteractive().on("pointerup",()=>{this.timer_event.repeatCount=0,this.scene.sound.play("Common:sound:select",{volume:d.volume_effect})}).on("pointerover",()=>{this.pass_text.setColor(d.style.color_code.pink_f)}).on("pointerout",()=>{this.pass_text.setColor(d.style.color_code.pink_a)}),this.add([C,this.timer_text,this.pass_text]),this.timer_event=t.time.addEvent({}),t.events.on("shutdown",()=>{t.time.removeEvent(this.timer_event)});const T=u/4,S=v+u*2,x=e-2*T,w=n-S-T,E=c/2,F=t.add.graphics().lineStyle(E,d.style.color.grey_f).strokeRect(T,S,x,w);this.add([F]);const O=T+u/8,M=11;this.chat_font_size=u/2,this.chat_nickname_width=x-this.chat_font_size*2.5;for(let L=0;L<M;L++){const mt=t.add.text(O,S+this.chat_font_size*L*1.1,"nickname",{...d.style.font_style,fontSize:this.chat_font_size}).setCrop(0,0,this.chat_nickname_width,this.chat_font_size),gt=t.add.text(O+this.chat_nickname_width+this.chat_font_size*2/3,S+this.chat_font_size*L*1.1,"A1",{...d.style.font_style,fontSize:this.chat_font_size});this.chat_nickname_list.push(mt),this.chat_position_list.push(gt)}this.add([...this.chat_nickname_list,...this.chat_position_list]),this.cover=t.add.rectangle(-E,-E,e+2*E,n+2*E,d.style.color.grey_0,.5).setOrigin(0),this.add(this.cover);const D=()=>{const L=k.game_board.counter[a];_.setText(L.toString()).setFontSize(u*(.8+1.2*L/64))};k.on(Z.SET,D),t.events.on("shutdown",()=>{k.off(Z.SET,D)}),this.clearChat()}onstartturn(t,s){this.cover.visible=!1,this.disk_set=t,this.scene.time.removeEvent(this.timer_event),this.vote={},this.timer_event=this.scene.time.addEvent({delay:(d.DEBUG,1e3),repeat:k.teams[this.team_tag].timeout,callback:()=>{if(this.timer_text.setText(k.teams[this.team_tag].timeout<0?"무제한":`${this.timer_event.repeatCount-1} 초`),this.timer_event.repeatCount>6?this.timer_text.setColor(d.style.color_code.green_f).setScale(1):this.timer_text.setColor(d.style.color_code.pink_f).setScale(1.3),this.timer_event.repeatCount===0){const r=k.teams[this.team_tag].timeout<0?"무제한":`${k.teams[this.team_tag].timeout} 초`;this.timer_text.setText(r).setColor(d.style.color_code.green_f).setScale(1),s(this.team_tag,this.disk_set,this.vote)}}}),this.clearChat()}onendturn(){this.timer_event.paused=!0,this.cover.visible=!0}clearChat(){this.chat_nickname_list.forEach(t=>t.setText("").setVisible(!1)),this.chat_position_list.forEach(t=>t.setText("").setVisible(!1)),this.chat_flag=new Set}addChat(t,s,r,e,n){if(this.chat_flag.has(t))return;this.chat_flag.add(t);const[a,c]=Nt(r,e),u=a+c;this.vote[u]?this.vote[u]+=1:this.vote[u]=1,n.setText(`${this.vote[u]}`).setVisible(!0),this.chat_nickname_list.forEach((f,p)=>{p===this.chat_nickname_list.length-1?f.setText(s).setCrop(0,0,this.chat_nickname_width,this.chat_font_size).setVisible(!0):f.setText(this.chat_nickname_list[p+1].text).setCrop(0,0,this.chat_nickname_width,this.chat_font_size).setVisible(!0)}),this.chat_position_list.forEach((f,p)=>{p===this.chat_position_list.length-1?f.setText(u).setVisible(!0):f.setText(this.chat_position_list[p+1].text).setVisible(!0)})}endGame(){this.timer_event.paused=!0}}const wt=class wt extends z.Scene{constructor(){super(wt.key),this.tiles=[],this.disks=[],this.votes=[],this.team_panels={},this.curr_turn=B.TEAM1,this.prev_pass=!1,this.is_end=!1}static preload(t){t.anims.create({key:`${$.WHITE}-${$.BLACK}`,frames:t.anims.generateFrameNumbers("Othello:assets",{start:0,end:6})}),t.anims.create({key:`${$.BLACK}-${$.WHITE}`,frames:t.anims.generateFrameNumbers("Othello:assets",{start:6,end:12})})}create(){const t=d.WIDTH/(k.game_board.width+2),s=d.HEIGHT/(k.game_board.height+2),r=Math.min(t,s)/32,e=d.HEIGHT/20;this.add.text(d.WIDTH/2,e,"스트리머 vs 시청자",{...d.style.font_style,color:d.style.color_code.green_f}).setOrigin(.5,0);const n=0,a=d.HEIGHT/20;this.back_text=this.add.text(n,a,`종
료`,{...d.style.font_style,color:d.style.color_code.pink_a}).setOrigin(.5,0).setInteractive().on("pointerup",()=>{this.sound.play("Common:sound:exit",{volume:d.volume_effect}),this.scene.start(ut.key)}).on("pointerover",()=>{this.back_text.setColor(d.style.color_code.pink_f),this.back_text.setOrigin(0,0)}).on("pointerout",()=>{this.is_end||(this.back_text.setColor(d.style.color_code.pink_a),this.back_text.setOrigin(.5,0))});const c=32*r,u=32*r,f=(d.WIDTH-c*(k.game_board.width+2))/2,p=u/2+d.style.font_style.fontSize-32*r/2,h=d.style.color.green_a,o=d.style.color.green_f;for(let x=0;x<k.game_board.width+2;x++){this.tiles[x]=[],this.disks[x]=[],this.votes[x]=[];for(let w=0;w<k.game_board.height+2;w++){const E=f+x*c,F=p+w*u;switch(k.game_board.tiles[x][w]){case Lt.EMPTY:this.tiles[x][w]=this.add.sprite(E,F,"Othello:assets",16).setOrigin(0).setScale(r).setTint(h).setToBack();const Dt=this.add.graphics().lineStyle(2*r,o).strokeRoundedRect(E,F,c,u,2*r);Dt.visible=!1,this.tiles[x][w].setInteractive().on("pointerup",()=>{k.teams[this.curr_turn].put===et.CLICK&&k.game_board.putDisk(x,w,this.curr_turn,k.teams[this.curr_turn].disk_color)}).on("pointerover",()=>{Dt.visible=!0}).on("pointerout",()=>{Dt.visible=!1});break;case Lt.WALL:let K;if(x==0)w==0?K=21:w==k.game_board.height+1?K=23:K=17;else if(x==k.game_board.width+1)w==0?K=22:w==k.game_board.height+1?K=24:K=18;else if(w==0)K=19;else if(w==k.game_board.height+1)K=20;else break;this.tiles[x][w]=this.add.sprite(E,F,"Othello:assets",K).setOrigin(0).setScale(r).setTint(h).setToBack();break}const M=k.game_board.disks[x][w];let D=13;switch(M.disk_color){case $.WHITE:D=0;break;case $.BLACK:D=6;break;case $.NONE:D=13;break}this.disks[x][w]=this.add.sprite(E,F,"Othello:assets",D).setOrigin(0).setScale(r),this.votes[x][w]=this.add.text(E+c/2,F+u/2,"0",{...d.style.font_style,fontSize:d.style.font_style.fontSize*2/3,backgroundColor:d.style.color_code.green_a}).setOrigin(.5).setVisible(!1);const L={...d.style.font_style,fontSize:d.style.font_style.fontSize*2/3,color:d.style.color_code.green_a},[mt,gt]=Nt(x,w);x===0&&w>0&&w<k.game_board.height+1&&this.add.text(E+c*3/4,F+u/2,gt,L).setOrigin(.5),w===0&&x>0&&x<k.game_board.width+1&&this.add.text(E+c/2,F+u*3/4,mt,L).setOrigin(.5),x===k.game_board.width+1&&w>0&&w<k.game_board.height+1&&this.add.text(E+c*1/4,F+u/2,gt,L).setOrigin(.5),w===k.game_board.height+1&&x>0&&x<k.game_board.width+1&&this.add.text(E+c/2,F+u*1/4,mt,L).setOrigin(.5)}}const i=c/2,l=p+u,g=(d.WIDTH-c*(k.game_board.width+3))/2,y=d.HEIGHT-(l+u/2);this.team_panels[B.TEAM1]=new Xt(this,i,l,g,y,B.TEAM1),this.team_panels[B.TEAM2]=new Xt(this,d.WIDTH-g-i,l,g,y,B.TEAM2);const _=(x,w,E,F)=>{if(E===$.NONE||E===F){const O=F===$.WHITE?0:6;this.disks[x][w].setFrame(O).setTint(d.style.color.grey_f)}else this.disks[x][w].anims.play(`${E}-${F}`)},v=(x,w)=>{if(this.curr_turn===B.TEAM1&&k.members[d.proxy.channel_id]===N.TEAM1||this.curr_turn===B.TEAM2&&k.members[d.proxy.channel_id]===N.TEAM2){const[E,F]=Nt(x,w);d.proxy.message=E+F}this.sound.play("Common:sound:open_menu",{volume:d.volume_effect}),this.nextTurn()},C=()=>{this.sound.play("Common:sound:close_menu",{volume:d.volume_effect})};k.on(Z.SET,_),k.on(Z.PUT,v),k.on(Z.PUT_FAIL,C),this.events.on("shutdown",()=>{k.off(Z.SET,_),k.off(Z.PUT,v),k.off(Z.PUT_FAIL,C)});const b=({channel_id:x,nickname:w,message:E})=>{const[F,O]=Pt(E);k.setMemberShip(x);const M=k.members[x]===N.DEFAULT?k.default_membership:k.members[x],D=Vt(M);if(D!==void 0&&this.curr_turn===D)for(const L of this.team_panels[D].disk_set)L.x===F&&L.y===O&&this.team_panels[D].addChat(x,w,F,O,this.votes[F][O])};d.on(X.CHAT,b),d.on(X.DONATION,b),this.events.on("shutdown",()=>{d.off(X.CHAT,b),d.off(X.DONATION,b)});const T=["battle1","battle2","battle3"],S=T[Math.floor(Math.random()*T.length)];switch(d.bgm=d.bgm_map["bgm:"+S+":intro"],k.start_team){case rt.TEAM1:this.setTurn(B.TEAM1);break;case rt.TEAM2:this.setTurn(B.TEAM2);break;case rt.RANDOM:const x=[B.TEAM1,B.TEAM2];this.setTurn(x[Math.round(Math.random())]);break}}putDisk(t,s,r){let e=!1;if(k.teams[t].put===et.MOST&&Object.keys(r).length>0){let n=0,a="";for(const f in r){const p=r[f];n<p?(n=p,a=f):p===n&&Math.random()<.5&&(a=f)}const[c,u]=Pt(a);e=k.game_board.putDisk(c,u,t,k.teams[t].disk_color)}else if(k.teams[t].put===et.PROPORTIONAL&&Object.keys(r).length>0){const n=[];for(const f in r)for(let p=0;p<r[f];p++)n.push(f);const a=n[Math.floor(Math.random()*n.length)],[c,u]=Pt(a);e=k.game_board.putDisk(c,u,t,k.teams[t].disk_color)}if(k.teams[t].put===et.CLICK||Object.keys(r).length===0||!e){const n=[...s][Math.floor(Math.random()*s.size)];k.game_board.putDisk(n.x,n.y,t,k.teams[t].disk_color)}}setTurn(t){const s=k.teams[t].disk_color,r=k.game_board.canPutDiskSet(t,s);if(r.size>0){this.team_panels[this.curr_turn].onendturn(),this.team_panels[t].onstartturn(r,(e,n,a)=>{this.putDisk(e,n,a)}),this.curr_turn=t,this.prev_pass=!1;for(let e=1;e<=k.game_board.width;e++)for(let n=1;n<=k.game_board.height;n++)r.has(k.game_board.disks[e][n])?this.disks[e][n].setFrame(14).setTint(d.style.color.green_a):k.game_board.disks[e][n].disk_color===$.NONE&&this.disks[e][n].setFrame(13),this.votes[e][n].setVisible(!1)}else this.prev_pass?this.endGame():(this.prev_pass=!0,this.setTurn(this.curr_turn))}nextTurn(){const t=this.curr_turn===B.TEAM1?B.TEAM2:B.TEAM1;this.setTurn(t)}endGame(){for(let r=1;r<=k.game_board.width;r++)for(let e=1;e<=k.game_board.height;e++)k.game_board.disks[r][e].disk_color===$.NONE&&this.disks[r][e].setFrame(13);const t=Vt(k.members[d.proxy.channel_id]),s=t===B.TEAM1?B.TEAM2:B.TEAM1;if(!t)d.bgm=d.bgm_map["bgm:victory:intro"];else{const r=k.game_board.counter[t],e=k.game_board.counter[s];r/2>e?d.bgm=d.bgm_map["bgm:victory2:intro"]:r>e?d.bgm=d.bgm_map["bgm:victory:intro"]:r===e?d.bgm=d.bgm_map["bgm:draw:intro"]:r*2>e?d.bgm=d.bgm_map["bgm:defeat:intro"]:d.bgm=d.bgm_map["bgm:defeat2:intro"]}this.team_panels[B.TEAM1].endGame(),this.team_panels[B.TEAM2].endGame(),this.is_end=!0,this.back_text.setColor(d.style.color_code.pink_f),this.back_text.setOrigin(0,0)}};wt.key="OthelloGameScene";let ht=wt;class Ut extends z.GameObjects.Container{constructor(t,s,r){super(t,s,r),t.add.existing(this)}}class fe extends Ut{constructor(t,s,r,e,{label:n="label",value:a="value"}){super(t,s,r);const c=e*1/10,u=this.scene.add.text(c,0,n,{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5,0).setPadding(d.style.font_padding);this.add(u);const f=e*6/10;this.value_text=this.scene.add.text(f,0,a,{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5,0).setPadding(d.style.font_padding),this.add(this.value_text),this.scene.add.graphics()}}class me extends Ut{constructor(t,s,r,e,{label:n="label",value:a="value",on_left_button_click:c,on_right_button_click:u}){super(t,s,r);const f=e*1/10,p=this.scene.add.text(f,0,n,{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5,0).setPadding(d.style.font_padding);this.add(p);const h=e*6/10;this.value_text=this.scene.add.text(h,0,a,{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5,0).setPadding(d.style.font_padding),this.add(this.value_text);const o=e*3/10,i=this.scene.add.sprite(o,0,"Common:button_header").setOrigin(.5,.25).setScale(d.SCALE).setFlipX(!0).setTint(d.style.color.grey_a).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),c==null||c()}).on("pointerover",()=>{i.setTint(d.style.color.grey_4)}).on("pointerout",()=>{i.setTint(d.style.color.grey_a)}),l=e*9/10,g=this.scene.add.sprite(l,0,"Common:button_header").setOrigin(.5,.25).setScale(d.SCALE).setTint(d.style.color.grey_a).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),u==null||u()}).on("pointerover",()=>{g.setTint(d.style.color.grey_4)}).on("pointerout",()=>{g.setTint(d.style.color.grey_a)});this.add([i,g])}setValueText(t){this.value_text.setText(t)}}class ge extends Ut{constructor(t,s,r,e,n,{height:a}){super(t,s,r),this.page_index=0,this.page_count=1,this.users=[],this.nicknames=[],this.users_flag=new Set,this.per_page=16,this.nickname_text=[],this.team_text=[];const c=e/200,u=t.add.graphics().lineStyle(c*2,8947848).strokeRect(-c,-c,e+2*c,n+2*c);this.add(u);const f=h=>{switch(h){case N.DEFAULT:return N.TEAM1;case N.TEAM1:return N.TEAM2;case N.TEAM2:return N.NONE;case N.NONE:return N.DEFAULT}};this.font_size=d.style.font_style.fontSize,this.nickname_text_width=e*8/20;for(let h=0;h<this.per_page/2;h++)for(let o=0;o<2;o++){(h+o)%2&&this.add(t.add.graphics().fillStyle(d.style.color.grey_f).fillRect(e*o/2,this.font_size*h,e/2,this.font_size));const i=t.add.text((e*o+e*1/20)/2,this.font_size*(h+.5),"nickname",{...d.style.font_style,color:d.style.color_code.grey_0}).setScale(.8).setOrigin(0,.5).setCrop(0,0,this.nickname_text_width,this.font_size);this.nickname_text.push(i);const l=t.add.text((e*o+e*15/20)/2+this.font_size,this.font_size*(h+.5),N.TEAM1,{...d.style.font_style,color:d.style.color_code.green_f}).setScale(.8).setOrigin(.5,.5).setTint(d.style.color.grey_a);l.setInteractive().on("pointerup",()=>{const g=this.page_index*this.per_page+2*h+o,y=this.users[g];this.nicknames[g];const _=k.members[y],v=f(_);k.setMemberShip(y,v),this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),l.setText(v)}).on("pointerover",()=>{l.setTint(d.style.color.grey_4)}).on("pointerout",()=>{l.setTint(d.style.color.grey_a)}),this.team_text.push(l)}this.add(this.nickname_text),this.add(this.team_text);const p=n+d.style.font_style.fontSize/2;this.page_text=t.add.text(e/2,p,` ${this.page_index} / ${this.page_count} `,{...d.style.font_style,backgroundColor:d.style.color_code.grey_0}).setOrigin(.5,0),this.add(this.page_text),this.left_button=t.add.sprite(e*2/6,p,"Common:button_header").setTint(d.style.color.grey_a).setOrigin(.5,.25).setScale(d.SCALE).setFlipX(!0),this.left_button.setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),this.movePage(-1)}).on("pointerover",()=>{this.left_button.setTint(d.style.color.grey_4)}).on("pointerout",()=>{this.left_button.setTint(d.style.color.grey_a)}),this.right_button=t.add.sprite(e*4/6,p,"Common:button_header").setTint(d.style.color.grey_a).setOrigin(.5,.25).setScale(d.SCALE),this.right_button.setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),this.movePage(1)}).on("pointerover",()=>{this.right_button.setTint(d.style.color.grey_4)}).on("pointerout",()=>{this.right_button.setTint(d.style.color.grey_a)}),this.add([this.left_button,this.right_button]),this.addUser(d.proxy.channel_id,d.proxy.nickname??"방장")}addUser(t,s){this.users_flag.has(t)||(this.users.push(t),this.nicknames.push(s),this.users_flag.add(t),k.setMemberShip(t,d.proxy.channel_id===t?N.TEAM1:N.DEFAULT),this.page_count=Math.ceil(this.users.length/this.per_page),this.page_text.setText(` ${this.page_index+1} / ${this.page_count} `),this.updateTable())}movePage(t){this.page_index=Math.max(0,Math.min(this.page_count-1,this.page_index+t)),this.page_text.setText(` ${this.page_index+1} / ${this.page_count} `),this.updateTable()}updateTable(){for(let t=0;t<this.per_page;t++){const s=this.nickname_text[t],r=this.team_text[t],e=this.per_page*this.page_index+t,n=this.users[e],a=this.nicknames[e],c=k.members[n];a?(s.setText(a).setCrop(0,0,this.nickname_text_width,this.font_size).setVisible(!0),r.setText(c).setVisible(!0)):(s.setVisible(!1),r.setVisible(!1))}}}class zt extends z.GameObjects.Container{constructor(t,s,r){super(t),this.option_count=0,this._selected=!1,this.onselect=()=>{},this.onunselect=()=>{},this.scene.add.existing(this);const e=d.WIDTH/20,n=d.HEIGHT/20;this.round=d.WIDTH/100,this.tag_width=d.WIDTH*9/10/5,this.tag_height=d.style.font_style.fontSize*2,this.tag_x_offset=e+r*this.tag_width,this.tag_y_offset=n,this.tag_background=t.add.graphics(),this.add(this.tag_background);const a=t.add.zone(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height).setOrigin(0).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),this.select=!0}).on("pointerover",()=>{this._selected||this.tag_background.fillStyle(d.style.color.grey_a).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round)}).on("pointerout",()=>{this._selected||this.tag_background.fillStyle(d.style.color.grey_6).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round)});this.add(a),this.tag_text_x_offset=e+this.tag_width/2+r*this.tag_width,this.tag_text_y_offset=this.tag_y_offset+this.tag_height/2,this.tag_text=t.add.text(this.tag_text_x_offset,this.tag_text_y_offset,s,d.style.font_style).setOrigin(.5).setPadding(d.style.font_padding),this.add(this.tag_text),this.panel_x_offset=e,this.panel_y_offset=this.tag_y_offset+this.tag_height,this.panel_width=d.WIDTH*9/10,this.panel_height=d.HEIGHT*9/10-this.panel_y_offset+n,this.panel_background=t.add.graphics().fillStyle(d.style.color.grey_e).fillRoundedRect(this.panel_x_offset,this.panel_y_offset,this.panel_width,this.panel_height,this.round),this.add(this.panel_background);const c=t.add.zone(this.panel_x_offset,this.panel_y_offset,this.panel_width,this.panel_height).setOrigin(0).setInteractive();this.add(c),this.select=!1}getOptionPosition(t=1){const s=this.panel_x_offset+this.panel_width/20,r=this.panel_y_offset+this.panel_height/20+this.option_count*d.style.font_style.fontSize*2,e=d.WIDTH-2*s,n=t*d.style.font_style.fontSize*2;return{option_x_offset:s,option_y_offset:r,option_width:e,option_height:n}}addTextOption({label:t,value:s}){const{option_x_offset:r,option_y_offset:e,option_width:n}=this.getOptionPosition();this.option_count+=1;const a=new fe(this.scene,r,e,n,{label:t,value:s});return this.add(a),a}addListOption({label:t,value:s,on_left_button_click:r,on_right_button_click:e}){const{option_x_offset:n,option_y_offset:a,option_width:c}=this.getOptionPosition();this.option_count+=1;const u=new me(this.scene,n,a,c,{label:t,value:s,on_left_button_click:r,on_right_button_click:e});return this.add(u),u}addPageOption({height:t=1}){const{option_x_offset:s,option_y_offset:r,option_width:e,option_height:n}=this.getOptionPosition(t);this.option_count+=t;const a=new ge(this.scene,s,r,e,n,{height:t});return this.add(a),a}addText({height:t=1,value:s}){const{option_x_offset:r,option_y_offset:e,option_width:n,option_height:a}=this.getOptionPosition(t);this.option_count+=t;const c=this.scene.add.text(r,e,s??"[ERROR] empty text",{...d.style.font_style,color:d.style.color_code.grey_0,wordWrap:{width:n},align:"left"}).setOrigin(0,0);return this.add(c),c}set select(t){t?(this.tag_background.fillStyle(d.style.color.grey_e).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round),this.tag_text.setTint(d.style.color.grey_0),this.setToTop(),this.onselect()):(this.tag_background.fillStyle(d.style.color.grey_6).fillRoundedRect(this.tag_x_offset,this.tag_y_offset,this.tag_width,this.tag_height*2,this.round),this.tag_text.setTint(d.style.color.grey_f),this.onunselect()),this._selected=t}}class Gt extends zt{constructor(t,s,r,e){super(t,e,r);const n=k.teams[s].timeout<0?"무제한":`${k.teams[s].timeout} 초`,a=this.addListOption({label:"제한시간",value:n,on_left_button_click:()=>{k.nextTeamTimeout(s,-1)},on_right_button_click:()=>{k.nextTeamTimeout(s,1)}}),c=this.addListOption({label:"색깔",value:k.teams[s].disk_color,on_left_button_click:()=>{k.nextTeamDisk(s,-1)},on_right_button_click:()=>{k.nextTeamDisk(s,1)}}),u=this.addListOption({label:"놓는방식",value:k.teams[s].put,on_left_button_click:()=>{k.nextTeamPut(s,-1)},on_right_button_click:()=>{k.nextTeamPut(s,1)}}),f=()=>{let l="※ ";switch(k.teams[s].timeout){case Yt.INFINITE:l+="시간 제한 없이 ";break;default:l+=`${k.teams[s].timeout} 초가 지나면 `;break}switch(l+=`${k.teams[s].disk_color} 말을 `,k.teams[s].put){case et.CLICK:l+="클릭한 곳에 ";break;case et.MOST:l+="가장 많은 표를 받은 곳에 ";break;case et.PROPORTIONAL:l+="투표 수에 비례하여 확률적으로 ";break}return l+="놓습니다.",l},p=this.addText({value:f()});k.on("teams:timeout",()=>{p.setText(f())}),k.on("teams:disk",()=>{p.setText(f())}),k.on("teams:put",()=>{p.setText(f())});const h=(l,g)=>{if(s===l){const y=g<0?"무제한":`${g} 초`;a.setValueText(y)}},o=(l,g)=>{s===l&&c.setValueText(g)},i=(l,g)=>{s===l&&u.setValueText(g)};k.on("teams:timeout",h),k.on("teams:disk",o),k.on("teams:put",i),this.scene.events.on("shutdown",()=>{k.off("teams:timeout",h),k.off("teams:disk",o),k.off("teams:put",i)})}}class ye extends zt{constructor(t,s){super(t,"팀원",s);const r=this.addListOption({label:"기본값",value:k.default_membership,on_left_button_click:()=>k.nextDefaultMembership(-1),on_right_button_click:()=>k.nextDefaultMembership(1)}),e=this.addPageOption({height:4}),n=c=>{r.setValueText(c)};k.on("default_membership",n);const a=({channel_id:c,nickname:u,message:f})=>{e.addUser(c,u)};d.on(X.CHAT,a),d.on(X.DONATION,a),t.events.on("shutdown",()=>{k.off("default_membership",n),d.off(X.CHAT,a),d.off(X.DONATION,a)})}}class _e extends zt{constructor(t,s,r){super(t,"리버시",s),this.tag_text.setColor(d.style.color_code.green_f);const e=this.addListOption({label:"누구부터",value:k.start_team,on_left_button_click:()=>k.nextStartTeam(-1),on_right_button_click:()=>k.nextStartTeam(1)}),n=()=>{let f="";switch(k.start_team){case rt.TEAM1:case rt.TEAM2:f+=`※ ${k.start_team}부터 시작합니다.

`;case rt.RANDOM:f+=`※ 랜덤으로 시작 팀을 정합니다.

`}return f+=`※ 시청자는 채팅으로 참여할 수 있습니다.
예시) D3, e6 처럼 대소문자 구분없이 붙여 씁니다.`,f},a=this.addText({value:n()}),c=this.scene.add.text(this.panel_x_offset+this.panel_width/2,this.panel_y_offset+this.panel_height*3/4,"드가자!",{...d.style.font_style,fontSize:d.style.font_style.fontSize*2,color:d.style.color_code.green_a}).setOrigin(.5).setInteractive().on("pointerup",()=>{this.scene.sound.play("Common:sound:shop",{volume:d.volume_effect}),r()}).on("pointerover",()=>{c.setColor(d.style.color_code.grey_4)}).on("pointerout",()=>{c.setColor(d.style.color_code.green_a)});this.add(c);const u=f=>{e.setValueText(f),a.setText(n())};k.on("start_team",u),this.scene.events.on("shutdown",()=>{k.off("start_team",u)})}}const Tt=class Tt extends z.Scene{constructor(){super(Tt.key),this.startGameScene=()=>{k.game_board.init(k.teams[B.TEAM1].disk_color,k.teams[B.TEAM2].disk_color),this.scene.start(ht.key)}}create(){d.bgm=d.bgm_map["bgm:login:intro"],k.clearMemberShip();const t=new Gt(this,B.TEAM1,0,N.TEAM1),s=new Gt(this,B.TEAM2,1,N.TEAM2),r=new ye(this,2.5),e=new _e(this,4,this.startGameScene),n=0,a=d.HEIGHT/20,c=this.add.text(n,a,`뒤
로`,{...d.style.font_style,color:d.style.color_code.pink_a,backgroundColor:d.style.color_code.grey_0}).setOrigin(.5,0).setInteractive().on("pointerup",()=>{this.sound.play("Common:sound:exit",{volume:d.volume_effect}),this.scene.start(pt.key)}).on("pointerover",()=>{c.setColor(d.style.color_code.pink_f),c.setOrigin(0,0)}).on("pointerout",()=>{c.setColor(d.style.color_code.pink_a),c.setOrigin(.5,0)});t.onselect=()=>{s.select=!1,r.select=!1,e.select=!1},s.onselect=()=>{t.select=!1,r.select=!1,e.select=!1},r.onselect=()=>{t.select=!1,s.select=!1,e.select=!1},e.onselect=()=>{t.select=!1,s.select=!1,r.select=!1},t.select=!0}};Tt.key="OthelloSettingScene";let ut=Tt;const lt=class lt extends Bt{static preload(t){t.anims.create({key:lt.game_logo_animation_key,frames:t.anims.generateFrameNumbers("Othello:assets",{start:32,end:44}),duration:this.animation_duration,repeat:-1,repeatDelay:this.animation_duration*2,delay:this.animation_duration*Math.random()*2})}constructor(t,s,r,e,n){super(t,s,r,e,n),this.scene=t;const a=this.scene.add.sprite(0,0,"Othello:assets",32);super.init("오델로",a,lt.game_logo_animation_key)}onpointerup(){this.scene.sound.play("Common:sound:pause",{volume:d.volume_effect}),this.scene.scene.start(ut.key)}};lt.game_logo_animation_key="OthelloSelectGameButton:animation";let vt=lt;const Mt="2025.06.23.2100",St=class St extends z.Scene{constructor(){super(St.key)}create(){this.add.text(0,d.HEIGHT,Mt,{...d.style.font_style}).setOrigin(0,1);const t=d.HEIGHT/20;this.add.text(d.WIDTH/2,t,"스트리머 vs 시청자",{...d.style.font_style,color:d.style.color_code.green_f}).setOrigin(.5,0);const s=d.WIDTH*.2,r=d.HEIGHT*.5,e=[vt].map((l,g)=>new l(this,d.WIDTH*(1/2+g*3/10),d.HEIGHT/2,s,r)),n=s,a=r,c=d.WIDTH*.3,u=this.add.zone(d.WIDTH/2-c,d.HEIGHT/2,n,a).setOrigin(.5),f=this.add.zone(d.WIDTH/2,d.HEIGHT/2,n,a).setOrigin(.5),p=this.add.zone(d.WIDTH/2+c,d.HEIGHT/2,n,a).setOrigin(.5),h=(l,g,y)=>{l<0||l>=e.length||(e[l].centered=g,e[l].pointerover=y)},o=(l,g,y)=>{l<0||l>=e.length||(e[l].centered=g,e[l].pointerover=y)};let i=0;u.setInteractive().on("pointerup",()=>{i!==0&&e.forEach((l,g)=>{l.setPosition(l.x+c,l.y),l.centered=i-1==g,l.pointerover=i-2==g}),i=Math.max(i-1,0)}).on("pointerdown",()=>{}).on("pointerover",()=>{i>0&&this.sound.play("Common:sound:cancel",{volume:d.volume_effect}),h(i-1,!1,!0)}).on("pointerout",()=>{o(i-1,!1,!1)}),f.setInteractive().on("pointerup",()=>{e[i].onpointerup()}).on("pointerdown",()=>{e[i].onpointerdown()}).on("pointerover",()=>{this.sound.play("Common:sound:cancel",{volume:d.volume_effect}),h(i,!0,!0)}).on("pointerout",()=>{o(i,!0,!1)}),p.setInteractive().on("pointerup",()=>{i!==e.length-1&&e.forEach((l,g)=>{l.setPosition(l.x-c,l.y),l.centered=i+1==g,l.pointerover=i+2==g}),i=Math.min(i+1,e.length-1)}).on("pointerdown",()=>{}).on("pointerover",()=>{i<e.length-1&&this.sound.play("Common:sound:cancel",{volume:d.volume_effect}),h(i+1,!1,!0)}).on("pointerout",()=>{o(i+1,!1,!1)}),e[i].centered=!0}};St.key="SelectGameScene";let pt=St;const At=class At extends z.Scene{constructor(){super(At.key)}init(){this.add.text(0,d.HEIGHT,Mt,{...d.style.font_style}).setOrigin(0,1),this.add.text(d.WIDTH/2,d.HEIGHT/2,"Loading...",{...d.style.font_style}).setOrigin(.5)}preload(){this.load.spritesheet("Othello:assets","assets/Games/Othello/Othello.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("Common:button_header","assets/Common/button_header.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("Common:button_close","assets/Common/button_close.png",{frameWidth:32,frameHeight:32}),this.load.setPath("assets/Common/"),this.load.audio("bgm:battle1:intro","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/And The Journey Begins/xDeviruchi - And The Journey Begins (Intro).wav"),this.load.audio("bgm:battle1","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/And The Journey Begins/xDeviruchi - And The Journey Begins (Loop).wav"),this.load.audio("bgm:battle2:intro","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Exploring The Unknown/xDeviruchi - Exploring The Unknown (Intro).wav"),this.load.audio("bgm:battle2","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Exploring The Unknown/xDeviruchi - Exploring The Unknown (Loop).wav"),this.load.audio("bgm:battle3:intro","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Prepare for Battle!/xDeviruchi - Prepare for Battle! (Intro).wav"),this.load.audio("bgm:battle3","xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Prepare for Battle!/xDeviruchi - Prepare for Battle! (Loop).wav"),this.load.audio("bgm:victory:intro","xDeviruchi - 16 bit Fantasy & Adventure (2025)/06 - Victory!.mp3"),this.load.audio("bgm:victory2:intro","xDeviruchi - 16 bit Fantasy & Adventure (2025)/11 - The Mighty Kingdom.mp3"),this.load.audio("bgm:draw:intro","xDeviruchi - 16 bit Fantasy & Adventure (2025)/16 - The Calm Before The Storm.mp3"),this.load.audio("bgm:defeat:intro","xDeviruchi - 16 bit Fantasy & Adventure (2025)/18 - Never Give Up.mp3"),this.load.audio("bgm:defeat2:intro","xDeviruchi - 16 bit Fantasy & Adventure (2025)/10 - Lost Shrine.mp3")}create(){vt.preload(this),ht.preload(this);for(const t of["battle1","battle2","battle3"]){const s=this.sound.add(`bgm:${t}:intro`,{volume:d.volume_bgm});s.on("complete",()=>{d.bgm=this.sound.add(`bgm:${t}`,{loop:!0,volume:d.volume_bgm})}),d.bgm_map[`bgm:${t}:intro`]=s}for(const t of["victory","victory2","draw","defeat","defeat2"]){const s=this.sound.add(`bgm:${t}:intro`,{volume:d.volume_bgm});d.bgm_map[`bgm:${t}:intro`]=s}this.scene.start(pt.key)}};At.key="PreloadScene";let bt=At;const Et=class Et extends z.Scene{constructor(){super(Et.key)}preload(){this.load.audio("select","assets/Common/SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_MenuSelections.mp3"),this.load.audio("confirm","assets/Common/SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Confirm.mp3"),this.load.audio("bgm:login:intro","assets/Common/xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Take some rest and eat some food!/xDeviruchi - Take some rest and eat some food! (Intro).wav"),this.load.audio("bgm:login","assets/Common/xDeviruchi - 8-bit Fantasy  & Adventure Music (2021)/Separated Files/Take some rest and eat some food!/xDeviruchi - Take some rest and eat some food! (Loop).wav")}async create(){this.add.text(0,d.HEIGHT,Mt,{...d.style.font_style}).setOrigin(0,1);const t=this.sound.add("bgm:login:intro",{volume:d.volume_bgm});t.on("complete",()=>{d.bgm=this.sound.add("bgm:login",{loop:!0,volume:d.volume_bgm})}),d.bgm_map["bgm:login:intro"]=t,d.bgm=d.bgm_map["bgm:login:intro"];const s=d.proxy,r=this.add.text(d.WIDTH/2,d.HEIGHT*1/2,"",d.style.font_style).setOrigin(.5).setPadding(d.style.font_padding),e=this.add.text(d.WIDTH/2,d.HEIGHT*2/3,"",d.style.font_style).setOrigin(.5).setPadding(d.style.font_padding).setTint(d.style.color.green_a);s.access_token?s.connect().then(()=>{this.scene.start(bt.key)}).catch(()=>{this.clearSession(),r.setText(`
[에러] 서비스 연결에 실패했습니다.

잠시 후 재시도합니다.
`);let n=60;e.setText(`${n}초`),this.time.addEvent({delay:1e3,callback:()=>{n-=1,n==0&&window.open(d.url,"_self"),e.setText(`${n}초`)},repeat:n})}):s.code?s.createAccessToken().then(()=>{sessionStorage.setItem("svsv:proxy:access_token",s.access_token),sessionStorage.setItem("svsv:proxy:refresh_token",s.refresh_token),sessionStorage.setItem("svsv:proxy:token_type",s.token_type),sessionStorage.setItem("svsv:proxy:expires_in",s.expires_in.toString()),sessionStorage.setItem("svsv:proxy:scope",s.scope),window.open(d.url,"_self")}).catch(()=>{this.clearSession(),r.setText(`
[에러] 토큰 발급에 실패했습니다.

잠시 후 재시도합니다.
`);let n=60;e.setText(`${n}초`),this.time.addEvent({delay:1e3,callback:()=>{n-=1,n==0&&window.open(d.url,"_self"),e.setText(`${n}초`)},repeat:n})}):(r.setText(`[안내] 치지직 API 사용 권한이 필요합니다.

아래 버튼을 눌러 동의해주세요.
`),e.setText("오케이!"),e.setInteractive({cursor:"pointer"}).on("pointerover",()=>{e.setTint(d.style.color.green_f),this.sound.play("select",{volume:d.volume_effect})}).on("pointerout",()=>{e.setTint(d.style.color.green_a)}).on("pointerup",()=>{const n=d.DEBUG?"e6865229-3d57-4a2a-9cbf-98b47198a3c9":"e04f347f-43a8-4efe-a75c-48fc210f174d",a=d.url,u=`https://chzzk.naver.com/account-interlock?clientId=${n}&redirectUri=${a}&state=skills`;sessionStorage.setItem("svsv:proxy:client_id",n),sessionStorage.setItem("svsv:proxy:redirect_uri",a),this.sound.play("confirm",{volume:d.volume_effect}),window.open(u,"_self")}))}clearSession(){sessionStorage.getItem("svsv:proxy:code"),sessionStorage.getItem("svsv:proxy:state"),sessionStorage.getItem("svsv:proxy:access_token"),sessionStorage.getItem("svsv:proxy:refresh_token"),sessionStorage.getItem("svsv:proxy:token_type"),sessionStorage.getItem("svsv:proxy:expires_in"),sessionStorage.getItem("svsv:proxy:scope")}};Et.key="LoginScene";let Ct=Et;class Zt extends z.GameObjects.Container{constructor(t,s,r,e,n,a){super(t,s,r),t.add.existing(this),this.setSize(e,n).setVisible(!1),this.tag=a,this.tag_label=a.text;const c=d.WIDTH/100,u=t.add.graphics().fillStyle(d.style.color.grey_e).fillRoundedRect(0,0,e,n,c);this.add(u),this.tag.setInteractive().on("pointerup",()=>{this.toggle()}).on("pointerover",()=>{this.tag.setOrigin(1,0)}).on("pointerout",()=>{this.visible||this.tag.setOrigin(.5,0)})}toggle(t){var r;const s=t??!this.visible;this.visible!==s&&(this.setVisible(s),this.visible?(this.scene.sound.play("Common:sound:shop",{volume:d.volume_effect}),this.tag.setText(`닫
기`).setColor(d.style.color_code.pink_f)):(this.scene.sound.play("Common:sound:exit",{volume:d.volume_effect}),this.tag.setText(this.tag_label).setColor(d.style.color_code.grey_f)),(r=this.ontoggle)==null||r.call(this,this.visible))}}class ve extends Zt{constructor(t,s,r,e,n,a){super(t,s,r,e,n,a);const c=this.addRow(this.height*3/8,"마스터",d.volume_master,()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),d.volume_master-=.1},()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),d.volume_master+=.1}),u=this.addRow(this.height*4/8,"배경음악",d.volume_bgm,()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),d.volume_bgm-=.1},()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),d.volume_bgm+=.1}),f=this.addRow(this.height*5/8,"효과음",d.volume_effect,()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),d.volume_effect-=.1},()=>{this.scene.sound.play("Common:sound:cancel",{volume:d.volume_effect}),d.volume_effect+=.1});d.on(X.VOLUME_MASTER,()=>{c.setText((d.volume_master*10).toFixed(0))}),d.on(X.VOLUME_BGM,()=>{u.setText((d.volume_bgm*10).toFixed(0))}),d.on(X.VOLUME_EFFECT,()=>{f.setText((d.volume_effect*10).toFixed(0))})}addRow(t,s,r,e,n){const a=this.width*1/3,c=this.width*2/3,u=c-this.width/10,f=c+this.width/10,p=this.scene.add.text(a,t,s,{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5),h=this.scene.add.text(u,t,"-",{...d.style.font_style,color:d.style.color_code.green_a}).setOrigin(.5).setInteractive().on("pointerup",()=>{e()}).on("pointerover",()=>{h.setColor(d.style.color_code.grey_4)}).on("pointerout",()=>{h.setColor(d.style.color_code.green_a)}),o=this.scene.add.text(f,t,"+",{...d.style.font_style,color:d.style.color_code.green_a}).setOrigin(.5).setInteractive().on("pointerup",()=>{n()}).on("pointerover",()=>{o.setColor(d.style.color_code.grey_4)}).on("pointerout",()=>{o.setColor(d.style.color_code.green_a)}),i=this.scene.add.text(c,t,(r*10).toFixed(0),{...d.style.font_style,color:d.style.color_code.grey_0}).setOrigin(.5);return this.add([p,h,o,i]),i}}class be extends Zt{constructor(t,s,r,e,n,a){super(t,s,r,e,n,a);const c=this.width*1/4,u=this.width*2/4,f=this.width*3/4,p=e/7,h=n/7;let o=0;this.addText(c,p+o*h,"기획/개발/그림",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addText(u,p+o*h,"실력발휘",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addLogo(f,p+o*h,"credit:logo:github","https://github.com/ShowSkillsSpark"),this.addLogo(f+90,p+o*h,"credit:logo:youtube","https://www.youtube.com/@%EC%8B%A4%EB%A0%A5%EB%B0%9C%ED%9C%98"),this.addLogo(f+240,p+o*h,"credit:logo:toon","https://toon.at/donate/skill"),o+=1,this.addText(c,p+o*h,"배경음악",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addText(u,p+o*h,"xDeviruchi",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addLogo(f,p+o*h,"credit:logo:itch","https://itch.io/profile/xdeviruchi"),this.addLogo(f+90,p+o*h,"credit:logo:youtube","https://www.youtube.com/channel/UC-co0iNy2WkUNHCtQZUHQIg"),o+=1,this.addText(c,p+o*h,"효과음",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addText(u,p+o*h,"SoupTonic",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addLogo(f,p+o*h,"credit:logo:itch","https://itch.io/profile/souptonic"),o+=1,this.addText(c,p+o*h,"폰트",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addText(u,p+o*h,"둥근모꼴+ Fixedsys",{...d.style.font_style,color:d.style.color_code.grey_0}),this.addLogo(f,p+o*h,"credit:logo:link","https://cactus.tistory.com/193")}addText(t,s,r,e){const n=this.scene.add.text(t,s,r,e).setOrigin(.5);return this.add(n),n}addLogo(t,s,r,e){const n=this.scene.add.image(t,s,r).setOrigin(.5),c=d.style.font_style.fontSize/n.height;return n.setScale(c).setInteractive({cursor:"pointer"}).on("pointerup",()=>{window.open(e,"_blank")}),this.add([n]),n}}const Ft=class Ft extends z.Scene{constructor(){super(Ft.key)}preload(){this.load.setPath("assets/Common/Sidebar/"),this.load.image("credit:logo:github","github-mark.svg"),this.load.image("credit:logo:itch","itchio-textless-black.svg"),this.load.image("credit:logo:link","link_32dp.svg"),this.load.image("credit:logo:toon","toonation-symbol.png"),this.load.image("credit:logo:youtube","yt_logo_mono_light.png")}create(){const t=d.WIDTH/20,s=d.HEIGHT/20,r=d.WIDTH*9/10,e=d.HEIGHT*9/10,n=this.add.zone(0,0,d.WIDTH,d.HEIGHT).setOrigin(0).setVisible(!1).setInteractive().on("pointerup",()=>{}),a=this.add.text(d.WIDTH,s,`소
리`,{...d.style.font_style,backgroundColor:d.style.color_code.grey_0}).setOrigin(.5,0),c=new ve(this,t,s,r,e,a),u=this.add.text(d.WIDTH,s+a.height,`제
공`,{...d.style.font_style,backgroundColor:d.style.color_code.grey_0}).setOrigin(.5,0),f=new be(this,t,s,r,e,u),p=[c,f];c.ontoggle=h=>{if(h)f.toggle(!1),n.visible=!0;else{for(const o of p)o.visible&&(n.visible=!0);n.visible=!1}},f.ontoggle=h=>{if(h)c.toggle(!1),n.visible=!0;else{for(const o of p)o.visible&&(n.visible=!0);n.visible=!1}}}};Ft.key="SidebarScene";let xt=Ft;const It=class It extends z.Scene{constructor(){super(It.key)}preload(){this.load.font("DungGeunMo","https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/DungGeunMo.woff"),this.load.setPath("assets/Common/"),this.load.audio("Common:sound:cancel","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Cancel.mp3"),this.load.audio("Common:sound:confirm","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Confirm.mp3"),this.load.audio("Common:sound:select","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_MenuSelections.mp3"),this.load.audio("Common:sound:open_menu","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_OpenMenu.mp3"),this.load.audio("Common:sound:close_menu","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_CloseMenu.mp3"),this.load.audio("Common:sound:exit","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Exit.mp3"),this.load.audio("Common:sound:pause","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Pause.mp3"),this.load.audio("Common:sound:resume","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Resume.mp3"),this.load.audio("Common:sound:shop","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Shop.mp3"),this.load.audio("Common:sound:equip","SoupTonic UI1 SFX Pack 1 - mp3/SFX_UI_Equip.mp3")}create(){this.add.text(0,d.HEIGHT,Mt,{...d.style.font_style}).setOrigin(0,1),this.sound.setVolume(d.volume_master),d.on(X.VOLUME_MASTER,t=>{this.sound.setVolume(t)}),this.scene.launch(xt.key),this.scene.start(Ct.key)}};It.key="BootScene";let Rt=It;const Ce={type:z.AUTO,parent:"game-container",width:d.WIDTH,height:d.HEIGHT,transparent:!0,pixelArt:!0,roundPixels:!1,antialias:!1,scale:{mode:z.Scale.FIT,autoCenter:z.Scale.CENTER_BOTH},fullscreenTarget:"game-container",preserveDrawingBuffer:!0,scene:[Rt,Ct,bt,pt,ut,ht,xt]};document.addEventListener("DOMContentLoaded",()=>{new z.Game(Ce)});
